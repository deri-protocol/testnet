{"version":3,"sources":["components/Button/Button.js","utils/DeriNumberFormat.js","../node_modules/date-format/lib/index.js","assets/img/play-button.png","hooks/useClaimInfo.js","components/Broker/Broker.js"],"names":["Button","btnText","className","disabled","click","afterClick","checkApprove","wallet","spec","lang","useState","status","setStatus","isApproved","setIsApproved","pending","setPending","buttonText","setbuttonText","loadRef","useRef","onClick","a","beforeAction","afterAction","current","style","display","loadApproveStatus","detail","account","pool","bTokenId","res","approve","success","alert","useEffect","ref","marginRight","DeriNumberFormat","props","renderablity","setRenderablity","allowZero","others","value","undefined","isNaN","Math","abs","displayType","padWithZeros","vNumber","width","numAsString","toString","length","addZero","asString","format","date","module","exports","ISO8601_FORMAT","now","vDay","getDate","vMonth","getMonth","vYearLong","getFullYear","vYearShort","substring","vYear","indexOf","vHour","getHours","vMinute","getMinutes","vSecond","getSeconds","vMillisecond","getMilliseconds","vTimeZone","timezoneOffset","os","h","String","floor","m","offset","getTimezoneOffset","replace","setDatePart","part","local","parse","pattern","str","missingValuesDate","Error","matchers","regexp","fn","setUTCMinutes","getUTCMinutes","parsedPattern","reduce","p","test","index","match","dateFns","filter","sort","b","matches","RegExp","exec","forEach","f","i","extractDateParts","Date","ISO8601_WITH_TZ_OFFSET_FORMAT","DATETIME_FORMAT","ABSOLUTETIME_FORMAT","useClaimInfo","claimInfo","setClaimInfo","interval","loadClaimInfo","isConnected","getUserInfoAll","claimed","total","toFixed","unclaimed","valid","amount","harvestDeriLp","lp","harvestDeriTrade","trade","chainId","window","setInterval","clearInterval","config","DeriEnv","get","inject","observer","loading","claimInfoInterval","useConfig","firstDeri","setFirstDeri","secondDeri","setSecondDeri","thirdDeri","setThirdDeri","yourDeri","setYourDeri","yourRank","setYourRank","sumPage","setSumPage","currentPage","setCurrentPage","totList","setTotList","setClaimed","list","setList","remainingTime","setRemainingTime","rewardList","path","fetchRestApi","data","map","item","obj","address","trader_address","trader_volume","deri_reward","trader_invite_timestamp","slice","loaded","brokerEpoch","topList","rank","totalReward","hasOwnProperty","mintDeri","eqInNumber","text","parseInt","mintDToken","sum_page","ceil","intervalEpoch","period","dis","s","thousandSeparator","decimalScale","target","href","title","dateFormat","page","xmlns","height","viewBox","id","data-name","d","transform","fill"],"mappings":"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","file":"static/js/6.70c44bcc.chunk.js","sourcesContent":["import {useState,useRef,useEffect} from 'react';\r\nexport default function Button({btnText,className,disabled,click,afterClick,checkApprove,wallet,spec,lang}){\r\n  const [status, setStatus] = useState(disabled ? 'disabled' : 'enabled');\r\n  const [isApproved, setIsApproved] = useState(true);\r\n  const [pending, setPending] = useState(false);\r\n  const [buttonText, setbuttonText] = useState(btnText)\r\n  const loadRef = useRef(null)\r\n\r\n  const onClick = async () => {\r\n    if(status !== 'enabled') {\r\n      return ;\r\n    }\r\n    beforeAction()\r\n    const result = await click();    \r\n    if(result){\r\n      afterClick && afterClick()\r\n    } \r\n    afterAction()\r\n  }\r\n\r\n  const beforeAction = ()  => {\r\n    setStatus('disabled')\r\n    setPending(true);\r\n    loadRef.current && (loadRef.current.style.display = 'inline-block')\r\n  }\r\n\r\n  const afterAction = () => {\r\n    loadRef.current && (loadRef.current.style.display = 'none')\r\n    setStatus('enabled')\r\n    setPending(false);\r\n  }\r\n\r\n  const loadApproveStatus = async () => {\r\n    if(checkApprove && wallet && wallet.detail.account){\r\n      const res = await wallet.isApproved(spec.pool,spec.bTokenId)\r\n      setIsApproved(res);\r\n    }\r\n  }\r\n  const approve = async () => {\r\n    beforeAction();\r\n    const res = await wallet.approve(spec.pool,spec.bTokenId);\r\n    if(res.success){\r\n      setIsApproved(true);\r\n    } else {\r\n      setIsApproved(false)\r\n      alert(lang['approve-failed'])\r\n    }\r\n    afterAction();\r\n  }\r\n\r\n  const action = () => {\r\n    if(isApproved){\r\n      onClick();\r\n    } else {\r\n      approve();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadApproveStatus();\r\n    return () => {};\r\n  }, [wallet,spec,checkApprove]);\r\n\r\n  useEffect(() => {\r\n    if(btnText){\r\n      setbuttonText(btnText)\r\n    }\r\n    return () => {\r\n    }\r\n  }, [btnText])\r\n\r\n  return(\r\n    <button className={className} onClick={action} >\r\n        <span className='btn-loading-wrap'>\r\n          <span ref={loadRef}\r\n            className='spinner spinner-border spinner-border-sm'\r\n            style={{display : 'none' ,marginRight : '2'}}>\r\n          </span>\r\n        </span>\r\n          {pending ? lang['pending'] : (isApproved ? buttonText : lang['approve'])  }\r\n        </button>\r\n  )\r\n}","import React,{useState,useEffect} from 'react'\r\nimport NumberFormat from 'react-number-format'\r\n\r\nexport default function DeriNumberFormat(props){\r\n  const [renderablity, setRenderablity] = useState('--');\r\n\r\n  useEffect(() => {\r\n    const {allowZero,...others} = props \r\n    if(((typeof props.value !== 'object' && props.value !== undefined && props.value !== '' && props.value !== 'NaN') || ((isNaN(props.value) && Math.abs(props.value)) === 0 && allowZero === true ))) {\r\n      setRenderablity(<NumberFormat {...others} displayType = 'text' />)\r\n    } \r\n    return () => {};\r\n  }, [props.value]);\r\n\r\n  return renderablity;\r\n}","\"use strict\";\n\nfunction padWithZeros(vNumber, width) {\n  var numAsString = vNumber.toString();\n  while (numAsString.length < width) {\n    numAsString = \"0\" + numAsString;\n  }\n  return numAsString;\n}\n\nfunction addZero(vNumber) {\n  return padWithZeros(vNumber, 2);\n}\n\n/**\n * Formats the TimeOffset\n * Thanks to http://www.svendtofte.com/code/date_format/\n * @private\n */\nfunction offset(timezoneOffset) {\n  var os = Math.abs(timezoneOffset);\n  var h = String(Math.floor(os / 60));\n  var m = String(os % 60);\n  if (h.length === 1) {\n    h = \"0\" + h;\n  }\n  if (m.length === 1) {\n    m = \"0\" + m;\n  }\n  return timezoneOffset < 0 ? \"+\" + h + m : \"-\" + h + m;\n}\n\nfunction asString(format, date) {\n  if (typeof format !== \"string\") {\n    date = format;\n    format = module.exports.ISO8601_FORMAT;\n  }\n  if (!date) {\n    date = module.exports.now();\n  }\n\n  // Issue # 14 - Per ISO8601 standard, the time string should be local time\n  // with timezone info.\n  // See https://en.wikipedia.org/wiki/ISO_8601 section \"Time offsets from UTC\"\n\n  var vDay = addZero(date.getDate());\n  var vMonth = addZero(date.getMonth() + 1);\n  var vYearLong = addZero(date.getFullYear());\n  var vYearShort = addZero(vYearLong.substring(2, 4));\n  var vYear = format.indexOf(\"yyyy\") > -1 ? vYearLong : vYearShort;\n  var vHour = addZero(date.getHours());\n  var vMinute = addZero(date.getMinutes());\n  var vSecond = addZero(date.getSeconds());\n  var vMillisecond = padWithZeros(date.getMilliseconds(), 3);\n  var vTimeZone = offset(date.getTimezoneOffset());\n  var formatted = format\n    .replace(/dd/g, vDay)\n    .replace(/MM/g, vMonth)\n    .replace(/y{1,4}/g, vYear)\n    .replace(/hh/g, vHour)\n    .replace(/mm/g, vMinute)\n    .replace(/ss/g, vSecond)\n    .replace(/SSS/g, vMillisecond)\n    .replace(/O/g, vTimeZone);\n  return formatted;\n}\n\nfunction setDatePart(date, part, value, local) {\n  date['set' + (local ? '' : 'UTC') + part](value);\n}\n\nfunction extractDateParts(pattern, str, missingValuesDate) {\n  // Javascript Date object doesn't support custom timezone.  Sets all felds as\n  // GMT based to begin with.  If the timezone offset is provided, then adjust\n  // it using provided timezone, otherwise, adjust it with the system timezone.\n  var local = pattern.indexOf('O') < 0;\n  var matchers = [\n    {\n      pattern: /y{1,4}/,\n      regexp: \"\\\\d{1,4}\",\n      fn: function(date, value) {\n        setDatePart(date, 'FullYear', value, local);\n      }\n    },\n    {\n      pattern: /MM/,\n      regexp: \"\\\\d{1,2}\",\n      fn: function(date, value) {\n        setDatePart(date, 'Month', (value - 1), local);\n      }\n    },\n    {\n      pattern: /dd/,\n      regexp: \"\\\\d{1,2}\",\n      fn: function(date, value) {\n        setDatePart(date, 'Date', value, local);\n      }\n    },\n    {\n      pattern: /hh/,\n      regexp: \"\\\\d{1,2}\",\n      fn: function(date, value) {\n        setDatePart(date, 'Hours', value, local);\n      }\n    },\n    {\n      pattern: /mm/,\n      regexp: \"\\\\d\\\\d\",\n      fn: function(date, value) {\n        setDatePart(date, 'Minutes', value, local);\n      }\n    },\n    {\n      pattern: /ss/,\n      regexp: \"\\\\d\\\\d\",\n      fn: function(date, value) {\n        setDatePart(date, 'Seconds', value, local);\n      }\n    },\n    {\n      pattern: /SSS/,\n      regexp: \"\\\\d\\\\d\\\\d\",\n      fn: function(date, value) {\n        setDatePart(date, 'Milliseconds', value, local);\n      }\n    },\n    {\n      pattern: /O/,\n      regexp: \"[+-]\\\\d{3,4}|Z\",\n      fn: function(date, value) {\n        if (value === \"Z\") {\n          value = 0;\n        }\n        var offset = Math.abs(value);\n        var timezoneOffset = (value > 0 ? -1 :  1 ) * ((offset % 100) + Math.floor(offset / 100) * 60);\n        // Per ISO8601 standard: UTC = local time - offset\n        //\n        // For example, 2000-01-01T01:00:00-0700\n        //   local time: 2000-01-01T01:00:00\n        //   ==> UTC   : 2000-01-01T08:00:00 ( 01 - (-7) = 8 )\n        //\n        // To make it even more confusing, the date.getTimezoneOffset() is\n        // opposite sign of offset string in the ISO8601 standard.  So if offset\n        // is '-0700' the getTimezoneOffset() would be (+)420. The line above\n        // calculates timezoneOffset to matche Javascript's behavior.\n        //\n        // The date/time of the input is actually the local time, so the date\n        // object that was constructed is actually local time even thought the\n        // UTC setters are used.  This means the date object's internal UTC\n        // representation was wrong.  It needs to be fixed by substracting the\n        // offset (or adding the offset minutes as they are opposite sign).\n        //\n        // Note: the time zone has to be processed after all other fileds are\n        // set.  The result would be incorrect if the offset was calculated\n        // first then overriden by the other filed setters.\n        date.setUTCMinutes(date.getUTCMinutes() + timezoneOffset);\n      }\n    }\n  ];\n\n  var parsedPattern = matchers.reduce(\n    function(p, m) {\n      if (m.pattern.test(p.regexp)) {\n        m.index = p.regexp.match(m.pattern).index;\n        p.regexp = p.regexp.replace(m.pattern, \"(\" + m.regexp + \")\");\n      } else {\n        m.index = -1;\n      }\n      return p;\n    },\n    { regexp: pattern, index: [] }\n  );\n\n  var dateFns = matchers.filter(function(m) {\n    return m.index > -1;\n  });\n  dateFns.sort(function(a, b) {\n    return a.index - b.index;\n  });\n\n  var matcher = new RegExp(parsedPattern.regexp);\n  var matches = matcher.exec(str);\n  if (matches) {\n    var date = missingValuesDate || module.exports.now();\n    dateFns.forEach(function(f, i) {\n      f.fn(date, matches[i + 1]);\n    });\n\n    return date;\n  }\n\n  throw new Error(\n    \"String '\" + str + \"' could not be parsed as '\" + pattern + \"'\"\n  );\n}\n\nfunction parse(pattern, str, missingValuesDate) {\n  if (!pattern) {\n    throw new Error(\"pattern must be supplied\");\n  }\n\n  return extractDateParts(pattern, str, missingValuesDate);\n}\n\n/**\n * Used for testing - replace this function with a fixed date.\n */\nfunction now() {\n  return new Date();\n}\n\nmodule.exports = asString;\nmodule.exports.asString = asString;\nmodule.exports.parse = parse;\nmodule.exports.now = now;\nmodule.exports.ISO8601_FORMAT = \"yyyy-MM-ddThh:mm:ss.SSS\";\nmodule.exports.ISO8601_WITH_TZ_OFFSET_FORMAT = \"yyyy-MM-ddThh:mm:ss.SSSO\";\nmodule.exports.DATETIME_FORMAT = \"dd MM yyyy hh:mm:ss.SSS\";\nmodule.exports.ABSOLUTETIME_FORMAT = \"hh:mm:ss.SSS\";\n","export default \"data:image/png;base64,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\"","import { useState, useEffect } from 'react'\r\nimport { getUserInfoAll ,deriToNatural} from '../lib/web3js/indexV2';\r\n\r\n\r\nexport default function useClaimInfo(wallet){\r\n  const [claimInfo, setClaimInfo] = useState({});\r\n  let interval = null;\r\n\r\n  const loadClaimInfo =  async () => {\r\n    if(wallet.isConnected()){\r\n      const claimInfo  = await getUserInfoAll(wallet.detail.account);\r\n      const claimed = (+claimInfo.total).toFixed(2);\r\n      const unclaimed = claimInfo.valid ? (+claimInfo.amount).toFixed(2) : 0;\r\n      const harvestDeriLp = (+claimInfo.lp).toFixed(2);\r\n      const harvestDeriTrade = (+claimInfo.trade).toFixed(2);\r\n      const chainId = claimInfo.chainId\r\n      setClaimInfo({claimed,unclaimed,harvestDeriLp,harvestDeriTrade,chainId})\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    interval = window.setInterval(loadClaimInfo,1000 * 60 *3);\r\n      loadClaimInfo();\r\n    return () => clearInterval(interval);\r\n  }, [wallet.detail.account])\r\n  return [claimInfo,interval];\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport rightArrow from '../../assets/img/play-button.png'\r\nimport dateFormat from 'date-format'\r\nimport config from '../../config.json'\r\nimport {\r\n  mintDToken,\r\n  fetchRestApi,\r\n  DeriEnv\r\n} from \"../../lib/web3js/indexV2\";\r\nimport classNames from 'classnames';\r\nimport useClaimInfo from \"../../hooks/useClaimInfo\";\r\nimport DeriNumberFormat from '../../utils/DeriNumberFormat'\r\nimport Button from '../Button/Button';\r\nimport { eqInNumber } from '../../utils/utils';\r\nimport useConfig from \"../../hooks/useConfig\";\r\nconst chainConfig = config[DeriEnv.get()]['chainInfo'];\r\nfunction Broker({ wallet = {}, lang ,loading}) {\r\n  const [claimInfo, claimInfoInterval] = useClaimInfo(wallet);\r\n  const config = useConfig(claimInfo.chainId)\r\n  const [firstDeri, setFirstDeri] = useState('--');\r\n  const [secondDeri, setSecondDeri] = useState('--');\r\n  const [thirdDeri, setThirdDeri] = useState('--');\r\n  const [yourDeri, setYourDeri] = useState('--');\r\n  const [yourRank, setYourRank] = useState('--');\r\n  const [sumPage, setSumPage] = useState(1);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totList, setTotList] = useState([])\r\n  const [claimed, setClaimed] = useState(false);\r\n  const [list, setList] = useState([]);\r\n  const [remainingTime, setRemainingTime] = useState('')\r\n  const [isLoading,setIsLoading] = useState(false)\r\n\r\n  const hasConnectWallet = () => wallet && wallet.detail && wallet.detail.account\r\n  const rewardList = async () => {\r\n    let path = `/broker/${wallet.detail.account}/reward_list`\r\n    let res = await fetchRestApi(path)\r\n    if (res.data) {\r\n      let data = res.data.map(item => {\r\n        let obj = {}\r\n        obj.address = item.trader_address\r\n        obj.trader_volume = item.trader_volume\r\n        obj.deri_reward = item.deri_reward;\r\n        obj.trader_invite_timestamp = item.trader_invite_timestamp * 1000\r\n        obj.trader_address = item.trader_address.slice(0, 6) +\r\n          \"...\" +\r\n          item.trader_address.slice(item.trader_address.length - 4, item.trader_address.length)\r\n        return obj\r\n      })\r\n      setTotList(data)\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    loading.loading();\r\n    // Promise.all([\r\n    //   brokerEpoch(),topList(),totalReward(),rewardList()\r\n    // ]).then(results => {\r\n    //   loading.loaded()\r\n    // })\r\n    \r\n    if(firstDeri!='--' && secondDeri!='--' && thirdDeri!='--' && yourDeri!='--' && yourRank!='--' && list.length>0 &&claimInfo.claimed){\r\n      loading.loaded()\r\n    }\r\n  },[firstDeri,secondDeri,thirdDeri,yourDeri,yourRank,list,claimInfo])\r\n\r\n  const brokerEpoch = async ()=>{\r\n    let path = `/broker/${wallet.detail.account}/get_harvest_deri`\r\n    let res = await fetchRestApi(path)\r\n    if(res.data){\r\n      setYourDeri(res.data.deri_reward)\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  const topList = async () => {\r\n    let path = '/broker/top3_reward_list'\r\n    let res = await fetchRestApi(path)\r\n    if (res.data) {\r\n      if(res.data.length){\r\n        res.data.map(item => {\r\n          if (item.rank === 1) {\r\n            setFirstDeri(item.deri_reward)\r\n          } else if (item.rank === 2) {\r\n            setSecondDeri(item.deri_reward)\r\n          } else if (item.rank === 3) {\r\n            setThirdDeri(item.deri_reward)\r\n          }\r\n        })\r\n      }else{\r\n        setFirstDeri(0)\r\n        setSecondDeri(0)\r\n        setThirdDeri(0)\r\n      }\r\n    }\r\n  }\r\n\r\n  const totalReward = async () => {\r\n    let path = `/broker/${wallet.detail.account}/total_reward`\r\n    let res = await fetchRestApi(path)\r\n    if (res.data) {\r\n      if (res.data.hasOwnProperty('deri_reward')) {\r\n        setYourRank(res.data.rank)\r\n      } else {\r\n        setYourRank('>999')\r\n      }\r\n    }\r\n  }\r\n\r\n  const mintDeri = async () => {\r\n    if ((+claimInfo.unclaimed) === 0) {\r\n      alert(lang['no-deri-to-claim']);\r\n      return;\r\n    }\r\n    if (!eqInNumber(wallet.detail.chainId, claimInfo.chainId)) {\r\n      alert(`${lang['your-deri-is-on']} ${config.text}  ${lang['connect-to']} ${config.text} ${lang['to-claim']}.`)\r\n      return;\r\n    }\r\n    let now = parseInt(Date.now() / 1000) % (3600 * 8);\r\n    if (now < 1800) {\r\n      alert(lang['claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch']);\r\n      return;\r\n    }\r\n    const res = await mintDToken(wallet.detail.chainId, wallet.detail.account)\r\n    if (res.success) {\r\n      clearInterval(claimInfoInterval);\r\n      return true;\r\n    } else {\r\n      alert(lang['claim-failed'])\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const click = async () => {\r\n\t\tif(wallet.isConnected()){\r\n\t\t\tconst res = await mintDeri();\r\n\t\t\tif(res){\r\n\t\t\t\tsetClaimed(true)\r\n\t\t\t}\r\n\t\t} \r\n\t}\r\n  \r\n  const upPage = () => {\r\n    let page = currentPage\r\n    if (page != 1) {\r\n      page -= 1;\r\n    }\r\n    setCurrentPage(page)\r\n  }\r\n\r\n  const downPage = () => {\r\n    let page = currentPage\r\n    if (page < sumPage) {\r\n      page += 1;\r\n    }\r\n    setCurrentPage(page)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (totList.length) {\r\n      let sum_page = totList.length / 10;\r\n      sum_page = Math.ceil(sum_page)\r\n      let data = totList.slice((currentPage - 1) * 10, currentPage * 10)\r\n      setSumPage(sum_page);\r\n      setList(data);\r\n    }\r\n\r\n  }, [wallet.detail, totList, currentPage])\r\n  useEffect(() => {\r\n    // loading.loading()\r\n    if(hasConnectWallet()){\r\n      rewardList();\r\n      topList();\r\n      totalReward();\r\n    }\r\n  }, [wallet.detail])\r\n  useEffect(() => {\r\n    let intervalEpoch = null;\r\n    intervalEpoch = window.setInterval(brokerEpoch(),1000 * 60 *3);\r\n    return () => {\r\n      intervalEpoch && clearInterval(intervalEpoch);\r\n\t\t}\r\n  },[wallet.detail.account])\r\n\r\n  useEffect(() => {\r\n\t\tlet interval = null;\r\n\t\t\t//计数器\r\n\t\t\tinterval = window.setInterval(() => {\r\n\t\t\t\tlet period = 3600 * 8;\r\n\t\t\t\tlet current = parseInt(Date.now()/1000);\r\n\t\t\t\tlet epochBegin = parseInt(current / period)*period;\r\n\t\t\t\tlet dis = (epochBegin + period - current);\r\n\t\t\t\tlet h = parseInt(dis / 3600);\r\n\t\t\t\tlet m = parseInt((dis % 3600)/60);\r\n\t\t\t\tlet s = parseInt(dis % 60);\r\n\t\t\t\tsetRemainingTime(`${h} ${lang['h']} ${m} ${lang['m']} ${s} ${lang['s']}`);\r\n\t\t\t},1000);\r\n    return () => {\r\n      interval && clearInterval(interval);\r\n\t\t};\r\n\t\t\r\n  }, [wallet.detail.account]);\r\n\r\n  return (\r\n    <div className='broker'>\r\n      <div className='title'>\r\n        {lang['title-one']}\r\n        <br />\r\n        {lang['title-two']}\r\n      </div>\r\n      <div className='rewards'>\r\n        <div className='reward-box'>\r\n          <div className='rewards-left'>\r\n            <div className='rewards-one'>\r\n              <div className='num'>\r\n                <span>\r\n                  <DeriNumberFormat value={firstDeri} displayType='text' thousandSeparator={true} decimalScale='2' />\r\n                </span> DERI\r\n              </div>\r\n              <div className='one'>\r\n                # 1 {lang['rewards']}\r\n              </div>\r\n            </div>\r\n            <div className='rewards-three'>\r\n              <div className='num'>\r\n                <span>\r\n                  <DeriNumberFormat value={thirdDeri} displayType='text' thousandSeparator={true} decimalScale='2' />\r\n                </span>  DERI\r\n              </div>\r\n              <div className='one'>\r\n                # 3 {lang['rewards']}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='rewards-right'>\r\n            <div className='rewards-two'>\r\n              <div className='num'>\r\n                <span>\r\n                  <DeriNumberFormat value={secondDeri} displayType='text' thousandSeparator={true} decimalScale='2' />\r\n                </span> DERI\r\n              </div>\r\n              <div className='one'>\r\n                # 2 {lang['rewards']}\r\n              </div>\r\n            </div>\r\n            <div className='rewards-frou'>\r\n              <div className='num'>\r\n                <span>\r\n                  {yourRank}\r\n                </span>\r\n              </div>\r\n              <div className='one'>\r\n                {lang['your-rewards']}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-box\"></div>\r\n      </div>\r\n      <div className='process'>\r\n        <div className='invite'>\r\n          {lang['invute-friends']}\r\n        </div>\r\n        <div className='proce'></div>\r\n        <div className='bind'>\r\n          {lang['bind-address']}\r\n        </div>\r\n        <div className='proce'></div>\r\n        <div className='earn'>\r\n          {lang['earn-deri']}\r\n        </div>\r\n      </div>\r\n      <div className='rules'>\r\n        <div>\r\n\r\n        </div>\r\n        <div>\r\n          <a target='_blank' href='https://docs.deri.finance/guides/mining#mining-by-brokerage-mining-0-01deri-per-contract-or-distributed-per-volume-weight-if-breaching-the-hourly-upper-limit'>{lang['detailed-rules']} >></a>\r\n        </div>\r\n      </div>\r\n      <div className='my-harvest'>\r\n        <div className='header'>\r\n          {lang['my-harvest']}\r\n        </div>\r\n        <div className='list'>\r\n          <div className='my-deri'>\r\n            <div className='claim-deri'>\r\n              <div className='claimed-deri'>\r\n                <div className='unclaimed-title'>\r\n                  <span  title={lang['your-total-unclaimed-deri-title']}>\r\n                    {lang['current-epoch-remaining-time']}\r\n                  </span>\r\n                  <span className='deri-text'>\r\n                  {remainingTime}\r\n                  </span>\r\n                </div>\r\n                <div className='unclaimed-title'>\r\n                  <span  title={lang['your-total-unclaimed-deri-title']}>\r\n                    {lang['my-trading-volume-in-current-hour']} \r\n                  </span>\r\n                  <span className='deri-text'>\r\n                    <DeriNumberFormat value={(+yourDeri).toFixed(2)} displayType='text' thousandSeparator={true} decimalScale='2' />  DERI\r\n                  </span>\r\n                </div>\r\n                <div className='claimed-title'>\r\n                  <span className='hover-title' title={lang['your-total-claimed-deri-title']}>\r\n                  {lang['claimed-deri']}\r\n                  </span>\r\n                  <span className='deri-text'>\r\n                    {claimed ? ((+claimInfo.claimed) + (+claimInfo.unclaimed)).toFixed(2) : claimInfo.claimed }\r\n                  </span>\r\n                </div>\r\n                <div className='unclaimed-title'>\r\n                  <span className='hover-title' title={lang['your-total-unclaimed-deri-title']}>\r\n                    {lang['unclaimed-deri']}\r\n                  </span>\r\n                  <span className='deri-text'>\r\n                  { claimed ? 0 : (+claimInfo.unclaimed).toFixed(2) }\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className='button'>\r\n              <Button className='btn' btnText={lang['claim']} lang={lang} click={click}></Button>\r\n            </div>\r\n          </div>\r\n          <div className='address-list'>\r\n            <div className='list-title'>\r\n              <div className='time-invited'>{lang['time-invited']}</div>\r\n              <div className='friends-add'>\r\n                {lang['friends-add']}\r\n              </div>\r\n              <div className='contract-vol'>{lang['contract-vol']}</div>\r\n              <div className='deri-minted'>{lang['deri-minted']}</div>\r\n            </div>\r\n            {list.map((list, index) => <div className='list-box' key={index} >\r\n              <div className='time'>\r\n                {dateFormat.asString('yyyy-MM-dd hh:mm', new Date(parseInt(list.trader_invite_timestamp)))}\r\n              </div>\r\n              <div className='address'>\r\n              {list.trader_address}\r\n              {/* <span className='view'>\r\n                  <span className='view-space'>\r\n                    <a target='_blank' rel='noreferrer' href={chainConfig[wallet.detail.chainId].hasOwnProperty('viewUrl')?`${chainConfig[wallet.detail.chainId]['viewUrl']}address/${list.address}`:''}>\r\n                    View at {chainConfig[wallet.detail.chainId].hasOwnProperty('viewUrl')?chainConfig[wallet.detail.chainId]['viewUrl']:''}\r\n                    </a>\r\n                  </span>\r\n                  <span className='right-arrow'>\r\n                    <img alt='' src={rightArrow}/>\r\n                  </span>\r\n                  <span className='view-arrow'>\r\n                    <a target='_blank' rel='noreferrer' href={chainConfig[wallet.detail.chainId].hasOwnProperty('viewUrl')?`${chainConfig[wallet.detail.chainId]['viewUrl']}address/${list.address}`:''}>\r\n                      <img rel='noreferrer' alt='' src=\"data:image/svg+xml;base64,DQo8c3ZnIGZpbGw9Im5vbmUiIGhlaWdodD0iMTAiIHdpZHRoPSIxMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNOC42NzYuNjQyYS42NS42NSAwIDAwLS4wNzIuMDA2SDQuNzkzYS42NS42NSAwIDAwLS41Ny45NzUuNjUuNjUgMCAwMC41Ny4zMjJINy4xMkwuNDM4IDguNjE0YS42NDcuNjQ3IDAgMDAuMjg2IDEuMDk2LjY1LjY1IDAgMDAuNjMyLS4xNzlMOC4wNCAyLjg2MXYyLjMyNGEuNjQ4LjY0OCAwIDAwLjk3Ny41Ny42NDguNjQ4IDAgMDAuMzIyLS41N1YxLjM4YS42NDcuNjQ3IDAgMDAtLjY2Mi0uNzM3eiIgZmlsbD0iI0FBQUFBQSIvPg0KPC9zdmc+DQoNCg==\"/>\r\n                    </a>\r\n                  </span>\r\n                </span> */}\r\n              </div>\r\n              <div className='volume'>{list.trader_volume}</div>\r\n              <div className='deri'>\r\n                <DeriNumberFormat value={list.deri_reward} displayType='text' thousandSeparator={true} decimalScale='2' />\r\n              </div>\r\n            </div>)}\r\n          </div>\r\n          <div className='page-of'>\r\n            <div onClick={upPage}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"9.6\" height=\"8\" viewBox=\"0 0 9.6 8\">\r\n              <path id=\"路径_3\" data-name=\"路径 3\" d=\"M3186.224,481.353a.4.4,0,1,1,.552.58l-3.069,2.91h7.993a.4.4,0,1,1,0,.8h-7.98l3.056,2.91a.4.4,0,0,1-.552.58l-3.49-3.324a.8.8,0,0,1,.007-1.138Z\" transform=\"translate(-3182.5 -481.243)\" fill=\"#aaa\" />\r\n            </svg>\r\n            </div>\r\n            <div className='page'>{lang['page']} {currentPage} {lang['of']} {sumPage}</div>\r\n            <div onClick={downPage}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"9.6\" height=\"8\" viewBox=\"0 0 9.6 8\">\r\n              <path id=\"路径_4\" data-name=\"路径 4\" d=\"M3268.376,481.353a.4.4,0,0,0-.552.58l3.069,2.91H3262.9a.4.4,0,0,0,0,.8h7.98l-3.056,2.91a.4.4,0,0,0,.552.58l3.49-3.324a.8.8,0,0,0-.007-1.138Z\" transform=\"translate(-3262.5 -481.243)\" fill=\"#aaa\" />\r\n            </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default inject('wallet','loading')(observer(Broker))\r\n"],"sourceRoot":""}