{"version":3,"sources":["desktop/pages/Mining/Mining.js"],"names":["chainInfo","config","DeriEnv","get","inject","observer","wallet","lang","useState","currentTab","setCurrentTab","history","useHistory","isController","setIsController","useParams","version","chainId","symbol","baseToken","address","type","query","useQuery","networkText","name","props","url","has","PoolController","a","isPoolController","detail","account","res","openConfigList","openConfigListCache","update","useEffect","poolInfoClass","classnames","className","onClick","push","gotoMining"],"mappings":"4UAaOA,EAAaC,EADRC,IAAQC,OACbH,UAoEQI,sBAAO,SAAPA,CAAiBC,aAlEhC,YAA+B,IAAdC,EAAa,EAAbA,OAAOC,EAAM,EAANA,KAAM,EACMC,mBAAS,aADf,mBACtBC,EADsB,KACXC,EADW,KAEvBC,EAAUC,uBAFa,EAGUJ,oBAAS,GAHnB,mBAGtBK,EAHsB,KAGTC,EAHS,OAI4BC,sBAAlDC,EAJsB,EAItBA,QAAQC,EAJc,EAIdA,QAAQC,EAJM,EAINA,OAAOC,EAJD,EAICA,UAAUC,EAJX,EAIWA,QAAQC,EAJnB,EAImBA,KAC1CC,EAAQC,cACRC,EAAcxB,EAAUiB,IAAYjB,EAAUiB,GAASQ,KACvDC,EAAQ,CAACV,UAAQC,UAAQC,SAAOC,YAAUC,UAAQd,SAAOe,OAAKd,QAC9DoB,EAAG,qBAAiBX,GAAW,KAA5B,YAAoCC,EAApC,YAA+CI,EAA/C,YAAuDH,EAAvD,YAAiEC,EAAjE,YAA8EC,GACpFE,EAAMM,IAAI,iBACZF,EAAK,YAAkBJ,EAAMnB,IAAI,gBAE/BmB,EAAMM,IAAI,cACZF,EAAK,SAAeJ,EAAMnB,IAAI,aAE/B,IAEM0B,EAAc,uCAAG,4BAAAC,EAAA,sEACNC,YAAiBzB,EAAO0B,OAAOf,QAAQG,EAAQd,EAAO0B,OAAOC,SADvD,OAClBC,EADkB,OAEtBpB,EAAgBoB,GAFM,2CAAH,qDAKdC,EAAc,uCAAG,sBAAAL,EAAA,sEAChBM,IAAoBC,SADJ,2CAAH,qDAQpBC,qBAAU,WAfqBhC,GAAUA,EAAO0B,QAAU1B,EAAO0B,OAAOC,UAiBtEJ,IACe,iBAAZb,GACFmB,OAGD,CAAC7B,EAAOA,EAAO0B,OAAOZ,IAExB,IAAMmB,EAAgBC,IAAW,cAAc/B,EAAW,CAAC,YAA0B,iBAAZO,IACzE,OACG,sBAAKyB,UAAWF,EAAhB,UACD,sBAAKE,UAAU,cAAf,UACE,qBAAKA,UAAU,eAAf,SACW,OAATpB,GAAgE,OAAZL,GAAgC,YAAZA,GAAqC,iBAAZA,GAA0C,WAAZA,EAA/H,UAAmBG,EAAnB,cAAkCK,GAAiB,UAAyIN,EAAzI,YAAmJC,EAAnJ,cAAkKK,KAE1M,iBAAZR,GAA8B,qBAAKyB,UAAU,wBAAf,SAC7B,qBAAKA,UAAU,mBAAmBC,QAAS,kBAAMhC,EAAc,cAA/D,SACGH,EAAK,2BAIZ,qBAAKkC,UAAU,YAAf,SACE,cAAC,IAAD,eAAqBf,MAErBb,GAA4B,iBAAZG,GAA+B,mCAChD,qBAAKyB,UAAU,aAAf,SACC,wBAAQC,QAAS,kBA/BF,SAACf,GACnBhB,EAAQgC,KAAKhB,GA8BaiB,CAAWjB,IAAlC,SACEpB,EAAK","file":"static/js/32.e4f6c015.chunk.js","sourcesContent":["import {useEffect, useState} from 'react'\r\nimport {useParams,useHistory} from \"react-router-dom\";\r\nimport LiquidityMining from \"../../../components/Mining/Liquidity/LiquidityMining\";\r\nimport TradeMining from \"../../../components/Mining/Trade/TradeMining\";\r\nimport {DeriEnv,isPoolController,openConfigListCache} from '../../../lib/web3js/indexV2'\r\nimport config from '../../../config.json'\r\nimport './mining.less'\r\nimport './zh-mining.less'\r\nimport classnames from \"classnames\";\r\nimport { inject, observer } from 'mobx-react';\r\nimport useQuery from '../../../hooks/useQuery'\r\n\r\nconst env = DeriEnv.get();\r\nconst {chainInfo} = config[env]\r\n\r\nfunction Mining({wallet,lang}){\r\n\tconst [currentTab,setCurrentTab] = useState('liquidity')\r\n\tconst history = useHistory();\r\n\tconst [isController,setIsController] = useState(false)\r\n\tconst {version,chainId,symbol,baseToken,address,type} =  useParams();\r\n\tconst query = useQuery();\r\n\tconst networkText = chainInfo[chainId] && chainInfo[chainId].name;\r\n\tconst props = {version,chainId,symbol,baseToken,address,wallet,type,lang}\r\n\tconst url = `/addsymbol/${version || 'v1'}/${chainId}/${type}/${symbol}/${baseToken}/${address}`\r\n\tif(query.has('baseTokenId')) {\r\n\t\tprops['baseTokenId'] = query.get('baseTokenId')\r\n\t}\r\n\tif(query.has('symbolId')){\r\n\t\tprops['symbolId'] = query.get('symbolId')\r\n\t}\r\n\tconst hasConnectWallet = () => wallet && wallet.detail && wallet.detail.account\r\n\r\n\tconst PoolController = async () => {\r\n\t\tlet res = await isPoolController(wallet.detail.chainId,address,wallet.detail.account)\r\n\t\tsetIsController(res)\r\n\t}\r\n\r\n\tconst openConfigList = async ()=>{\r\n\t\tawait openConfigListCache.update()\r\n\t}\r\n\r\n\tconst gotoMining = (url)=>{\r\n\t\thistory.push(url)\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tif(hasConnectWallet()){\r\n\t\t\tPoolController()\r\n\t\t\tif(version === 'v2_lite_open'){\r\n\t\t\t\topenConfigList()\r\n\t\t\t}\r\n\t\t}\r\n\t},[wallet,wallet.detail,address])\r\n\r\n\tconst poolInfoClass = classnames('mining-info',currentTab,{'open-zone' : version === 'v2_lite_open'})\r\n\treturn(\r\n    <div className={poolInfoClass}>\r\n\t\t\t<div className=\"pool-header\">\r\n\t\t\t\t\t<div className=\"pool-network\">\r\n\t\t\t\t\t\t{type === 'lp' ? `${baseToken} @ ${networkText}` :  (version === 'v2' || version === 'v2_lite' || version === 'v2_lite_open' || version === 'option') ? `${baseToken} @ ${networkText}` : `${symbol}/${baseToken} @ ${networkText}` }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{version !== 'v2_lite_open' && <div className=\"check-trade-liquidity\">\r\n\t\t\t\t\t\t\t<div className='liquidity-mining' onClick={() => setCurrentTab('liquidity')} >\r\n\t\t\t\t\t\t\t\t\t{lang['liquidity-mining']}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</div>\r\n\t\t\t<div className='pool-info'>\r\n\t\t\t\t\t<LiquidityMining {...props}/>\r\n\t\t\t</div>\r\n\t\t\t{(isController && version === 'v2_lite_open') && <>\r\n\t\t\t\t<div className='add-symbol'>\r\n\t\t\t\t\t<button onClick={() => gotoMining(url)} >\r\n\t\t\t\t\t\t{lang['add-symbol']}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</>}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default inject('wallet')(observer(Mining))"],"sourceRoot":""}