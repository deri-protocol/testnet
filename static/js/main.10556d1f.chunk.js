(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[5],{105:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return l}));var r=n(0),a=n.n(r),i=n(1),u=n(53),s=n(17),o=n.n(s),c=n(2),p=function(){var t=null;return function(){if(null!==t)return t;var e;if(void 0===Object(u.a)(window.ethereum))throw new Error("Please install MetaMask first");return e=new o.a(window.ethereum),t=e,e}}(),l=function(){var t={};return function(){var e=Object(i.a)(a.a.mark((function e(n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.keys(t).includes(n)){e.next=2;break}return e.abrupt("return",t[n]);case 2:return console.log("==== web3Factory(".concat(n,"), please caution the access limits ===")),e.next=5,Object(c.l)(n);case 5:return r=e.sent,i=new o.a(new o.a.providers.HttpProvider(r)),t[n]=i,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}()},122:function(t,e,n){"use strict";var r=n(4),a=n(5),i=n(10),u=n(9),s=n(6),o=n.n(s),c=n(273),p=n.n(c),l=n(159),d=n.n(l),y=(n(287),n(57)),f=function(t){Object(i.a)(n,t);var e=Object(u.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"componentWillMount",value:function(){d.a.start()}},{key:"componentWillUnmount",value:function(){d.a.done()}},{key:"render",value:function(){return Object(y.jsx)("div",{})}}]),n}(o.a.Component);e.a=function(t){return p()({loader:t,loading:function(){return Object(y.jsx)(f,{})}})}},14:function(t,e,n){"use strict";n.r(e),n.d(e,"getChainProviderUrls",(function(){return r})),n.d(e,"getAnnualBlockNumberConfig",(function(){return a})),n.d(e,"getPoolConfigList",(function(){return u})),n.d(e,"getFilteredPoolConfigList",(function(){return s})),n.d(e,"getPoolConfig",(function(){return o}));var r=function(t){var e=[{provider_urls:["https://mainnet.infura.io/v3/d0e6582644a845ee8d7c3c18683fec06"],chainId:"1"},{provider_urls:["https://bsc-dataseed.binance.org","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/"],chainId:"56"},{provider_urls:["https://http-mainnet.hecochain.com"],chainId:"128"},{provider_urls:["https://ropsten.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"3"},{provider_urls:["https://kovan.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"42"},{provider_urls:["https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-1-s1.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"],chainId:"97"},{provider_urls:["https://http-testnet.hecochain.com"],chainId:"256"}].filter((function(e){return e.chainId===t}));if(e.length>0)return e[0].provider_urls;throw new Error("getChainProviderUrls: no urls for chainId ".concat(t))},a=function(){return{1:"2367422",56:"10497304",128:"10511369",3:"2367422",97:"10497304",256:"10511369"}},i=n(16),u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[]:[{pool:"0x19EC6281749C06Ed9647134c57257AcA1508bFA8",pToken:"0x5a08BB6a3C0a20471def9e79B27117ebBEdAf0a7",lToken:"0x7743d650D312843C5d34cD860001E64b0C114b19",router:"0x1061b8457A036b4A23C8C2346cC62C701e35E2c4",bToken:"0x4038191eFb39Fe1d21a48E061F8F14cF4981A0aF",bTokenId:"0",initialBlock:"",bTokenSymbol:"BUSD",symbol:"BTCUSD",symbolId:"0",unit:"BTC",chainId:"97",version:"v2"},{pool:"0x19EC6281749C06Ed9647134c57257AcA1508bFA8",pToken:"0x5a08BB6a3C0a20471def9e79B27117ebBEdAf0a7",lToken:"0x7743d650D312843C5d34cD860001E64b0C114b19",router:"0x1061b8457A036b4A23C8C2346cC62C701e35E2c4",bToken:"0x4038191eFb39Fe1d21a48E061F8F14cF4981A0aF",bTokenId:"0",initialBlock:"",bTokenSymbol:"BUSD",symbol:"ETHUSD",symbolId:"1",unit:"ETH",chainId:"97",version:"v2"},{pool:"0x19EC6281749C06Ed9647134c57257AcA1508bFA8",pToken:"0x5a08BB6a3C0a20471def9e79B27117ebBEdAf0a7",lToken:"0x7743d650D312843C5d34cD860001E64b0C114b19",router:"0x1061b8457A036b4A23C8C2346cC62C701e35E2c4",bToken:"0x5f59b256e411CB222D1790a08De492f4b6dA6E62",bTokenId:"1",initialBlock:"",bTokenSymbol:"BETH",symbol:"BTCUSD",symbolId:"0",unit:"BTC",chainId:"97",version:"v2"},{pool:"0x19EC6281749C06Ed9647134c57257AcA1508bFA8",pToken:"0x5a08BB6a3C0a20471def9e79B27117ebBEdAf0a7",lToken:"0x7743d650D312843C5d34cD860001E64b0C114b19",router:"0x1061b8457A036b4A23C8C2346cC62C701e35E2c4",bToken:"0x5f59b256e411CB222D1790a08De492f4b6dA6E62",bTokenId:"1",initialBlock:"",bTokenSymbol:"BETH",symbol:"ETHUSD",symbolId:"1",unit:"ETH",chainId:"97",version:"v2"},{pool:"0x19EC6281749C06Ed9647134c57257AcA1508bFA8",pToken:"0x5a08BB6a3C0a20471def9e79B27117ebBEdAf0a7",lToken:"0x7743d650D312843C5d34cD860001E64b0C114b19",router:"0x1061b8457A036b4A23C8C2346cC62C701e35E2c4",bToken:"0xd2F37BADdB702FF778aA038C63b7068054d93508",bTokenId:"2",initialBlock:"",bTokenSymbol:"AUTO",symbol:"BTCUSD",symbolId:"0",unit:"BTC",chainId:"97",version:"v2"},{pool:"0x19EC6281749C06Ed9647134c57257AcA1508bFA8",pToken:"0x5a08BB6a3C0a20471def9e79B27117ebBEdAf0a7",lToken:"0x7743d650D312843C5d34cD860001E64b0C114b19",router:"0x1061b8457A036b4A23C8C2346cC62C701e35E2c4",bToken:"0xd2F37BADdB702FF778aA038C63b7068054d93508",bTokenId:"2",initialBlock:"",bTokenSymbol:"AUTO",symbol:"ETHUSD",symbolId:"1",unit:"ETH",chainId:"97",version:"v2"}]},s=function(t,e,n){e="number"===typeof e?e.toString():e,n="number"===typeof n?n.toString():n;var r=u(i.DeriEnv.get()),a=null!=e?null!=n?function(r){return r.pool===t&&r.bTokenId===e&&r.symbolId===n}:function(n){return n.pool===t&&n.bTokenId===e}:null!=n?function(e){return e.pool===t&&e.symbolId===n}:function(e){return e.pool===t};if(r.length>0){var s=r.filter(a);if(s&&s.length>0)return s}throw new Error("Cannot find the pool config by poolAddress(".concat(t,") bTokenId(").concat(e,") and symbolId(").concat(n,")"))},o=function(t,e,n){return s(t,e,n)[0]}},16:function(t,e,n){"use strict";n.r(e),n.d(e,"DeriEnv",(function(){return r.a})),n.d(e,"ChainProviderUrls",(function(){return a})),n.d(e,"getChainProviderUrlsConfig",(function(){return i})),n.d(e,"getContractAddressConfig",(function(){return u})),n.d(e,"getSlpContractAddressConfig",(function(){return s})),n.d(e,"getClpContractAddressConfig",(function(){return o})),n.d(e,"getClp2ContractAddressConfig",(function(){return c})),n.d(e,"getLpContractAddressConfig",(function(){return p})),n.d(e,"getMiningVaultRouterContractAddress",(function(){return l})),n.d(e,"getDeriContractAddressConfig",(function(){return d})),n.d(e,"getAnnualBlockNumberConfig",(function(){return y})),n.d(e,"getDBProviderUrlsConfig",(function(){return f.c})),n.d(e,"getDBAddressConfig",(function(){return f.a})),n.d(e,"getDBWormholeAddressConfig",(function(){return f.d})),n.d(e,"getDBAirdropAddressConfig",(function(){return f.b})),n.d(e,"getRestServerConfig",(function(){return m})),n.d(e,"getRedisWorkerQueneConfig",(function(){return b}));var r=n(87),a=[{provider_urls:["https://mainnet.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"1"},{provider_urls:["https://bsc-dataseed.binance.org","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/"],chainId:"56"},{provider_urls:["https://http-mainnet.hecochain.com"],chainId:"128"},{provider_urls:["https://ropsten.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"3"},{provider_urls:["https://kovan.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"42"},{provider_urls:["https://data-seed-prebsc-2-s3.binance.org:8545/","https://data-seed-prebsc-1-s1.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/"],chainId:"97"},{provider_urls:["https://http-testnet.hecochain.com"],chainId:"256"}],i=function(t){var e=[{provider_urls:["https://mainnet.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"1"},{provider_urls:["https://bsc-dataseed.binance.org","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/"],chainId:"56"},{provider_urls:["https://http-mainnet.hecochain.com"],chainId:"128"},{provider_urls:["https://ropsten.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"3"},{provider_urls:["https://kovan.infura.io/v3/ec73e2f0c79a42c0997ee535364de584"],chainId:"42"},{provider_urls:["https://data-seed-prebsc-1-s1.binance.org:8545/","https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"],chainId:"97"},{provider_urls:["https://http-testnet.hecochain.com"],chainId:"256"}].filter((function(e){return e.chainId===t}));if(e.length>0)return e[0].provider_urls;throw new Error("getChainProviderUrlsConfig: no urls for chainId ".concat(t))},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0x639a9C2fAe976D089dCcc2ffAE51Ef1dd04B7985",bToken:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",pToken:"0x3c11c4990447F0AD575eBd74E8cD17bf61848A15",lToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x6C8d3F31b2ad1AE997Afa20EAd88cb67E93C6E17",initialBlock:"5288684",bTokenSymbol:"BUSD",symbol:"BTCUSD",unit:"BTC",chainId:"56",version:"v1"},{pool:"0x011346B81e5326904B5B76A11dECAf2c67eFFc23",bToken:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",pToken:"0xaE6429b4CDDDFefDB6ac702183c836B4e62Da410",lToken:"0xd8f78c47b0e0943B3Cb2cE1e1726472C4ddd2F98",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x6C8d3F31b2ad1AE997Afa20EAd88cb67E93C6E17",initialBlock:"6753399",bTokenSymbol:"BUSD",symbol:"COIN",unit:"COIN",chainId:"56",version:"v1"},{pool:"0x919F97417857781f754e00CCCD9100f78B759818",bToken:"0xe60eaf5A997DFAe83739e035b005A33AfdCc6df5",pToken:"0x29Be63E854727BB3Fef77eB107B8d1c33081f989",lToken:"0x610b39F9ba0fF2167AEb646462473c011A431Cd7",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x6C8d3F31b2ad1AE997Afa20EAd88cb67E93C6E17",initialBlock:"7475766",bTokenSymbol:"DERI",symbol:"iMEME",unit:"iMEME",chainId:"56",version:"v1"},{pool:"0x3C2970466635AAeFEd1cfe630D051Fa6D281aEbB",bToken:"0xdAC17F958D2ee523a2206206994597C13D831ec7",pToken:"0x9c6134F9e759C6812aaC102FC1a9f7cA5615fD33",lToken:"0x43CA6D7129d7F490d5B91B4D14D7c877D15A92dA",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",initialBlock:"11949433",bTokenSymbol:"USDT",symbol:"BTCUSD",unit:"BTC",chainId:"1",version:"v1"},{pool:"0x7137cc9f252dc405dadc35F597dA8B32e8653603",bToken:"0x3449FC1Cd036255BA1EB19d65fF4BA2b8903A69a",pToken:"0x15aD9b67cf54037127fD986Ca3bB775f9FC4ad05",lToken:"0xeC27d4c53C2E29F1113A9667c0B19442df83c1f1",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",initialBlock:"11860070",bTokenSymbol:"BAC",symbol:"BTCUSD",unit:"BTC",chainId:"1",version:"v1"},{pool:"0x9b404BAB12CE0D5039e7313d9e24f4b5c8E8E8e3",bToken:"0x0298c2b32eaE4da002a15f36fdf7615BEa3DA047",pToken:"0x732Ba556B304fd74Cd14b74ab8762A7D9f26d476",lToken:"0x90fE976Cbb48E0761A84DDA2974024377994a997",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0xF0bC8b772f26F8DeB46c1aebbEA7C8d502Abf3b8",initialBlock:"2557914",bTokenSymbol:"HUSD",symbol:"BTCUSD",unit:"BTC",chainId:"128",version:"v1"}]:[{pool:"0x67eE8f0CB17e750219Bd58d433D52ab4B3d8A081",bToken:"0x8F038C454B6E68B2988706a1a5f78dE2C4634097",pToken:"0xad794Adc3Ed6085A79Ba3e2FCD13Df8d33d462Ec",lToken:"0x37732230ac101f59490762Ef73Be43B5E5Ec4949",initialBlock:"9986356",bTokenSymbol:"USDT",symbol:"BTCUSD",unit:"BTC",chainId:"3",version:"v1"},{pool:"0xFFe402106E8F73F0A44C7350C2b734e048f448f2",bToken:"0xa0354a4bB59657ad9A2b3eeC4f53f7A6Fb171DD1",pToken:"0x5FeF67FD24f37b90E0c96324380F63413dF22f78",lToken:"0xCdDbf76F76B9F95135F5D531fefc344258ff322a",initialBlock:"7796681",bTokenSymbol:"BUSD",symbol:"BTCUSD",unit:"BTC",chainId:"97",version:"v1"},{pool:"0x02A614844212f71049c469902F7A20F6540a2792",bToken:"0xa0354a4bB59657ad9A2b3eeC4f53f7A6Fb171DD1",pToken:"0x4396025914025F1C8B74788bF7c64f879064FbA6",lToken:"0x2E80928a9eC105FE79cfC4B54c65d185AC3b7E9C",initialBlock:"8108552",bTokenSymbol:"BUSD",symbol:"COIN",unit:"COIN",chainId:"97",version:"v1"},{pool:"0xE5a4fCd3CE3a824bF15D5FABd390cF44E83AbE8B",bToken:"0x02c9840fD044abFd58E9674ecc232e8b1F323fE8",pToken:"0xfa803C4528A1b9f91DFc5f8b4ff940f9FE4F4635",lToken:"0xbD57300A178075F774b5F0F9f367B9A2912b7b5e",initialBlock:"3663327",bTokenSymbol:"HUSD",symbol:"BTCUSD",unit:"BTC",chainId:"256",version:"v1"}]},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd",bToken:"0xA3DfbF2933FF3d96177bde4928D0F5840eE55600",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",chainId:"1",bTokenSymbol:"DERI-USDT SLP",symbol:"--"}]:(console.log("getSlpContractAddressConfig(): no config for dev environment"),[])},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0x4de2Ac273aD1BBe2F5C41f986d7b3cef8383Df98",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x83b31Abc899863B8Eb06952994580CE86414156E",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"6894880",chainId:"56",bTokenSymbol:"CAKE-LP",symbol:"--"}]:[]},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0x73feaa1eE314F8c655E354234017bE2193C9E24E",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"699498",chainId:"56",bTokenSymbol:"CAKE-LP ONSEN",symbol:"--"}]:[]},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{pool:"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd",bToken:"0xA3DfbF2933FF3d96177bde4928D0F5840eE55600",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",MiningVault:"0x7826Ef8Da65494EA21D64D8E6A76AB1BED042FD8",chainId:"1",bTokenSymbol:"DERI-USDT SLP",symbol:"--",type:"slp"},{pool:"0x4de2Ac273aD1BBe2F5C41f986d7b3cef8383Df98",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x83b31Abc899863B8Eb06952994580CE86414156E",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"6894880",chainId:"56",bTokenSymbol:"CAKE-LP",symbol:"--",type:"clp"},{pool:"0x73feaa1eE314F8c655E354234017bE2193C9E24E",bToken:"0xDc7188AC11e124B1fA650b73BA88Bf615Ef15256",pToken:"0x0000000000000000000000000000000000000000",lToken:"0x0000000000000000000000000000000000000000",dToken:"0x0000000000000000000000000000000000000000",MiningVault:"0x0000000000000000000000000000000000000000",initialBlock:"699498",chainId:"56",bTokenSymbol:"CAKE-LP ONSEN",symbol:"--",type:"clp2"}]:[]},l=function(t){var e=[{MiningVaultRouter:"0x8d5613451Dc0592388f98d7Ab1ce5A732561936e",chainId:"56"}].filter((function(e){return e.chainId===t}));if(e.length>0)return e[0].MiningVaultRouter;throw new Error("getMiningVaultRouterAddressConfig: no address for chainId ".concat(t))},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?[{Deri:"0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9",Wormhole:"0x6874640cC849153Cb3402D193C33c416972159Ce",bTokenSymbol:"DERI",chainId:"1"},{Deri:"0xe60eaf5A997DFAe83739e035b005A33AfdCc6df5",Wormhole:"0x15a5969060228031266c64274a54e02Fbd924AbF",bTokenSymbol:"DERI",chainId:"56"},{Deri:"0x2bdA3e331Cf735D9420e41567ab843441980C4B8",Wormhole:"0x134A04497e9a0b1F8850fEaf87eD18ec348dDa46",bTokenSymbol:"DERI",chainId:"128"}]:[{Deri:"0x88Fe79a3b6AC7EeF3d55B2e388fa18400590698B",Wormhole:"0xcb28Fa7dFa1844Cdb47aD5f03484f6131293Fd2e",bTokenSymbol:"DERI",chainId:"3"},{Deri:"0x8dC0aA48bbc69BaCD2548c6b7adCDeF8DDbA50B2",Wormhole:"0x9028e43114Df57C97c15355224E575DF1e244919",bTokenSymbol:"DERI",chainId:"97"},{Deri:"0x932458a637F8060AF747167656651b64d4c36620",Wormhole:"0x629B0D3D32BE5ee5F7BF3845914d26446c04165d",bTokenSymbol:"DERI",chainId:"256"}]},y=function(){return{1:"2367422",56:"10497304",128:"10511369",3:"2367422",97:"10497304",256:"10511369"}},f=n(58),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t||"production"===t?"https://api.deri.finance":"https://alphaapi.deri.finance"},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"prod"===t?["trade_tx_quene","trade_worker_group"]:["trade_tx_quene_dev","trade_worker_group_dev"]}},164:function(t){t.exports=JSON.parse('{"prod":{"chainInfo":{"1":{"name":"Ethereum","text":"ETHEREUM","symbol":"ETH","viewUrl":"https://etherscan.io/"},"56":{"name":"bsc","text":"BSC","symbol":"BNB","viewUrl":"https://bscscan.com/"},"128":{"name":"heco","text":"HECO","symbol":"HT","viewUrl":"https://hecoscan.xyz/"}},"oracle":{"COIN":"https://oracle3.deri.finance/price","BTCUSD":"https://oracle.deri.finance/price"}},"dev":{"chainInfo":{"3":{"name":"Ropsten","text":"ROPSTEN","symbol":"ETH","viewUrl":"https://ropsten.etherscan.io/"},"97":{"name":"Bsc-testnet","text":"BSC TESTNET","symbol":"BNB","viewUrl":"https://testnet.bscscan.com/"},"256":{"name":"Heco-testnet","text":"HECO TESTNET","symbol":"HT","viewUrl":"https://scan-testnet.hecochain.com/"}},"oracle":{"COIN":"https://oracle2.deri.finance/price","BTCUSD":"https://oracle2.deri.finance/price"}}}')},2:function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"z",(function(){return d})),n.d(e,"A",(function(){return y})),n.d(e,"D",(function(){return f})),n.d(e,"y",(function(){return m})),n.d(e,"w",(function(){return b})),n.d(e,"x",(function(){return v})),n.d(e,"B",(function(){return h})),n.d(e,"C",(function(){return g})),n.d(e,"f",(function(){return T})),n.d(e,"g",(function(){return x})),n.d(e,"e",(function(){return k})),n.d(e,"v",(function(){return w})),n.d(e,"d",(function(){return O})),n.d(e,"i",(function(){return j})),n.d(e,"b",(function(){return M})),n.d(e,"r",(function(){return A})),n.d(e,"t",(function(){return C})),n.d(e,"q",(function(){return I})),n.d(e,"j",(function(){return P})),n.d(e,"u",(function(){return S})),n.d(e,"m",(function(){return B})),n.d(e,"n",(function(){return _})),n.d(e,"p",(function(){return E})),n.d(e,"o",(function(){return F})),n.d(e,"s",(function(){return D})),n.d(e,"k",(function(){return q})),n.d(e,"l",(function(){return L})),n.d(e,"h",(function(){return U}));var r=n(0),a=n.n(r),i=n(1),u=(n(53),n(17)),s=n.n(u),o=n(25),c=n.n(o);n.d(e,"a",(function(){return c.a}));var p=n(16);c.a.config({DECIMAL_PLACES:18,ROUNDING_MODE:c.a.ROUND_DOWN,EXPONENTIAL_AT:256});var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===e?c()(t):e>0?c()(t).times(c()("1".concat("0".repeat(e)))):c()(t).div(c()("1".concat("0".repeat(-e))))},d=function(t,e){return t.gte(e)?t:e},y=function(t,e){return t.lte(e)?t:e},f=function(t){return s.a.utils.toChecksumAddress(t)},m=function(t){return s.a.utils.hexToUtf8(t)},b=function(t){return s.a.utils.hexToNumber(t)},v=function(t){return s.a.utils.hexToNumberString(t)},h=function(t){return l(t,18).toFixed(0)},g=function(t){return"".concat(l(t).sd(4).times(100).toFixed(4).toString(),"%")},T=function(t){return l(t,-18)},x=function(t){return l(t).toString()},k=function(t){return 1===l(t).toNumber()},w=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.some((function(t){return isNaN(t.toString())||"0"===t.toString()}))},O=function(){var t=Object(i.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if(!t.sent.ok){t.next=6;break}return t.abrupt("return",!0);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(i.a)(a.a.mark((function t(){var e,n,r,i=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=i.length>0&&void 0!==i[0]?i[0]:[],n=0;case 2:if(!(n<e.length)){t.next=11;break}return r=e[n],t.next=6,O(r);case 6:if(!t.sent){t.next=8;break}return t.abrupt("return",r);case 8:n++,t.next=2;break;case 11:throw new Error("No alive http server in urls",e);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",A=function(t){var e;switch(t=N(t)){case"1":e="ethereum";break;case"56":e="bsc";break;case"128":e="heco";break;case"3":e="ropsten";break;case"42":e="kovan";break;case"97":e="bsctestnet";break;case"256":e="hecotestnet";break;default:throw new Error("The networkId is not valid")}return e},C=function(t,e){t=N(t);var n=Object(p.getContractAddressConfig)(p.DeriEnv.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,pTokenAddress:n[0].pToken,lTokenAddress:n[0].lToken,dTokenAdress:n[0].dToken,MinningVaultAddress:n[0].MiningVault,bTokenSymbol:n[0].bTokenSymbol,symbol:n[0].symbol,unit:n[0].unit,initialBlock:n[0].initialBlock}:(console.log("getPoolContractAddress(): contract address is not found: ".concat(t," ").concat(e)),[])},I=function(t){t=N(t);var e=Object(p.getContractAddressConfig)(p.DeriEnv.get()).filter((function(e){return e.chainId===t}));if(e.length>0&&e[0].MiningVault)return e[0].MiningVault},P=function(t){var e=Object(p.getAnnualBlockNumberConfig)();if(e[t])return parseInt(e[t]);console.log("cannot find the annual block number with chainId: ".concat(t))},S=function(t,e){t=N(t);var n=Object(p.getSlpContractAddressConfig)(p.DeriEnv.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,pTokenAddress:n[0].pToken,lTokenAddress:n[0].lToken,dTokenAdress:n[0].dToken,MinningVaultAddress:n[0].MiningVault}:(console.log("getSlpContractAddress(): contract address is not found: ".concat(t," ").concat(e)),{})},B=function(t,e){t=N(t);var n=Object(p.getClp2ContractAddressConfig)(p.DeriEnv.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,pTokenAddress:n[0].pToken,lTokenAddress:n[0].lToken,dTokenAdress:n[0].dToken,MinningVaultAddress:n[0].MiningVault}:(console.log("getClp2ContractAddress(): contract address is not found: ".concat(t," ").concat(e)),{})},_=function(t,e){t=N(t);var n=Object(p.getClpContractAddressConfig)(p.DeriEnv.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,lTokenAddress:n[0].lToken}:(console.log("getClpContractAddress(): contract address is not found: ".concat(t," ").concat(e)),{})},E=function(t,e){t=N(t);var n=Object(p.getLpContractAddressConfig)(p.DeriEnv.get()).filter((function(e){return e.chainId===t})).filter((function(t){return t.pool===e}));return n.length>0?{poolAddress:n[0].pool,bTokenAddress:n[0].bToken,lTokenAddress:n[0].lToken,type:n[0].type}:(console.log("getLpContractAddress(): contract address is not found: ".concat(t," ").concat(e)),{})},F=function(t){t=N(t);var e=Object(p.getDeriContractAddressConfig)(p.DeriEnv.get()).filter((function(e){return e.chainId===t}));return e.length>0?{deriAddress:e[0].Deri,wormholeAddress:e[0].Wormhole,bTokenSymbol:e[0].bTokenSymbol}:(console.log("getDeriContractAddress(): contract address is not found: ".concat(t)),{})},R=function(t,e){p.DeriEnv.get();var n=C(t,e).symbol,r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BTCUSD";return"".concat(t,"?symbol=").concat(e)};return n?r("https://oracle4.deri.finance/price",n):"https://oracle4.deri.finance/price"},D=function(){var t=Object(i.a)(a.a.mark((function t(e,n){var r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=R(e,n),i=5;case 2:if(!(i>0)){t.next=11;break}return t.next=5,fetch(r,{mode:"cors"});case 5:if(!(u=t.sent).ok){t.next=8;break}return t.abrupt("break",11);case 8:i-=1,t.next=2;break;case 11:if(0!==i||u){t.next=13;break}throw new Error("fetch oracle info error: exceed max retry(5).");case 13:return t.next=15,u.json();case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),q=function(){var t=Object(i.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D(e,n);case 3:return r=t.sent,r.price||"0",t.abrupt("return",T(r.price).toString());case 9:throw t.prev=9,t.t0=t.catch(0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}(),L=function(){var t=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=N(e),!((n=Object(p.getChainProviderUrlsConfig)(e)).length>0)){t.next=8;break}return t.next=5,j(n);case 5:return t.abrupt("return",t.sent);case 8:throw new Error("Cannot find the chain provider url with chainId: ".concat(e));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(t){return t.toFormat().replaceAll(",","").toString()},N=function(t){var e=t?t.toString():t;if(t&&["1","56","128","3","42","97","256"].includes(e))return e;throw new Error("invalid chainId: ".concat(t))}},20:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"k",(function(){return ot})),n.d(e,"n",(function(){return ct})),n.d(e,"a",(function(){return pt})),n.d(e,"t",(function(){return lt})),n.d(e,"p",(function(){return ft})),n.d(e,"o",(function(){return mt})),n.d(e,"s",(function(){return vt})),n.d(e,"r",(function(){return bt})),n.d(e,"e",(function(){return ht})),n.d(e,"h",(function(){return gt})),n.d(e,"i",(function(){return kt})),n.d(e,"f",(function(){return wt})),n.d(e,"l",(function(){return Ot})),n.d(e,"g",(function(){return jt})),n.d(e,"j",(function(){return Tt})),n.d(e,"m",(function(){return Mt})),n.d(e,"q",(function(){return Pt})),n.d(e,"v",(function(){return St})),n.d(e,"d",(function(){return Bt})),n.d(e,"w",(function(){return _t})),n.d(e,"u",(function(){return Et})),n.d(e,"c",(function(){return Ft}));var r=n(14),a=n(17),i=n.n(a),u=n(25),s=n.n(u);s.a.config({DECIMAL_PLACES:18,ROUNDING_MODE:s.a.ROUND_DOWN,EXPONENTIAL_AT:256});var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===e?s()(t):e>0?s()(t).times(s()("1".concat("0".repeat(e)))):s()(t).div(s()("1".concat("0".repeat(-e))))},c=function(t,e){return t.gte(e)?t:e},p=function(t){return o(t,-18)},l=function(t){return o(t,18).toFixed(0)},d=function(t){return i.a.utils.numberToHex(t)},y=n(0),f=n.n(y),m=n(1),b=(n(165),function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if(!t.sent.ok){t.next=6;break}return t.abrupt("return",!0);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()),v=function(){var t=Object(m.a)(f.a.mark((function t(){var e,n,r,a=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:[],n=0;case 2:if(!(n<e.length)){t.next=11;break}return r=e[n],t.next=6,b(r);case 6:if(!t.sent){t.next=8;break}return t.abrupt("return",r);case 8:n++,t.next=2;break;case 11:throw new Error("No alive http server in urls",e);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(t){var e=t?t.toString():t;if(t&&["1","56","128","3","42","97","256"].includes(e))return e;throw new Error("invalid chainId: ".concat(t))},g=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every((function(t){return!isNaN(parseFloat(t))}))},T=function(){var t=Object(m.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=h(e),!((n=Object(r.getChainProviderUrls)(e)).length>0)){t.next=8;break}return t.next=5,v(n);case 5:return t.abrupt("return",t.sent);case 8:throw new Error("Cannot find the chain provider url with chainId: ".concat(e));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=n(16),k=function(t,e){x.DeriEnv.get();var n=Object(r.getPoolConfig)(t,null,e).symbol,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BTCUSD";return"".concat(t,"?symbol=").concat(e)};return n?a("https://oracle4.deri.finance/price",n):"https://oracle4.deri.finance/price"},w=function(){var t=Object(m.a)(f.a.mark((function t(e,n){var r,a,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=k(e,n),a=3;case 2:if(!(a>0)){t.next=11;break}return t.next=5,fetch(r,{mode:"cors"});case 5:if(!(i=t.sent).ok){t.next=8;break}return t.abrupt("break",11);case 8:a-=1,t.next=2;break;case 11:if(0!==a||i){t.next=13;break}throw new Error("fetch oracle info error: exceed max retry(5).");case 13:return t.next=15,i.json();case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),O=function(){var t=Object(m.a)(f.a.mark((function t(e,n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w(e,n);case 3:return r=t.sent,r.price||"0",t.abrupt("return",p(r.price).toString());case 9:throw t.prev=9,t.t0=t.catch(0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}(),j=function(t,e,n){return t.eq(0)?o(0):e.div(t).div(n)},M=function(t,e,n,r,a){var i=n.minus(e).div(t).div(r),u=t.gt(0)?i.div(o(1).minus(a)):i.div(o(1).plus(a));return u=c(u,o(0))},A=function(t,e,n,r){var a=e;return t.gte(a)?n.minus(r).gte(0)?{success:!0}:{success:!1,error:"Pool insufficient liquidity"}:{success:!1,error:"Trader insufficient margin"}},C=function(t,e,n,r,a){if(g(t,e,n,r,a))return o(t).times(e).times(e).times(n).times(n).times(a).div(r);throw new Error("calculateFundingRate: invalid args: ".concat([t,e,n,r,a]))},I=function(t,e){var n=function(t){var e=Object(r.getAnnualBlockNumberConfig)();if(e[t])return parseInt(e[t]);throw new Error("Invalid annual block number with chainId: ".concat(t))}(t);return o(e).times(n)},P=n(120),S=n(4),B=n(5),_=n(40),E=n(28),F=n(10),R=n(9),D=n(55),q=n(53),L=function(){var t=null;return function(){if(null!==t)return t;if(void 0!==Object(q.a)(window.ethereum))return t=new i.a(window.ethereum);throw new Error("Please install MetaMask first")}}(),U=function(){var t={};return{getOrSet:function(e){return Object(m.a)(f.a.mark((function n(){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Object.keys(t).includes(e)){n.next=2;break}return n.abrupt("return",t[e]);case 2:return console.log("==== web3Factory(".concat(e,"), please caution the access limits ===")),n.next=5,T(e);case 5:return r=n.sent,t[e]=new i.a(new i.a.providers.HttpProvider(r)),n.abrupt("return",t[e]);case 8:case"end":return n.stop()}}),n)})))()}}}(),N=function(){var t={};return function(e,n,r){var a=r?"".concat(n,".useInfura"):n;return Object.keys(t).includes(a)||(t[a]=new $(e,n,r)),t[a]}}(),V=function(){var t={};return function(e,n,r){var a=r?"".concat(n,".useInfura"):n;return Object.keys(t).includes(a)||(t[a]=new tt(e,n,r)),t[a]}}(),W=function(){var t={};return function(e,n,r){var a=r?"".concat(n,".useInfura"):n;return Object.keys(t).includes(a)||(t[a]=new nt(e,n,r)),t[a]}}(),H=function(){var t={};return function(e,n,r){var a=r?"".concat(n,".useInfura"):n;return Object.keys(t).includes(a)||(t[a]=new at(e,n,r)),t[a]}}(),G=function(){var t={};return function(e,n,r){var a=r?"".concat(n,".useInfura"):n;return Object.keys(t).includes(a)||(t[a]=new ut(e,n,r)),t[a]}}(),z=832731,J=function(){function t(e,n,r){Object(S.a)(this,t),this.chainId=e,this.contractAddress=n,this.useInfura=r}return Object(B.a)(t,[{key:"_init",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.useInfura){t.next=6;break}return t.next=3,U.getOrSet(this.chainId);case 3:this.web3=t.sent,t.next=7;break;case 6:this.web3=L();case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_call",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n,r,a,i,u=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=u.length>1&&void 0!==u[1]?u[1]:[],a=2;case 2:if(!(a>0)){t.next=19;break}return t.prev=3,t.next=6,this._init();case 6:return t.next=8,(i=this.contract.methods)[e].apply(i,Object(D.a)(n)).call();case 8:return r=t.sent,t.abrupt("break",19);case 12:t.prev=12,t.t0=t.catch(3),a-=1,this.web3=null,console.log(t.t0);case 17:t.next=2;break;case 19:return 0!==a||r||console.log("method call '".concat(e," ").concat(n,"' failed with max retry 3.")),t.abrupt("return",r);case 21:case"end":return t.stop()}}),t,this,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_estimatedGas",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n,r,a,i,u,s=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:[],r=s.length>2?s[2]:void 0,t.next=4,this._init();case 4:a=0,i=0;case 6:if(!(i<2)){t.next=20;break}return t.prev=7,t.next=10,(u=this.contract.methods)[e].apply(u,Object(D.a)(n)).estimateGas({from:r});case 10:return a=t.sent,a=parseInt(1.25*a),t.abrupt("break",20);case 15:t.prev=15,t.t0=t.catch(7);case 17:i++,t.next=6;break;case 20:return(0==a||a>1e7)&&(a=z),t.abrupt("return",a);case 22:case"end":return t.stop()}}),t,this,[[7,15]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_getTransactionReceipt",value:function(t){var e=this;return function n(r,a){e.web3.eth.getTransactionReceipt(t,(function(t,e){t?a(t):null===e?setTimeout((function(){return n(r,a)}),500):!1===e.status?(e.errorMessage="Transaction failed",a(e)):r(e)}))}}},{key:"_transact",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r){var a,i,u,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._init();case 2:return t.next=4,this._estimatedGas(e,n,r);case 4:return i=t.sent,u=[{from:r,to:this.contractAddress,gas:d(i),value:d("0"),data:(a=this.contract.methods)[e].apply(a,Object(D.a)(n)).encodeABI()}],t.next=8,window.ethereum.request({method:"eth_sendTransaction",params:u});case 8:return s=t.sent,t.next=11,new Promise(this._getTransactionReceipt(s));case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),t}(),Y=[{inputs:[{internalType:"uint256[9]",name:"parameters",type:"uint256[9]"},{internalType:"address[4]",name:"addresses",type:"address[4]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"liquidator",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"collector",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ProtocolFeeCollection",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"RemoveMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"symbolId",type:"uint256"},{indexed:!1,internalType:"int256",name:"tradeVolume",type:"int256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"}],name:"Trade",type:"event"},{inputs:[{components:[{internalType:"address",name:"bTokenAddress",type:"address"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"decimals",type:"uint256"},{internalType:"int256",name:"discount",type:"int256"},{internalType:"int256",name:"price",type:"int256"},{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"cumulativePnl",type:"int256"}],internalType:"struct IPerpetualPool.BTokenInfo",name:"info",type:"tuple"}],name:"addBToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"int256",name:"multiplier",type:"int256"},{internalType:"int256",name:"feeRatio",type:"int256"},{internalType:"int256",name:"fundingRateCoefficient",type:"int256"},{internalType:"int256",name:"price",type:"int256"},{internalType:"int256",name:"cumulativeFundingRate",type:"int256"},{internalType:"int256",name:"tradersNetVolume",type:"int256"},{internalType:"int256",name:"tradersNetCost",type:"int256"}],internalType:"struct IPerpetualPool.SymbolInfo",name:"info",type:"tuple"}],name:"addSymbol",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"targetPool",type:"address"}],name:"approvePoolMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"collectProtocolFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sourcePool",type:"address"}],name:"executePoolMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAddresses",outputs:[{internalType:"address",name:"lTokenAddress",type:"address"},{internalType:"address",name:"pTokenAddress",type:"address"},{internalType:"address",name:"routerAddress",type:"address"},{internalType:"address",name:"protocolFeeCollector",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"}],name:"getBToken",outputs:[{components:[{internalType:"address",name:"bTokenAddress",type:"address"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"decimals",type:"uint256"},{internalType:"int256",name:"discount",type:"int256"},{internalType:"int256",name:"price",type:"int256"},{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"cumulativePnl",type:"int256"}],internalType:"struct IPerpetualPool.BTokenInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"}],name:"getBTokenOracle",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLengths",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getParameters",outputs:[{internalType:"uint256",name:"decimals0",type:"uint256"},{internalType:"int256",name:"minBToken0Ratio",type:"int256"},{internalType:"int256",name:"minPoolMarginRatio",type:"int256"},{internalType:"int256",name:"minInitialMarginRatio",type:"int256"},{internalType:"int256",name:"minMaintenanceMarginRatio",type:"int256"},{internalType:"int256",name:"minLiquidationReward",type:"int256"},{internalType:"int256",name:"maxLiquidationReward",type:"int256"},{internalType:"int256",name:"liquidationCutRatio",type:"int256"},{internalType:"int256",name:"protocolFeeCollectRatio",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getProtocolFeeAccrued",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"}],name:"getSymbol",outputs:[{components:[{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"int256",name:"multiplier",type:"int256"},{internalType:"int256",name:"feeRatio",type:"int256"},{internalType:"int256",name:"fundingRateCoefficient",type:"int256"},{internalType:"int256",name:"price",type:"int256"},{internalType:"int256",name:"cumulativeFundingRate",type:"int256"},{internalType:"int256",name:"tradersNetVolume",type:"int256"},{internalType:"int256",name:"tradersNetCost",type:"int256"}],internalType:"struct IPerpetualPool.SymbolInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"}],name:"getSymbolOracle",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"liquidator",type:"address"},{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"removeMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"discount",type:"uint256"}],name:"setBTokenParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"}],name:"setSymbolParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"blength",type:"uint256"},{internalType:"uint256",name:"slength",type:"uint256"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"}],K=[{inputs:[{internalType:"address",name:"lTokenAddress",type:"address"},{internalType:"address",name:"pTokenAddress",type:"address"},{internalType:"address",name:"liquidatorQualifierAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"PrepareMigration",type:"event"},{inputs:[{internalType:"address",name:"bTokenAddress",type:"address"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"discount",type:"uint256"}],name:"addBToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"addLiquidityWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"addMarginWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"multiplier",type:"uint256"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"}],name:"addSymbol",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sourceRouter",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"liquidateWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"liquidatorQualifier",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"removeLiquidityWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"removeMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"removeMarginWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"address",name:"swapperAddress",type:"address"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"discount",type:"uint256"}],name:"setBTokenParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"qualifierAddress",type:"address"}],name:"setLiquidatorQualifier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"poolAddress",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"address",name:"oracleAddress",type:"address"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"}],name:"setSymbolParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"int256",name:"tradeVolume",type:"int256"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"int256",name:"tradeVolume",type:"int256"},{components:[{internalType:"uint256",name:"symbolId",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IPerpetualPoolRouter.PriceInfo[]",name:"infos",type:"tuple[]"}],name:"tradeWithPrices",outputs:[],stateMutability:"nonpayable",type:"function"}],Q=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],X=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"numBTokens_",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"int256",name:"liquidity",type:"int256"},{indexed:!1,internalType:"int256",name:"pnl",type:"int256"},{indexed:!1,internalType:"int256",name:"lastCumulativePnl",type:"int256"}],name:"UpdateAsset",type:"event"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"}],name:"getAsset",outputs:[{components:[{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"lastCumulativePnl",type:"int256"}],internalType:"struct ILToken.Asset",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getAssets",outputs:[{components:[{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"lastCumulativePnl",type:"int256"}],internalType:"struct ILToken.Asset[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"numBTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"setNumBTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{components:[{internalType:"int256",name:"liquidity",type:"int256"},{internalType:"int256",name:"pnl",type:"int256"},{internalType:"int256",name:"lastCumulativePnl",type:"int256"}],internalType:"struct ILToken.Asset",name:"asset",type:"tuple"}],name:"updateAsset",outputs:[],stateMutability:"nonpayable",type:"function"}],Z=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"numSymbols_",type:"uint256"},{internalType:"uint256",name:"numBTokens_",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"bTokenId",type:"uint256"},{indexed:!1,internalType:"int256",name:"amount",type:"int256"}],name:"UpdateMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"symbolId",type:"uint256"},{indexed:!1,internalType:"int256",name:"volume",type:"int256"},{indexed:!1,internalType:"int256",name:"cost",type:"int256"},{indexed:!1,internalType:"int256",name:"lastCumulativeFundingRate",type:"int256"}],name:"UpdatePosition",type:"event"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"}],name:"getMargin",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getMargins",outputs:[{internalType:"int256[]",name:"",type:"int256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"symbolId",type:"uint256"}],name:"getPosition",outputs:[{components:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumulativeFundingRate",type:"int256"}],internalType:"struct IPToken.Position",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getPositions",outputs:[{components:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumulativeFundingRate",type:"int256"}],internalType:"struct IPToken.Position[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"numBTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"numSymbols",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"setNumBTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"setNumSymbols",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"bTokenId",type:"uint256"},{internalType:"int256",name:"amount",type:"int256"}],name:"updateMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"int256[]",name:"margins",type:"int256[]"}],name:"updateMargins",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"symbolId",type:"uint256"},{components:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumulativeFundingRate",type:"int256"}],internalType:"struct IPToken.Position",name:"position",type:"tuple"}],name:"updatePosition",outputs:[],stateMutability:"nonpayable",type:"function"}],$=function(t){Object(F.a)(n,t);var e=Object(R.a)(n);function n(t,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(S.a)(this,n),(a=e.call(this,t,r,i)).contractAbi=Y,a.bTokenLength=0,a.symbolLength=0,a.lTokenAddress="",a.pTokenAddress="",a.routerAddress="",a.protocolFeeCollector="",a.protocolFeeAccrued=0,a}return Object(B.a)(n,[{key:"_init",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.web3){t.next=4;break}return t.next=3,Object(_.a)(Object(E.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_update",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.getLengths(),this.getAddresses(),this.getParameters()]);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getLengths",value:function(){var t=Object(m.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call("getLengths");case 3:(e=t.sent)[0]&&e[1]&&(this.bTokenLength=parseInt(e[0]),this.symbolLength=parseInt(e[1])),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("PerpetualPool#_getLength error: ".concat(t.t0));case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}()},{key:"getAddresses",value:function(){var t=Object(m.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call("getAddresses");case 3:e=t.sent,this.lTokenAddress=e.lTokenAddress,this.pTokenAddress=e.pTokenAddress,this.routerAddress=e.routerAddress,this.protocolFeeCollector=e.protocolFeeCollector,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),new Error("PerpetualPool#_getAddress error: ".concat(t.t0));case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"getParameters",value:function(){var t=Object(m.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getParameters");case 2:return e=t.sent,t.abrupt("return",{decimals0:e.decimals0,minBToken0Ratio:p(e.minBToken0Ratio),minPoolMarginRatio:p(e.minPoolMarginRatio),minInitialMarginRatio:p(e.minInitialMarginRatio),minMaintenanceMarginRatio:p(e.minMaintenanceMarginRatio),minLiquidationReward:p(e.minLiquidationReward),maxLiquidationReward:p(e.maxLiquidationReward),liquidationCutRatio:p(e.liquidationCutRatio),protocolFeeCollectRatio:p(e.protocolFeeCollectRatio)});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getProtocolFeeAccrued",value:function(){var t=Object(m.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getProtocolFeeAccrued");case 2:e=t.sent,this.protocolFeeAccrued=p(e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getBToken",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call("getBToken",[e]);case 3:return n=t.sent,t.abrupt("return",{bTokenAddress:n.bTokenAddress,swapperAddress:n.bTokenAddress,oracleAddress:n.oracleAddress,decimals:n.decimals,discount:p(n.discount),price:p(n.price),liquidity:p(n.liquidity),pnl:p(n.pnl),cumulativePnl:p(n.cumulativePnl)});case 7:throw t.prev=7,t.t0=t.catch(0),new Error("PerpetualPool#getBToken error: ".concat(t.t0));case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getBTokenOracle",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getBTokenOracle",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getSymbol",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call("getSymbol",[e]);case 3:return n=t.sent,t.abrupt("return",{symbol:n.symbol,oracleAddress:n.oracleAddress,multiplier:p(n.multiplier),feeRatio:p(n.feeRatio),fundingRateCoefficient:p(n.fundingRateCoefficient),price:p(n.price),cumulativeFundingRate:p(n.cumulativeFundingRate),tradersNetVolume:p(n.tradersNetVolume),tradersNetCost:p(n.tradersNetCost)});case 7:throw t.prev=7,t.t0=t.catch(0),new Error("PerpetualPool#getSymbol error: ".concat(t.t0));case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getSymbolOracle",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getSymbolOracle",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getTimeStamp",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._init();case 2:return t.next=4,this.web3.eth.getBlock(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_calculateFee",value:function(t,e,n,r){return o(t).abs().times(e).times(n).times(r).toString()}},{key:"_getBlockInfo",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._init();case 2:return t.next=4,this.web3.eth.getBlock(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getPastEvents",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n,r,a,i,u,s,o,c,p,l=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=l.length>2&&void 0!==l[2]?l[2]:0,a=l.length>3&&void 0!==l[3]?l[3]:0,t.next=5,this._init();case 5:i=[],u=["56","97"].includes(this.chainId)?999:4999,r+u>a&&(u=a-r);case 8:if(!(r<=a)){t.next=18;break}return t.next=11,this.contract.getPastEvents(e,{filter:n,fromBlock:r,toBlock:r+u});case 11:s=t.sent,o=Object(P.a)(s);try{for(o.s();!(c=o.n()).done;)p=c.value,i.push(p)}catch(d){o.e(d)}finally{o.f()}(r+=u+1)+u>a&&(u=a-r),t.next=8;break;case 18:return t.abrupt("return",i);case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(J),tt=function(t){Object(F.a)(n,t);var e=Object(R.a)(n);function n(t,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(S.a)(this,n),(a=e.call(this,t,r,i)).contractAbi=K,a.poolAddress="",a}return Object(B.a)(n,[{key:"_init",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.web3){t.next=4;break}return t.next=3,Object(_.a)(Object(E.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"pool",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("pool");case 2:return this.poolAddress=t.sent,t.abrupt("return",this.poolAddress);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"addLiquidity",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolAddress){t.next=3;break}return t.next=3,this.pool();case 3:return t.next=5,this._transact("addLiquidity",[n,l(r)],e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transact("removeLiquidity",[n,l(r)],e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"addMargin",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolAddress){t.next=3;break}return t.next=3,this.pool();case 3:return t.next=5,this._transact("addMargin",[n,l(r)],e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"removeMargin",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolAddress){t.next=3;break}return t.next=3,this.pool();case 3:return t.next=5,this._transact("removeMargin",[n,l(r)],e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"trade",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolAddress){t.next=3;break}return t.next=3,this.pool();case 3:return t.next=5,this._transact("trade",[n,l(r)],e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"addLiquidityWithPrices",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolAddress){t.next=3;break}return t.next=3,this.pool();case 3:return t.next=5,this._transact("addLiquidityWithPrices",[n,l(r),a],e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"removeLiquidityWithPrices",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transact("removeLiquidityWithPrices",[n,l(r),a],e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"addMarginWithPrices",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolAddress){t.next=3;break}return t.next=3,this.pool();case 3:return t.next=5,this._transact("addMarginWithPrices",[n,l(r),a],e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"removeMarginWithPrices",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolAddress){t.next=3;break}return t.next=3,this.pool();case 3:return t.next=5,this._transact("removeMarginWithPrices",[n,l(r),a],e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"tradeWithPrices",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolAddress){t.next=3;break}return t.next=3,this.pool();case 3:return t.next=5,this._transact("tradeWithPrices",[n,l(r),a],e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()}]),n}(J),et=n(12),nt=function(t){Object(F.a)(n,t);var e=Object(R.a)(n);function n(t,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(S.a)(this,n),(a=e.call(this,t,r,i)).contractAbi=Q,a}return Object(B.a)(n,[{key:"_init",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.web3){t.next=4;break}return t.next=3,Object(_.a)(Object(E.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"symbol",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("symbol");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"decimals",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("decimals");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_balanceOf",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("balanceOf",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n,r,a,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this._balanceOf(e),this.decimals()]);case 2:return n=t.sent,r=Object(et.a)(n,2),a=r[0],i=r[1],t.abrupt("return",o(a,-i));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"totalSupply",value:function(){var t=Object(m.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("totalSupply");case 2:return e=t.sent,t.abrupt("return",p(e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isUnlocked",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("allowance",[e,n]);case 2:return r=t.sent,t.abrupt("return",o(r).gt(0));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"unlock",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transact("approve",[n,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"],e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),n}(J),rt=function(t){return{liquidity:p(t[0]),pnl:p(t[1]),lastCumulativePnl:p(t[2])}},at=function(t){Object(F.a)(n,t);var e=Object(R.a)(n);function n(t,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(S.a)(this,n),(a=e.call(this,t,r,i)).contractAbi=X,a}return Object(B.a)(n,[{key:"_init",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.web3){t.next=4;break}return t.next=3,Object(_.a)(Object(E.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("balanceOf",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"pool",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("pool");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"exists",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("exists",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAsset",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getAsset",[e,n]);case 2:if(r=t.sent,!Array.isArray(r)){t.next=7;break}return t.abrupt("return",rt(r));case 7:throw new Error("LToken#getAsset: invalid result with (".concat(e," ").concat(n,")"));case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getAssets",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getAssets",[e]);case 2:if(n=t.sent,!Array.isArray(n)){t.next=7;break}return t.abrupt("return",n.map((function(t){return rt(t)})));case 7:throw new Error("LToken#getAsset: invalid result with (".concat(e,")"));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(J),it=function(t){return{volume:p(t.volume),cost:p(t.cost),lastCumulativeFundingRate:p(t.lastCumulativeFundingRate)}},ut=function(t){Object(F.a)(n,t);var e=Object(R.a)(n);function n(t,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(S.a)(this,n),(a=e.call(this,t,r,i)).contractAbi=Z,a}return Object(B.a)(n,[{key:"_init",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.web3){t.next=4;break}return t.next=3,Object(_.a)(Object(E.a)(n.prototype),"_init",this).call(this);case 3:this.contract=new this.web3.eth.Contract(this.contractAbi,this.contractAddress);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"pool",value:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("pool");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("balanceOf",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"exists",value:function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("exists",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getMargin",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getMargin",[e,n]);case 2:return r=t.sent,t.abrupt("return",p(r));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getMargins",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getMargins",[e]);case 2:if(n=t.sent,!Array.isArray(n)){t.next=5;break}return t.abrupt("return",n.map((function(t){return p(t)})));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getPosition",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getPosition",[e,n]);case 2:if(r=t.sent,!Array.isArray(r)){t.next=7;break}return t.abrupt("return",it(r));case 7:throw new Error("PToken#getMargin: invalid result with (".concat(e,")"));case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getPositions",value:function(){var t=Object(m.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getPositions",[e]);case 2:if(n=t.sent,!Array.isArray(n)){t.next=5;break}return t.abrupt("return",n.map((function(t){return it(t)})));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(J),st=n(7),ot=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c,p,l,d,y,m,b,v;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=Object(r.getPoolConfig)(n,i),o=s.lToken,c=N(e,n,u),p=H(e,o,u),t.next=6,Promise.all([c.getBToken(i),p.getAsset(a,i)]);case 6:return l=t.sent,d=Object(et.a)(l,2),y=d[0],m=d[1],b=y.liquidity,v=m.liquidity,t.abrupt("return",{poolLiquidity:b.toString(),shares:v.toString(),maxRemovableShares:v.toString()});case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:return t.abrupt("return",{poolLiquidity:"",hares:"",maxRemovableShares:""});case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),ct=function(){var t=Object(m.a)(f.a.mark((function t(e,n,r){var a,i,u,s,o=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.length>3&&void 0!==o[3]&&o[3],a=Object(st.e)(),t.prev=2,t.next=5,a.getValues(["".concat(e,".").concat(n,".").concat(r,".liquidity")]).catch((function(t){return console.log("getPoolLiquidity",t)}));case 5:if(!(i=t.sent)){t.next=9;break}return u=Object(et.a)(i,1),s=u[0],t.abrupt("return",{liquidity:p(s).toString(),symbol:""});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0);case 14:return t.abrupt("return",{liquidity:"",symbol:""});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,n,r){return t.apply(this,arguments)}}(),pt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c,p,l,d,y,b,v;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(r.getPoolConfig)(n,u),o=s.router,c=Object(r.getFilteredPoolConfigList)(n,"0").map((function(t){return t.symbolId})),p=V(e,o),t.prev=3,d=c.map(function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=7,Promise.all(d);case 7:return y=t.sent,b=y.map((function(t,e){return[c[e],t.timestamp,t.price,parseInt(t.v).toString(),t.r,t.s]})),t.next=11,p.addLiquidityWithPrices(a,u,i,b);case 11:v=t.sent,l={success:!0,transaction:v},t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),l={success:!1,error:t.t0};case 18:return t.abrupt("return",l);case 19:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),lt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c,p,l,d,y,b,v;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(r.getPoolConfig)(n,u),o=s.router,c=Object(r.getFilteredPoolConfigList)(n,"0").map((function(t){return t.symbolId})),p=V(e,o),t.prev=3,d=c.map(function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=7,Promise.all(d);case 7:return y=t.sent,b=y.map((function(t,e){return[c[e],t.timestamp,t.price,parseInt(t.v).toString(),t.r,t.s]})),t.next=11,p.removeLiquidityWithPrices(a,u,i,b);case 11:v=t.sent,l={success:!0,transaction:v},t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),l={success:!1,error:t.t0};case 18:return t.abrupt("return",l);case 19:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),dt=function(){var t={};return{get:function(e,n){var r="".concat(e,".").concat(n);if(Object.keys(t).includes(r)){var a=t[r].split("|"),i=Object(et.a)(a,2),u=i[0];i[1];return u}console.log("please init priceCache first")},update:function(t,e,n){},set:function(e,n,r){if(!isNaN(parseFloat(r))){var a=Date.now().toString();t["".concat(e,".").concat(n)]="".concat(r,"|").concat(a)}}}}(),yt=function(){var t={};return{get:function(e,n,r){var a="".concat(e,".").concat(n,".").concat(r);if(Object.keys(t).includes(a))return t[a];console.log("fundingRateCache: key is not in exist: ".concat(a))},set:function(e,n,r,a){var i="".concat(e,".").concat(n,".").concat(r);t[i]=a}}}(),ft=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c,p,l,d,y,m,b,v,h,g,T,x,k,w,O,j;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=Object(r.getPoolConfig)(n,a,i),o=s.symbol,c=s.bTokenSymbol,p=N(e,n,u),t.next=5,Promise.all([p.getSymbol(i),p.getParameters()]);case 5:return l=t.sent,d=Object(et.a)(l,2),y=d[0],m=d[1],b=y.multiplier,v=y.feeRatio,h=y.fundingRateCoefficient,g=m.minPoolMarginRatio,T=m.minInitialMarginRatio,x=m.minMaintenanceMarginRatio,k=m.minLiquidationReward,w=m.maxLiquidationReward,O=m.liquidationCutRatio,j=m.protocolFeeCollectRatio,t.abrupt("return",{symbol:o,bSymbol:c,multiplier:b.toString(),feeRatio:v.toString(),fundingRateCoefficient:h.toString(),minPoolMarginRatio:g.toString(),minInitialMarginRatio:T.toString(),minMaintenanceMarginRatio:x.toString(),minLiquidationReward:k.toString(),maxLiquidationReward:w.toString(),liquidationCutRatio:O.toString(),protocolFeeCollectRatio:j.toString()});case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:return t.abrupt("return",{symbol:"",bSymbol:"",multiplier:"",feeRatio:"",fundingRateCoefficient:"",minPoolMarginRatio:"",minInitialMarginRatio:"",minMaintenanceMarginRatio:"",minLiquidationReward:"",maxLiquidationReward:"",liquidationCutRatio:"",protocolFeeCollectRatio:""});case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),mt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,c,p,l,d,y,m,b,v,h,g,T,x,k,w,A,C,I,P,S,B,_,E,F,R,D,q,L,U,V,W,H;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=Object(r.getFilteredPoolConfigList)(n,null,i),c=Object(r.getFilteredPoolConfigList)(n,"0"),p=s.map((function(t){return t.bTokenId})),l=c.map((function(t){return t.symbolId})),d=N(e,n,u),y=Object(r.getPoolConfig)(n,null,i),m=y.pToken,b=G(e,m,u),t.next=10,Promise.all([O(n,i),d.getSymbol(i),d.getParameters(),b.getPosition(a,i),b.getMargins(a),b.getPositions(a)]);case 10:for(v=t.sent,h=Object(et.a)(v,6),g=h[0],T=h[1],x=h[2],k=h[3],w=h[4],A=h[5],dt.set(n,i,g),C=k.volume,I=k.cost,P=T.multiplier,S=T.price,B=x.minInitialMarginRatio,_=x.minMaintenanceMarginRatio,E=[],F=0;F<p.length;F++)E.push(d.getBToken(p[F]));return t.next=26,Promise.all(E);case 26:for(R=t.sent,D=R.reduce((function(t,e,n){return t.plus(o(e.price).times(e.discount).times(w[n]))}),o(0)),E=[],q=0;q<l.length;q++)E.push(d.getSymbol(l[q]));return t.next=32,Promise.all(E);case 32:return L=t.sent,U=L.reduce((function(t,e,n){return t.plus(o(e.price).times(e.multiplier).times(A[n].volume).times(B).abs())}),o(0)),V=o(C).abs().times(P).times(S).times(B),W=L.reduce((function(t,e,n){return t.plus(o(e.price).times(e.multiplier).times(A[n].volume).minus(A[n].cost))}),o(0)),H=A.reduce((function(t,e){return t.plus(o(e.cost))}),o(0)),t.abrupt("return",{volume:C.toString(),averageEntryPrice:j(C,I,P).toString(),margin:D.toString(),marginHeld:U.toString(),marginHeldBySymbol:V.toString(),unrealizedPnl:W.toString(),liquidationPrice:M(C,D,H,P,_).toString()});case 40:t.prev=40,t.t0=t.catch(0),console.log(t.t0);case 43:return t.abrupt("return",{volume:"",averageEntryPrice:"",margin:"",marginHeld:"",unrealizedPnl:"",liquidationPrice:""});case 44:case"end":return t.stop()}}),t,null,[[0,40]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),bt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(r.getPoolConfig)(n,i),o=s.bToken,t.next=3,W(e,o,u).balanceOf(a);case 3:return c=t.sent,t.abrupt("return",c.toString());case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),vt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(r.getPoolConfig)(n,i),o=s.bToken,t.next=3,W(e,o,u);case 3:return c=t.sent,t.abrupt("return",c.isUnlocked(a,n));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),ht=function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a,i){var u,s,c,p,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=dt.get(n,a)){t.next=6;break}return t.next=4,O(n,a);case 4:u=t.sent,dt.set(n,a,u);case 6:if((s=yt.get(e,n,a))&&s.multiplier){t.next=11;break}return t.next=10,xt(e,n,a,i);case 10:s=yt.get(e,n,a);case 11:return p=(c=s).multiplier,l=c.feeRatio,t.abrupt("return",o(r).abs().times(u).times(p).times(l).toString());case 13:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),gt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a,i,u,s){var c,p,l,d,y,m;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=N(e,n,s),t.next=3,Promise.all([O(n,u),c.getSymbol(u)]);case 3:return p=t.sent,l=Object(et.a)(p,2),d=l[0],y=l[1],dt.set(n,u,d),m=y.multiplier,t.abrupt("return",o(a).abs().times(d).times(m).div(o(i)).toString());case 10:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i,u,s){return t.apply(this,arguments)}}(),Tt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",yt.get(e,n,r));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),xt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i){var u,s,c,p,l,d,y,m,b,v,h,g,T,x,k,w,j,M,A,P,S,B,_,E,F,R,D;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(u=N(e,n,i),s=Object(r.getFilteredPoolConfigList)(n,null,a),c=s.map((function(t){return t.bTokenId})),p=[],l=0;l<c.length;l++)p.push(u.getBToken(l));return t.next=7,Promise.all(p);case 7:return d=t.sent,y=d.reduce((function(t,e){return t.plus(o(e.liquidity).times(e.discount).times(e.price))}),o(0)),m=d.reduce((function(t,e){return t.plus(e.pnl)}),o(0)),t.next=12,Promise.all([O(n,a),u.getSymbol(a),u.getParameters()]);case 12:for(b=t.sent,v=Object(et.a)(b,3),h=v[0],g=v[1],T=v[2],dt.set(n,a,h),x=g.multiplier,k=g.fundingRateCoefficient,w=g.tradersNetVolume,j=g.feeRatio,M=T.minPoolMarginRatio,A=C.apply(void 0,[w,h,x,y,k]),P=I(e,A),S=Object(r.getFilteredPoolConfigList)(n,"0"),B=S.map((function(t){return t.symbolId})),_=[],E=0;E<B.length;E++)_.push(u.getSymbol(B[E]));return t.next=29,Promise.all(_);case 29:return F=t.sent,R=F.reduce((function(t,e){return t.plus(o(e.tradersNetVolume).times(e.price).times(e.multiplier).times(M))}),o(0)),D={price:h,multiplier:x.toString(),feeRatio:j.toString(),tradersNetVolume:w.toString(),liquidity:y.toString(),pnl:m.toString(),fundingRateCoefficient:k.toString(),minPoolMarginRatio:M.toString(),fundingRatePerBlock:A,fundingRate:P,liquidityUsed:R.div(y.plus(m)).abs()},yt.set(e,n,a,D),t.abrupt("return",D);case 34:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),kt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a){var i,u,s,o,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,xt(e,n,r,a);case 3:return i=t.sent,u=i.fundingRate,s=i.fundingRatePerBlock,o=i.liquidity,c=i.tradersNetVolume,t.abrupt("return",{fundingRate0:u.times(100).toString(),fundingRatePerBlock:s.toString(),liquidity:o.toString(),volume:"-",tradersNetVolume:c.toString()});case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:return t.abrupt("return",{fundingRate0:"",fundingRatePerBlock:"",liquidity:"",volume:"",tradersNetVolume:""});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),wt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a,i){var u,s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(u=yt.get(e,n,a))||(u=xt(e,n,a,i)),s=[o(u.tradersNetVolume).plus(r).toString(),u.price,u.multiplier,u.liquidity,u.fundingRateCoefficient],c=C.apply(void 0,s),c=I(e,c),t.abrupt("return",{fundingRate1:c.times(100).toString()});case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:return t.abrupt("return",{fundingRate1:""});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),Ot=function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a){var i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(i=yt.get(e,n,r))||(i=xt(e,n,r,a)),t.abrupt("return",{liquidityUsed0:i.liquidityUsed.times(100).toString()});case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:return t.abrupt("return",{liquidityUsed0:""});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),jt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,c,p,l,d,y,m,b,v;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,(s=yt.get(e,n,i))||(s=xt(e,n,i,u)),c=N(e,n,u),p=Object(r.getFilteredPoolConfigList)(n,"0"),l=p.map((function(t){return t.symbolId})),d=[],y=0;y<l.length;y++)d.push(c.getSymbol(l[y]));return t.next=10,Promise.all(d);case 10:return m=t.sent,b=(b=m.reduce((function(t,e,n){return n===parseInt(i)?t.plus(o(e.price).times(e.multiplier).times(e.tradersNetVolume.plus(a)).abs()):t.plus(o(e.price).times(e.multiplier).times(e.tradersNetVolume).abs())}),o(0))).times(s.minPoolMarginRatio),v=b.div(o(s.liquidity).plus(s.pnl)),t.abrupt("return",{liquidityUsed1:v.times(100).toString()});case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:return t.abrupt("return",{liquidityUsed1:""});case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),Mt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,p,l,d,y,m,b,v,h,g,T,x,k,w,O,j,M,A,C,I,P,S,B,_,E,F,R;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,s=Object(r.getFilteredPoolConfigList)(n,null,i),p=Object(r.getFilteredPoolConfigList)(n,"0"),l=N(e,n,u),d=Object(r.getPoolConfig)(n,null,i),y=d.pToken,m=G(e,y,u),b=s.map((function(t){return{bTokenId:t.bTokenId,bTokenSymbol:t.bTokenSymbol,bTokenAddress:t.bToken}})),v=[],h=0;h<b.length;h++)v.push(W(e,b[h].bTokenAddress,u).balanceOf(a));return t.next=11,Promise.all(v);case 11:for(g=t.sent,T=0;T<b.length;T++)b[T].walletBalance=g[T].toString();return x=s.map((function(t){return t.bTokenId})),k=p.map((function(t){return t.symbolId})),t.next=17,Promise.all([m.getMargins(a),m.getPositions(a),l.getParameters()]);case 17:for(w=t.sent,O=Object(et.a)(w,3),j=O[0],M=O[1],A=O[2],C=A.minInitialMarginRatio,I=[],P=0;P<x.length;P++)I.push(l.getBToken(x[P]));return t.next=27,Promise.all(I);case 27:for(S=t.sent,B=S.reduce((function(t,e,n){return t.plus(o(e.price).times(e.discount).times(j[n]))}),o(0)),I=[],_=0;_<k.length;_++)I.push(l.getSymbol(k[_]));return t.next=33,Promise.all(I);case 33:return E=t.sent,F=E.reduce((function(t,e,n){return t.plus(o(e.price).times(e.multiplier).times(M[n].volume).abs().times(C))}),o(0)),R=E.reduce((function(t,e,n){return t.plus(o(e.price).times(e.multiplier).times(M[n].volume).minus(M[n].cost))}),o(0)),b=b.map((function(t,e){var n,r;return isNaN(parseFloat(S[e].price))&&"0"===S[e].price?t.availableBalance="-":t.availableBalance=c((n=B.minus(F).plus(R).div(S[e].price).div(S[e].discount),r=j[e],n.lte(r)?n:r),o(0)).toString(),t})),t.abrupt("return",b);case 40:t.prev=40,t.t0=t.catch(0),console.log(t.t0);case 43:return t.abrupt("return",[]);case 44:case"end":return t.stop()}}),t,null,[[0,40]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),At=function(){var t=Object(m.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ct=function(){var t=Object(m.a)(f.a.mark((function t(e,n,r,a,i,u){var s,o,c,l,d,y,m,b,v,h;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=p(n.tradeVolume),t.next=3,e._getTimeStamp(r);case 3:return o=t.sent,c=s.gt(0)?"LONG":"SHORT",l=p(n.price),d="".concat(+o.timestamp,"000"),y=n.symbolId,m=e._calculateFee(s,l,i[parseInt(y)],u[parseInt(y)]),b=s.abs().times(l).times(i[parseInt(y)]),v=s.abs(),h={direction:c,symbolId:y,price:l.toString(),notional:b.toString(),volume:v.toString(),transactionFee:m.toString(),transactionHash:a.toString(),time:d},t.abrupt("return",h);case 13:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i,u){return t.apply(this,arguments)}}(),It=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c,p,l,d,y,m,b,v,h,g,T,x,k;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(r.getFilteredPoolConfigList)(n,"0"),o=s.map((function(t){return t.symbolId})),c=N(e,n),t.next=5,c._getBlockInfo("latest");case 5:for(p=t.sent,u=parseInt(u),l=[],d=0;d<o.length;d++)l.push(c.getSymbol(o[d]));return t.next=11,Promise.all(l);case 11:return y=t.sent,m=y.map((function(t){return t.multiplier.toString()})),b=y.map((function(t){return t.feeRatio.toString()})),v={owner:a},t.next=17,c._getPastEvents("Trade",v,u,p.number);case 17:h=t.sent,g=[],h=h.filter((function(t){return t.returnValues.symbolId===i})),T=0;case 21:if(!(T<h.length)){t.next=30;break}return x=h[T],t.next=25,Ct(c,x.returnValues,x.blockNumber,x.transactionHash,m,b);case 25:k=t.sent,g.unshift(k);case 27:T++,t.next=21;break;case 30:return t.abrupt("return",g);case 31:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),Pt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i){var u,s,o,c,l,d,y,m,b,v,h,g,T;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=[],t.next=4,At("".concat(Object(x.getRestServerConfig)(x.DeriEnv.get()),"/trade_history/").concat(e,"/").concat(n,"/").concat(a,"/").concat(i));case 4:if((o=t.sent)&&o.success&&(u=parseInt(o.data.tradeHistoryBlock),o.data.tradeHistory&&Array.isArray(o.data.tradeHistory)&&(s=o.data.tradeHistory)),s.length>0&&(s=s.filter((function(t){return t})).map((function(t){return{direction:t.direction.trim(),symbolId:t.symbolId,price:p(t.price).toString(),notional:p(t.notional).toString(),volume:p(t.volume).toString(),transactionFee:p(t.transactionFee).toString(),transactionHash:t.transactionHash,time:t.time.toString()}}))),0===u){t.next=17;break}return t.next=10,Promise.all([It(e,n,a,i,u+1)]);case 10:return c=t.sent,l=Object(et.a)(c,1),d=l[0],y=d.concat(s),t.abrupt("return",y.sort((function(t,e){return parseInt(e.time)-parseInt(t.time)})));case 17:return m=Object(r.getPoolConfig)(n,null,i),b=m.initialBlock,u=parseInt(b),t.next=21,Promise.all([It(e,n,a,i,u+1)]);case 21:return v=t.sent,h=Object(et.a)(v,1),g=h[0],T=g,t.abrupt("return",T.sort((function(t,e){return parseInt(e.time)-parseInt(t.time)})));case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(0),console.log(t.t0);case 31:return t.abrupt("return",[]);case 32:case"end":return t.stop()}}),t,null,[[0,28]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),St=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i){var u,s,o,c,p;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(r.getPoolConfig)(n,i),s=u.bToken,o=W(e,s),t.prev=2,t.next=5,o.unlock(a,n);case 5:p=t.sent,c={success:!0,transaction:p},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),c={success:!1,error:t.t0};case 12:return t.abrupt("return",c);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),Bt=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c,p,l,d,y,b,v;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(r.getPoolConfig)(n,u),o=s.router,c=Object(r.getFilteredPoolConfigList)(n,"0").map((function(t){return t.symbolId})),p=V(e,o),t.prev=3,d=c.map(function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=7,Promise.all(d);case 7:return y=t.sent,b=y.map((function(t,e){return[c[e],t.timestamp,t.price,parseInt(t.v).toString(),t.r,t.s]})),t.next=11,p.addMarginWithPrices(a,u,i,b);case 11:v=t.sent,l={success:!0,transaction:v},t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),l={success:!1,error:t.t0};case 18:return t.abrupt("return",l);case 19:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),_t=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u){var s,o,c,p,l,d,y,b,v;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(r.getPoolConfig)(n,u),o=s.router,c=Object(r.getFilteredPoolConfigList)(n,"0").map((function(t){return t.symbolId})),p=V(e,o),t.prev=3,d=c.map(function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=7,Promise.all(d);case 7:return y=t.sent,b=y.map((function(t,e){return[c[e],t.timestamp,t.price,parseInt(t.v).toString(),t.r,t.s]})),t.next=11,p.removeMarginWithPrices(a,u,i,b);case 11:v=t.sent,l={success:!0,transaction:v},t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),l={success:!1,error:t.t0};case 18:return t.abrupt("return",l);case 19:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),Et=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i,u,s){var c,p,l,d,y,b,v,h,g,T,x,k,j,M,C,I,P,S,B,_,E,F,R,D,q,L,U,W,H,z,J,Y,K,Q,X;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(r.getPoolConfig)(n),p=c.router,l=Object(r.getFilteredPoolConfigList)(n,"0").map((function(t){return t.symbolId})),d=V(e,p),y=N(e,n,s),b=Object(r.getPoolConfig)(n,null,u),v=b.pToken,h=G(e,v,s),t.next=8,Promise.all([O(n,u),y.getSymbol(u),y.getParameters(),h.getPositions(a)]);case 8:return g=t.sent,T=Object(et.a)(g,4),T[0],x=T[1],k=T[2],j=T[3],x.multiplier,M=k.minInitialMarginRatio,C=k.minPoolMarginRatio,I=Object(r.getFilteredPoolConfigList)(n,null,u),P=I.map((function(t){return t.bTokenId})),t.next=20,h.getMargins(a);case 20:for(S=t.sent,B=[],_=0;_<P.length;_++)B.push(y.getBToken(P[_]));return t.next=25,Promise.all(B);case 25:for(E=t.sent,F=E.reduce((function(t,e,n){return t.plus(o(e.price).times(e.discount).times(S[n]))}),o(0)),R=E.reduce((function(t,e){return t.plus(o(e.liquidity).times(e.price).times(e.discount))}),o(0)),D=Object(r.getFilteredPoolConfigList)(n,"0"),q=D.map((function(t){return t.symbolId})),B=[],L=0;L<q.length;L++)B.push(y.getSymbol(q[L]));return t.next=34,Promise.all(B);case 34:if(U=t.sent,W=(W=U.reduce((function(t,e,n){return n===parseInt(u)?t.plus(o(e.price).times(e.multiplier).times(j[n].volume.plus(i)).abs()):t.plus(o(e.price).times(e.multiplier).times(j[n].volume).abs())}),o(0))).times(M),H=(H=U.reduce((function(t,e,n){return n===parseInt(u)?t.plus(o(e.tradersNetVolume.plus(i)).times(e.price).times(e.multiplier).abs()):t.plus(o(e.tradersNetVolume).times(e.price).times(e.multiplier).abs())}),o(0))).times(C),z=E.reduce((function(t,e){return t.plus(e.pnl)}),o(0)),console.log("pnl",z.toString()),!(J=A(F,W,R.plus(z),H)).success){t.next=60;break}return t.prev=43,B=l.map(function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=47,Promise.all(B);case 47:return K=t.sent,Q=K.map((function(t,e){return[l[e],t.timestamp,t.price,parseInt(t.v).toString(),t.r,t.s]})),t.next=51,d.tradeWithPrices(a,u,i,Q);case 51:X=t.sent,Y={success:!0,transaction:X},t.next=58;break;case 55:t.prev=55,t.t0=t.catch(43),Y={success:!1,error:t.t0};case 58:t.next=61;break;case 60:Y={success:!1,error:J.error};case 61:return t.abrupt("return",Y);case 62:case"end":return t.stop()}}),t,null,[[43,55]])})));return function(e,n,r,a,i,u){return t.apply(this,arguments)}}(),Ft=function(){var t=Object(m.a)(f.a.mark((function t(e,n,a,i){var u,s,o,c,p,l,d,y,b,v,h,g,T,x;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(r.getPoolConfig)(n),s=u.router,o=u.pToken,c=Object(r.getFilteredPoolConfigList)(n,"0").map((function(t){return t.symbolId})),p=V(e,s),l=G(e,o),t.next=6,l.getPosition(a,i);case 6:if(d=t.sent,y=d.volume,b=y.negated(),y.eq(0)){t.next=28;break}return t.prev=10,h=c.map(function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=14,Promise.all(h);case 14:return g=t.sent,T=g.map((function(t,e){return[c[e],t.timestamp,t.price,parseInt(t.v).toString(),t.r,t.s]})),t.next=18,p.tradeWithPrices(a,i,b,T);case 18:x=t.sent,v={success:!0,transaction:x},t.next=25;break;case 22:t.prev=22,t.t0=t.catch(10),v={success:!1,error:t.t0};case 25:return t.abrupt("return",v);case 28:v={success:!1,error:"no position to close"};case 29:return t.abrupt("return",v);case 30:case"end":return t.stop()}}),t,null,[[10,22]])})));return function(e,n,r,a){return t.apply(this,arguments)}}()},267:function(t,e){},268:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d}));var r=n(0),a=n.n(r),i=n(53),u=n(1),s=n(17),o=n.n(s),c=n(105),p=n(2),l=function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,u,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===Object(i.a)(window.ethereum)){t.next=13;break}return t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return r=t.sent,t.t0=parseInt,t.next=7,window.ethereum.request({method:"net_version"});case 7:return t.t1=t.sent,u=(0,t.t0)(t.t1),s=Array.isArray(r)&&r[0],window.ethereum.on("accountsChanged",(function(t){var e;e=t.length>0?t[0]:"","function"===typeof n?n(e):window.location.reload()})),window.ethereum.on("chainChanged",(function(t){var n=Object(p.w)(t);"function"===typeof e?e(n):window.location.reload()})),t.abrupt("return",{success:!0,account:s,chainId:u});case 13:return t.abrupt("return",{success:!1,error:"Cannot connect wallet, please install MetaMask."});case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(c.a)(),t.next=3,r.eth.getBalance(n);case 3:return i=t.sent,u=o.a.utils.fromWei(i),t.abrupt("return",u);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},269:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"e",(function(){return y})),n.d(e,"d",(function(){return f})),n.d(e,"f",(function(){return m})),n.d(e,"c",(function(){return b}));var r=n(0),a=n.n(r),i=n(1),u=n(67),s=n(68),o=n(69),c=n(42),p=n(2),l=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(p.p)(e,n),"slp"!==(c=i.type)){t.next=7;break}return t.next=4,Object(u.b)(e,n,r);case 4:return t.abrupt("return",t.sent);case 7:if("clp"!==c){t.next=13;break}return t.next=10,Object(o.b)(e,n,r);case 10:return t.abrupt("return",t.sent);case 13:if("clp2"!==c){t.next=19;break}return t.next=16,Object(s.b)(e,n,r);case 16:return t.abrupt("return",t.sent);case 19:console.log("getLpLiquidityInfo(): invalid lp type ".concat(c));case 20:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),d=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r,i){var u,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=Object(p.p)(e,n),"slp"!==(s=u.type)){t.next=7;break}return t.next=4,Object(c.d)(e,n,r,i);case 4:return t.abrupt("return",t.sent);case 7:if("clp"!==s){t.next=13;break}return t.next=10,Object(c.b)(e,n,r,i);case 10:return t.abrupt("return",t.sent);case 13:if("clp2"!==s){t.next=19;break}return t.next=16,Object(c.a)(e,n,r,i);case 16:return t.abrupt("return",t.sent);case 19:console.log("addLpLiquidity(): invalid lp type ".concat(s));case 20:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),y=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r,i){var u,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=Object(p.p)(e,n),"slp"!==(s=u.type)){t.next=7;break}return t.next=4,Object(c.j)(e,n,r,i);case 4:return t.abrupt("return",t.sent);case 7:if("clp"!==s){t.next=13;break}return t.next=10,Object(c.h)(e,n,r,i);case 10:return t.abrupt("return",t.sent);case 13:if("clp2"!==s){t.next=19;break}return t.next=16,Object(c.g)(e,n,r,i);case 16:return t.abrupt("return",t.sent);case 19:console.log("removeLpLiquidity(): invalid lp type ".concat(s));case 20:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),f=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(p.p)(e,n),"slp"!==(c=i.type)){t.next=7;break}return t.next=4,Object(u.d)(e,n,r);case 4:return t.abrupt("return",t.sent);case 7:if("clp"!==c){t.next=13;break}return t.next=10,Object(o.d)(e,n,r);case 10:return t.abrupt("return",t.sent);case 13:if("clp2"!==c){t.next=19;break}return t.next=16,Object(s.d)(e,n,r);case 16:return t.abrupt("return",t.sent);case 19:console.log("isLpLiquidity(): invalid lp type ".concat(c));case 20:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),m=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(p.p)(e,n),"slp"!==(c=i.type)){t.next=7;break}return t.next=4,Object(u.f)(e,n,r);case 4:return t.abrupt("return",t.sent);case 7:if("clp"!==c){t.next=13;break}return t.next=10,Object(o.f)(e,n,r);case 10:return t.abrupt("return",t.sent);case 13:if("clp2"!==c){t.next=19;break}return t.next=16,Object(s.f)(e,n,r);case 16:return t.abrupt("return",t.sent);case 19:console.log("unlockLp(): invalid lp type ".concat(c));case 20:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),b=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(p.p)(e,n),"slp"!==(c=i.type)){t.next=7;break}return t.next=4,Object(u.c)(e,n,r);case 4:return t.abrupt("return",t.sent);case 7:if("clp"!==c){t.next=13;break}return t.next=10,Object(o.c)(e,n,r);case 10:return t.abrupt("return",t.sent);case 13:if("clp2"!==c){t.next=19;break}return t.next=16,Object(s.c)(e,n,r);case 16:return t.abrupt("return",t.sent);case 19:console.log("getLpWalletBalance(): invalid lp type ".concat(c));case 20:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},270:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(4),a=n(5),i=n(8),u=n(39),s=function(){function t(){Object(r.a)(this,t),this.all=[],Object(i.o)(this,{all:i.p,setAll:i.f})}return Object(a.a)(t,[{key:"load",value:function(t){var e=t&&t.current,n=Object(u.getContractAddressConfig)(u.DeriEnv.get(),e);return t&&(n=n.filter((function(e){return e.version===t.current})),t.isV2&&(n=n.reduce((function(t,e){return-1===t.findIndex((function(t){return t.symbolId===e.symbolId}))&&t.push(e),t}),[]))),this.setAll(n),n}},{key:"setAll",value:function(t){this.all=t}}]),t}()},272:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"i",(function(){return d})),n.d(e,"k",(function(){return y})),n.d(e,"a",(function(){return m})),n.d(e,"q",(function(){return b})),n.d(e,"m",(function(){return h})),n.d(e,"l",(function(){return g})),n.d(e,"o",(function(){return T})),n.d(e,"p",(function(){return x})),n.d(e,"e",(function(){return k})),n.d(e,"h",(function(){return w})),n.d(e,"f",(function(){return O})),n.d(e,"j",(function(){return j})),n.d(e,"g",(function(){return M})),n.d(e,"s",(function(){return C})),n.d(e,"c",(function(){return I})),n.d(e,"t",(function(){return P})),n.d(e,"r",(function(){return S})),n.d(e,"b",(function(){return B})),n.d(e,"n",(function(){return _}));var r=n(16).getContractAddressConfig,a=n(14).getPoolConfigList,i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",e=arguments.length>1?arguments[1]:void 0;if(e&&"1"!==e&&"v1"!==e){if("2"===e||"v2"===e)return a(t).concat(r(t));throw new Error("getPoolContractAddress: invalid version: ".concat(e))}return r(t)},u=n(0),s=n.n(u),o=n(1),c=n(37),p=n(36),l=n(20),d=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(c.c)(e,n,r));case 4:return t.abrupt("return",Object(l.k)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),y=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==r){t.next=4;break}return t.abrupt("return",Object(p.c)(e,n));case 4:return t.abrupt("return",Object(l.n)(e,n,r));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),f=n(42),m=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a,i){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==i){t.next=4;break}return t.abrupt("return",Object(f.c)(e,n,r,a));case 4:return t.abrupt("return",Object(l.a)(e,n,r,a,i));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),b=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a,i){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==i){t.next=4;break}return t.abrupt("return",Object(f.i)(e,n,r,a));case 4:return t.abrupt("return",Object(l.t)(e,n,r,a,i));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),v=n(54),h=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(c.e)(e,n));case 4:return t.abrupt("return",Object(l.p)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),g=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(v.e)(e,n,r));case 4:return t.abrupt("return",Object(l.o)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),T=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(v.f)(e,n,r));case 4:return t.abrupt("return",Object(l.r)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),x=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(v.g)(e,n,r));case 4:return t.abrupt("return",Object(l.s)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),k=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(v.a)(e,n,r));case 4:return t.abrupt("return",Object(l.e)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),w=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==r){t.next=4;break}return t.abrupt("return",Object(c.a)(e,n));case 4:return t.abrupt("return",Object(l.i)(e,n,r));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),O=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(v.b)(e,n,r));case 4:return t.abrupt("return",Object(l.f)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),j=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==r){t.next=4;break}return t.abrupt("return",Object(c.d)(e,n));case 4:return t.abrupt("return",Object(l.l)(e,n,r));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),M=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(v.c)(e,n,r));case 4:return t.abrupt("return",Object(l.g)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),A=n(38),C=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(A.g)(e,n,r));case 4:return t.abrupt("return",Object(l.v)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),I=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a,i){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==i){t.next=4;break}return t.abrupt("return",Object(f.f)(e,n,r,a));case 4:return t.abrupt("return",Object(l.d)(e,n,r,a,i));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),P=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a,i){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==i){t.next=4;break}return t.abrupt("return",Object(f.l)(e,n,r,a));case 4:return t.abrupt("return",Object(l.w)(e,n,r,a,i));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),S=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a,i){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==i){t.next=4;break}return t.abrupt("return",Object(f.k)(e,n,r,a));case 4:return t.abrupt("return",Object(l.u)(e,n,r,a,i));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),B=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(f.e)(e,n,r));case 4:return t.abrupt("return",Object(l.c)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),_=function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==a){t.next=4;break}return t.abrupt("return",Object(c.f)(e,n,r));case 4:return t.abrupt("return",Object(l.q)(e,n,r,a));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},289:function(t,e,n){},29:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"k",(function(){return u})),n.d(e,"i",(function(){return s})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return p})),n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"c",(function(){return y})),n.d(e,"j",(function(){return f}));var r=n(2),a=function(t,e,n,a,i){return Object(r.c)(t*e*n/a*i).abs()},i=function(t,e,n,r,a){return t*e*n/r*a},u=function(t,e){var n=Object(r.j)(t);return Object(r.c)(e).times(n)},s=function(t,e){return t.eq(0)?Object(r.c)(0):e.div(t)},o=function(t,e,n,a,i,u,o,c){var p=s(e,n),l=a.times(c).times(u),d=n.plus(i).minus(l).minus(l.abs().times(o));return Object(r.z)(Object(r.A)(t,d.div(p)),Object(r.c)(0))},c=function(t,e,n){return t.eq(0)?Object(r.c)(0):e.div(t).div(n)},p=function(t,e,n,r){return e.abs().times(t).times(n).times(r)},l=function(t,e,n,r){return e.times(t).times(n).minus(r)},d=function(t,e,n,a,i,u){if(e.eq(0))return n;var s=p(t,e,i,u),o=l(t,e,i,a);return Object(r.z)(n.plus(o).minus(s.times(1.02)),Object(r.c)(0))},y=function(t,e,n,a,i){var u=n.minus(e).div(t).div(a),s=t.gt(0)?u.div(Object(r.c)(1).minus(i)):u.div(Object(r.c)(1).plus(i));return s=Object(r.z)(s,Object(r.c)(0))},f=function(t,e,n,r,a,i,u,s,o,c){var p=n.plus(o).abs().times(t).times(i).times(s),l=r.div(u).div(t).div(i);return e.plus(c).gte(p)?o.lte(l.minus(a))&&o.gte(l.negated().minus(a))?{success:!0}:{success:!1,message:"Pool insufficient liquidity"}:{success:!1,message:"Trader insufficient margin"}}},302:function(t,e){},325:function(t,e){},327:function(t,e){},341:function(t,e){},342:function(t,e){},36:function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return m})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return v}));var r=n(0),a=n.n(r),i=n(12),u=n(1),s=n(7),o=n(2),c=function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r,u,c,p,l,d,y,f,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.e)(!0),e=Object(o.D)(e),t.next=4,n.getValues(["".concat(e,".claim.chainId"),"".concat(e,".claim.amount"),"".concat(e,".claim.deadline"),"".concat(e,".claim.nonce"),"".concat(e,".claim.v"),"".concat(e,".claim.r"),"".concat(e,".claim.s"),"".concat(e,".claim.valid")]).catch((function(t){return console.log("getUserInfo",t)}));case 4:if(!(r=t.sent)){t.next=8;break}return u=Object(i.a)(r,8),c=u[0],p=u[1],l=u[2],d=u[3],y=u[4],f=u[5],m=u[6],b=u[7],t.abrupt("return",{chainId:Object(o.g)(c),amount:Object(o.f)(p).toString(),deadline:Object(o.g)(l),nonce:Object(o.g)(d),v:Object(o.g)(y),r:f,s:m,valid:Object(o.e)(b)});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r,u,c,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.e)(!0),e=Object(o.D)(e),t.next=4,n.getValues(["".concat(e,".claim.harvest.lp"),"".concat(e,".claim.harvest.trade")]).catch((function(t){return console.log("getUserInfoHarvest",t)}));case 4:if(!(r=t.sent)){t.next=8;break}return u=Object(i.a)(r,2),c=u[0],p=u[1],t.abrupt("return",{lp:Object(o.f)(c).toString(),trade:Object(o.f)(p).toString()});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.e)(!0),e=Object(o.D)(e),t.next=4,n.getValues(["".concat(e,".claim.total")]).catch((function(t){return console.log("getUserInfoTotal",t)}));case 4:if(!(r=t.sent)){t.next=8;break}return u=Object(i.a)(r,1),c=u[0],t.abrupt("return",{total:Object(o.f)(c).toString()});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:return n=t.sent,t.next=5,p(e);case 5:return r=t.sent,t.next=8,l(e);case 8:return i=t.sent,t.abrupt("return",Object.assign(n,r,i));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,u,c,p,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(s.e)(),t.prev=1,t.next=4,r.getValues(["".concat(e,".").concat(n,".liquidity")]).catch((function(t){return console.log("getPoolLiquidity",t)}));case 4:if(u=t.sent,c=Object(o.t)(e,n),p=c.symbol,!u){t.next=9;break}return l=Object(i.a)(u,1),d=l[0],t.abrupt("return",{liquidity:Object(o.f)(d).toString(),symbol:p});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,u,c,p,l,d,y;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(s.e)(!0),t.prev=1,u=Object(o.r)(e),t.next=5,r.getValues(["".concat(u,".").concat(n,".apy"),"".concat(u,".").concat(n,".volume.1h"),"".concat(u,".").concat(n,".volume.24h")]).catch((function(t){return console.log("getPoolInfoApy",t)}));case 5:if(!(c=t.sent)){t.next=9;break}return p=Object(i.a)(c,3),l=p[0],d=p[1],y=p[2],t.abrupt("return",{apy:Object(o.f)(l).toString(),volume1h:Object(o.f)(d).toString(),volume24h:Object(o.f)(y).toString()});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,u,c,p,l,d,y,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(s.e)(!0),t.prev=1,u=Object(o.r)(e),t.next=5,r.getValues(["".concat(u,".").concat(n,".apy"),"".concat(u,".").concat(n,".apy2"),"".concat(u,".").concat(n,".volume.1h"),"".concat(u,".").concat(n,".volume.24h")]).catch((function(t){return console.log("getPoolInfoApy",t)}));case 5:if(!(c=t.sent)){t.next=9;break}return p=Object(i.a)(c,4),l=p[0],d=p[1],y=p[2],f=p[3],t.abrupt("return",{apy:Object(o.f)(l).toString(),apy2:Object(o.f)(d).toString(),volume1h:Object(o.f)(y).toString(),volume24h:Object(o.f)(f).toString()});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var u,c,p,l,d,y;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.e)(!0),r=Object(o.D)(r),t.prev=2,c=Object(o.r)(e),t.next=6,u.getValues(["".concat(c,".").concat(n,".").concat(r,".volume.1h"),"".concat(c,".").concat(n,".").concat(r,".volume.24h")]).catch((function(t){return console.log("getUserInfoInPool",t)}));case 6:if(!(p=t.sent)){t.next=10;break}return l=Object(i.a)(p,2),d=l[0],y=l[1],t.abrupt("return",{volume1h:Object(o.f)(d).toString(),volume24h:Object(o.f)(y).toString()});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,n,r){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r,u,c,p,l,d,y,f,m,b,v,h,g;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.d)(!0),e=Object(o.D)(e),t.next=4,n.getValues(["".concat(e,".claim.chainId"),"".concat(e,".claim.amount"),"".concat(e,".claim.deadline"),"".concat(e,".claim.nonce"),"".concat(e,".claim.v1"),"".concat(e,".claim.r1"),"".concat(e,".claim.s1"),"".concat(e,".claim.v2"),"".concat(e,".claim.r2"),"".concat(e,".claim.s2"),"".concat(e,".claim.valid")]).catch((function(t){return console.log("getUserInfoAllForAirDrop",t)}));case 4:if(!(r=t.sent)){t.next=8;break}return u=Object(i.a)(r,11),c=u[0],p=u[1],l=u[2],d=u[3],y=u[4],f=u[5],m=u[6],b=u[7],v=u[8],h=u[9],g=u[10],t.abrupt("return",{chainId:Object(o.g)(c),amount:Object(o.f)(p).toString(),deadline:Object(o.g)(l),nonce:Object(o.g)(d),v1:Object(o.g)(y),r1:f,s1:m,v2:Object(o.g)(b),r2:v,s2:h,valid:Object(o.e)(g)});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},37:function(t,e,n){"use strict";n.d(e,"e",(function(){return b})),n.d(e,"a",(function(){return v})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return T})),n.d(e,"f",(function(){return x}));var r=n(12),a=n(0),i=n.n(a),u=n(1),s=n(16),o=n(2),c=n(7),p=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,a,u,s,c){var p,l,d,y,f,m,b,v,h;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=Object(o.f)(r.tradeVolume),t.next=3,e._getTimeStamp(a);case 3:return l=t.sent,d=p.gt(0)?"LONG":"SHORT",y=Object(o.f)(r.price),f="".concat(+l.timestamp,"000"),m=e._calculateFee(p,y,s,c),b=p.abs().times(y).times(s),v=p.abs(),h={direction:d,baseToken:n,price:y.toString(),notional:b.toString(),volume:v.toString(),transactionFee:m.toString(),transactionHash:u.toString(),time:f},t.abrupt("return",h);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i,u,s){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,a){var u,s,c,p,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(o.f)(e.volume).abs(),s="".concat(e.timestamp,"000"),c=Object(o.f)(e.price),p=u.times(c).times(a),l={direction:"Liquidation",baseToken:r,price:c.toString(),notional:p.toString(),volume:u.toString(),transactionFee:"0",transactionHash:n.toString(),time:s},t.abrupt("return",l);case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,a){var u,s,l,d,y,f,m,b,v,h,g,T,x,k;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(o.t)(e,n),s=u.bTokenSymbol,l=Object(c.l)(e,n),t.next=4,l._getBlockInfo("latest");case 4:return d=t.sent,a=parseInt(a),y={owner:r},t.next=9,l._getPastEvents("Trade",y,a,d.number);case 9:return f=t.sent,t.next=12,l.getParameters();case 12:m=t.sent,b=m.multiplier,v=m.feeRatio,h=m.minInitialMarginRatio,g=[],T=0;case 18:if(!(T<f.length)){t.next=27;break}return x=f[T],t.next=22,p(l,s,x.returnValues,x.blockNumber,x.transactionHash,b,v,h);case 22:k=t.sent,g.unshift(k);case 24:T++,t.next=18;break;case 27:return t.abrupt("return",g);case 28:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,a){var u,s,p,d,y,f,m,b,v,h,g,T;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(o.t)(e,n),s=u.bTokenSymbol,p=Object(c.l)(e,n),t.next=4,p._getBlockInfo("latest");case 4:return d=t.sent,a=parseInt(a),y={owner:r},t.next=9,p._getPastEvents("Liquidate",y,a,d.number);case 9:return f=t.sent,t.next=12,p.getParameters();case 12:m=t.sent,b=m.multiplier,v=[],h=0;case 16:if(!(h<f.length)){t.next=25;break}return g=f[h],t.next=20,l(g.returnValues,g.transactionHash,s,b);case 20:T=t.sent,v.unshift(T);case 22:h++,t.next=16;break;case 25:return t.abrupt("return",v);case 26:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),f=function(){return Object(s.getRestServerConfig)(s.DeriEnv.get())},m=function(){var t=Object(u.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("hit"),t.next=3,m("".concat(f(),"/specification/").concat(n));case 3:if(!(r=t.sent)||!r.success){t.next=6;break}return t.abrupt("return",r.data);case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m("".concat(f(),"/funding_rate/").concat(n));case 2:if(!(r=t.sent)||!r.success){t.next=5;break}return t.abrupt("return",r.data);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m("".concat(f(),"/liquidity_used/").concat(n));case 2:if(!(r=t.sent)||!r.success){t.next=5;break}return t.abrupt("return",r.data);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m("".concat(f(),"/funding_rate_cache/").concat(n));case 2:if(!(r=t.sent)||!r.success){t.next=9;break}return(a=r.data).price=Object(o.c)(a.price),a.fundingRate=Object(o.c)(a.fundingRate),a.liquidityUsed=Object(o.c)(a.liquidityUsed),t.abrupt("return",a);case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),T=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m("".concat(f(),"/liquidity_info/").concat(e,"/").concat(n,"/").concat(r));case 2:if(!(a=t.sent)||!a.success){t.next=5;break}return t.abrupt("return",a.data);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),x=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,s,c,p,l,b,v,h,g,T,x,k,w,O,j,M;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m("".concat(f(),"/trade_history/").concat(e,"/").concat(n,"/").concat(a));case 2:if((p=t.sent)&&p.success&&(u=parseInt(p.data.tradeHistoryBlock),s=parseInt(p.data.liquidateHistoryBlock),c=p.data.tradeHistory),c=c.filter((function(t){return t})).map((function(t){return{direction:t.direction.trim(),baseToken:t.baseToken.trim(),price:Object(o.f)(t.price).toString(),notional:Object(o.f)(t.notional).toString(),volume:Object(o.f)(t.volume).toString(),transactionFee:Object(o.f)(t.transactionFee).toString(),transactionHash:t.transactionHash,time:t.time.toString()}})),0===u||0===s){t.next=16;break}return t.next=8,Promise.all([d(e,n,a,u+1),y(e,n,a,s+1)]);case 8:return l=t.sent,b=Object(r.a)(l,2),v=b[0],h=b[1],g=v.concat(h).concat(c),t.abrupt("return",g.sort((function(t,e){return parseInt(e.time)-parseInt(t.time)})));case 16:return T=Object(o.t)(e,n),x=T.initialBlock,u=parseInt(x),s=parseInt(x),t.next=21,Promise.all([d(e,n,a,u+1),y(e,n,a,s+1)]);case 21:return k=t.sent,w=Object(r.a)(k,2),O=w[0],j=w[1],M=O.concat(j),t.abrupt("return",M.sort((function(t,e){return parseInt(e.time)-parseInt(t.time)})));case 27:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},38:function(t,e,n){"use strict";n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"h",(function(){return y})),n.d(e,"a",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return b})),n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return h}));var r=n(12),a=n(0),i=n.n(a),u=n(1),s=n(7),o=n(36),c=n(2),p=(n(16),n(29)),l=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r){var a,u,o,p,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.t)(e,n),u=a.bTokenAddress,o=Object(s.a)(e,u,n),t.prev=2,t.next=5,o.unlock(r);case 5:l=t.sent,p={success:!0,transaction:l},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),p={success:!1,error:t.t0};case 12:return t.abrupt("return",p);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,r){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,a){var u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.l)(e,n),t.next=3,u.depositMargin(r,Object(c.B)(a));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,a){var u,o,l,d,y,f,m,b,v,h,g,T,x,k,w;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(c.t)(e,n),l=o.pTokenAddress,d=Object(s.l)(e,n),y=Object(s.k)(e,l,n),t.next=5,Object(c.k)(e,n);case 5:return f=t.sent,t.next=8,y.getPositionInfo(r);case 8:return m=t.sent,b=m.volume,v=m.margin,h=m.cost,t.next=14,d.getParameters();case 14:if(g=t.sent,T=g.multiplier,x=g.minInitialMarginRatio,k=Object(p.g)(f,b,v,h,T,x),!Object(c.c)(a).lte(k)){t.next=31;break}return t.prev=19,t.next=22,d._transactPool("withdrawMargin(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(a)],r);case 22:w=t.sent,u={success:!0,transaction:w},t.next=29;break;case 26:t.prev=26,t.t0=t.catch(19),u={success:!1,error:t.t0};case 29:t.next=32;break;case 31:u={success:!1,error:"amount exceeds allowed"};case 32:return t.abrupt("return",u);case 33:case"end":return t.stop()}}),t,null,[[19,26]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,a){var u,o,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(s.l)(e,n),t.prev=1,t.next=4,u._transactPool("addLiquidity(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(a)],r);case 4:p=t.sent,o={success:!0,transaction:p},t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o={success:!1,error:t.t0};case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),m=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,u){var o,l,d,y,f,m,b,v,h,g,T,x,k,w,O,j,M,A,C;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(c.t)(e,n),l=o.lTokenAddress,d=Object(s.l)(e,n),y=Object(s.h)(e,l,n),t.next=5,Object(c.k)(e,n);case 5:return f=t.sent,t.next=8,Promise.all([y.balance(a),y.totalSupply()]);case 8:return m=t.sent,b=Object(r.a)(m,2),v=b[0],h=b[1],t.next=14,d.getParameters();case 14:return g=t.sent,T=g.multiplier,x=g.minPoolMarginRatio,t.next=19,d.getStateValues();case 19:if(k=t.sent,w=k.liquidity,O=k.tradersNetVolume,j=k.tradersNetCost,M=Object(p.f)(v,h,w,O,j,T,x,f),!Object(c.c)(u).lte(M)){t.next=37;break}return t.prev=25,t.next=28,d._transactPool("removeLiquidity(uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(u)],a);case 28:C=t.sent,A={success:!0,transaction:C},t.next=35;break;case 32:t.prev=32,t.t0=t.catch(25),A={success:!1,error:t.t0};case 35:t.next=38;break;case 37:A={success:!1,error:"shares exceeds allowed"};case 38:return t.abrupt("return",A);case 39:case"end":return t.stop()}}),t,null,[[25,32]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r,a){var u,o,l,d,y,f,m,b,v,h,g,T,x,k,w,O,j,M,A,C=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=C.length>4&&void 0!==C[4]?C[4]:"0",t.next=3,Object(c.k)(e,n);case 3:return o=t.sent,l=Object(c.t)(e,n),d=l.pTokenAddress,y=Object(s.l)(e,n),f=Object(s.k)(e,d,n),t.next=9,y.getParameters();case 9:return m=t.sent,b=m.multiplier,v=m.minInitialMarginRatio,h=m.minPoolMarginRatio,t.next=15,y.getStateValues();case 15:return g=t.sent,T=g.liquidity,x=g.tradersNetVolume,t.next=20,f.getPositionInfo(r);case 20:if(k=t.sent,w=k.volume,O=k.margin,!(M=Object(p.j)(o,O,w,T,x,b,h,v,Object(c.c)(a),Object(c.c)(u))).success){t.next=37;break}return t.prev=25,t.next=28,y._transactPool("tradeWithMargin(int256,uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(a),Object(c.B)(u)],r);case 28:A=t.sent,j={success:!0,transaction:A},t.next=35;break;case 32:t.prev=32,t.t0=t.catch(25),j={success:!1,error:t.t0};case 35:t.next=38;break;case 37:j={success:!1,error:M.message};case 38:return t.abrupt("return",j);case 39:case"end":return t.stop()}}),t,null,[[25,32]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(i.a.mark((function t(e,n,r){var a,u,o,p,l,d,y,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.t)(e,n),u=a.pTokenAddress,o=Object(s.l)(e,n),p=Object(s.k)(e,u,n),t.next=5,p.getPositionInfo(r);case 5:if(l=t.sent,(d=(d=l.volume).negated()).eq(0)){t.next=21;break}return t.prev=9,t.next=12,o._transactPool("tradeWithMargin(int256,uint256,uint256,uint256,uint8,bytes32,bytes32)",[Object(c.B)(d),"0"],r);case 12:f=t.sent,y={success:!0,transaction:f},t.next=19;break;case 16:t.prev=16,t.t0=t.catch(9),y={success:!1,error:t.t0};case 19:t.next=22;break;case 21:y={success:!1,error:"no position to close"};case 22:return t.abrupt("return",y);case 23:case"end":return t.stop()}}),t,null,[[9,16]])})));return function(e,n,r){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(i.a.mark((function t(e,n){var r,a,u,p,l,d,y,f,m,b,v;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.d)(n);case 2:if(a=t.sent,u=Object(c.B)(a.amount),p=a.deadline,l=a.nonce,d=a.v,y=a.r,f=a.s,!a.valid){t.next=28;break}if(!(m=Object(c.q)(e))){t.next=25;break}return b=Object(s.i)(e,m),t.prev=13,t.next=16,b.mintDToken(n,u,p,l,d,y,f);case 16:v=t.sent,r={success:!0,transaction:v},t.next=23;break;case 20:t.prev=20,t.t0=t.catch(13),r={success:!1,error:t.t0};case 23:t.next=26;break;case 25:r={success:!1,error:"cannot find the mining vault address in chain ".concat(e)};case 26:t.next=29;break;case 28:r={success:!1,error:"userinfo is not valid"};case 29:return t.abrupt("return",r);case 30:case"end":return t.stop()}}),t,null,[[13,20]])})));return function(e,n){return t.apply(this,arguments)}}()},39:function(t,e,n){"use strict";var r=n(16);n.d(e,"DeriEnv",(function(){return r.DeriEnv})),n.d(e,"getLpContractAddressConfig",(function(){return r.getLpContractAddressConfig}));var a=n(2);n.d(e,"bg",(function(){return a.c}));n(29);var i=n(43);n.d(e,"PerpetualPoolParametersCache",(function(){return i.a})),n.d(e,"priceCache",(function(){return i.c}));var u=n(267);n.o(u,"addLiquidity")&&n.d(e,"addLiquidity",(function(){return u.addLiquidity})),n.o(u,"addLpLiquidity")&&n.d(e,"addLpLiquidity",(function(){return u.addLpLiquidity})),n.o(u,"closePosition")&&n.d(e,"closePosition",(function(){return u.closePosition})),n.o(u,"connectWallet")&&n.d(e,"connectWallet",(function(){return u.connectWallet})),n.o(u,"depositMargin")&&n.d(e,"depositMargin",(function(){return u.depositMargin})),n.o(u,"getContractAddressConfig")&&n.d(e,"getContractAddressConfig",(function(){return u.getContractAddressConfig})),n.o(u,"getEstimatedFee")&&n.d(e,"getEstimatedFee",(function(){return u.getEstimatedFee})),n.o(u,"getEstimatedFundingRate")&&n.d(e,"getEstimatedFundingRate",(function(){return u.getEstimatedFundingRate})),n.o(u,"getEstimatedLiquidityUsed")&&n.d(e,"getEstimatedLiquidityUsed",(function(){return u.getEstimatedLiquidityUsed})),n.o(u,"getFundingRate")&&n.d(e,"getFundingRate",(function(){return u.getFundingRate})),n.o(u,"getLiquidityInfo")&&n.d(e,"getLiquidityInfo",(function(){return u.getLiquidityInfo})),n.o(u,"getLiquidityUsed")&&n.d(e,"getLiquidityUsed",(function(){return u.getLiquidityUsed})),n.o(u,"getLpLiquidityInfo")&&n.d(e,"getLpLiquidityInfo",(function(){return u.getLpLiquidityInfo})),n.o(u,"getLpWalletBalance")&&n.d(e,"getLpWalletBalance",(function(){return u.getLpWalletBalance})),n.o(u,"getPoolLiquidity")&&n.d(e,"getPoolLiquidity",(function(){return u.getPoolLiquidity})),n.o(u,"getPositionInfo")&&n.d(e,"getPositionInfo",(function(){return u.getPositionInfo})),n.o(u,"getSpecification")&&n.d(e,"getSpecification",(function(){return u.getSpecification})),n.o(u,"getTradeHistory")&&n.d(e,"getTradeHistory",(function(){return u.getTradeHistory})),n.o(u,"getUserWalletBalance")&&n.d(e,"getUserWalletBalance",(function(){return u.getUserWalletBalance})),n.o(u,"getWalletBalance")&&n.d(e,"getWalletBalance",(function(){return u.getWalletBalance})),n.o(u,"isLpUnlocked")&&n.d(e,"isLpUnlocked",(function(){return u.isLpUnlocked})),n.o(u,"isUnlocked")&&n.d(e,"isUnlocked",(function(){return u.isUnlocked})),n.o(u,"removeLiquidity")&&n.d(e,"removeLiquidity",(function(){return u.removeLiquidity})),n.o(u,"removeLpLiquidity")&&n.d(e,"removeLpLiquidity",(function(){return u.removeLpLiquidity})),n.o(u,"tradeWithMargin")&&n.d(e,"tradeWithMargin",(function(){return u.tradeWithMargin})),n.o(u,"unlock")&&n.d(e,"unlock",(function(){return u.unlock})),n.o(u,"unlockLp")&&n.d(e,"unlockLp",(function(){return u.unlockLp})),n.o(u,"withdrawMargin")&&n.d(e,"withdrawMargin",(function(){return u.withdrawMargin}));var s=n(268);n.d(e,"connectWallet",(function(){return s.a})),n.d(e,"getUserWalletBalance",(function(){return s.b}));n(54);var o=n(38);n.d(e,"mintDToken",(function(){return o.d}));var c=n(36);n.d(e,"getUserInfoAll",(function(){return c.d})),n.d(e,"getPoolInfoApy",(function(){return c.b})),n.d(e,"getLpPoolInfoApy",(function(){return c.a})),n.d(e,"getUserInfoInPool",(function(){return c.f}));n(37);var p=n(269);n.d(e,"addLpLiquidity",(function(){return p.a})),n.d(e,"getLpLiquidityInfo",(function(){return p.b})),n.d(e,"getLpWalletBalance",(function(){return p.c})),n.d(e,"isLpUnlocked",(function(){return p.d})),n.d(e,"removeLpLiquidity",(function(){return p.e})),n.d(e,"unlockLp",(function(){return p.f}));var l=n(272);n.d(e,"addLiquidity",(function(){return l.a})),n.d(e,"closePosition",(function(){return l.b})),n.d(e,"depositMargin",(function(){return l.c})),n.d(e,"getContractAddressConfig",(function(){return l.d})),n.d(e,"getEstimatedFee",(function(){return l.e})),n.d(e,"getEstimatedFundingRate",(function(){return l.f})),n.d(e,"getEstimatedLiquidityUsed",(function(){return l.g})),n.d(e,"getFundingRate",(function(){return l.h})),n.d(e,"getLiquidityInfo",(function(){return l.i})),n.d(e,"getLiquidityUsed",(function(){return l.j})),n.d(e,"getPoolLiquidity",(function(){return l.k})),n.d(e,"getPositionInfo",(function(){return l.l})),n.d(e,"getSpecification",(function(){return l.m})),n.d(e,"getTradeHistory",(function(){return l.n})),n.d(e,"getWalletBalance",(function(){return l.o})),n.d(e,"isUnlocked",(function(){return l.p})),n.d(e,"removeLiquidity",(function(){return l.q})),n.d(e,"tradeWithMargin",(function(){return l.r})),n.d(e,"unlock",(function(){return l.s})),n.d(e,"withdrawMargin",(function(){return l.t}));n(20)},403:function(t,e){},405:function(t,e){},42:function(t,e,n){"use strict";n.d(e,"k",(function(){return m})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return v})),n.d(e,"l",(function(){return h})),n.d(e,"c",(function(){return g})),n.d(e,"i",(function(){return T})),n.d(e,"d",(function(){return x})),n.d(e,"j",(function(){return k})),n.d(e,"b",(function(){return w})),n.d(e,"h",(function(){return O})),n.d(e,"a",(function(){return j})),n.d(e,"g",(function(){return M}));var r=n(22),a=n(0),i=n.n(a),u=n(1),s=n(38),o=n(67),c=n(69),p=n(68),l=n(43),d=n(16),y=function(t,e){return new Promise((function(n,r){t.on(e,(function(t){n(JSON.parse(t))}))}))},f=function(){var t=Object(u.a)(i.a.mark((function t(e){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.d.getOrSet(Object(d.getRestServerConfig)(d.DeriEnv.get())),t.next=3,n.send(e);case 3:return t.next=5,y(n,"trade_tx_receipt");case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,u){var o,c,p,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:"0",t.next=3,Object(s.f)(e,n,a,u,o);case 3:if(!(c=t.sent).success){t.next=11;break}return t.next=7,f("trade_with_margin(".concat(e,",").concat(n,",").concat(a,")"));case 7:return p=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},p),c));case 11:return t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a,u){var o,c,p,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:"0",t.next=3,Object(s.b)(e,n,a,u,o);case 3:if(!(c=t.sent).success){t.next=11;break}return t.next=7,f("close_position(".concat(e,",").concat(n,",").concat(a,")"));case 7:return p=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},p),c));case 11:return t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,o,c,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=p.length>3&&void 0!==p[3]?p[3]:"0",t.next=3,Object(s.c)(e,n,a,u);case 3:if(!(o=t.sent).success){t.next=11;break}return t.next=7,f("deposit_margin(".concat(e,",").concat(n,",").concat(a,")"));case 7:return c=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},c),o));case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),h=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,o,c,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=p.length>3&&void 0!==p[3]?p[3]:"0",t.next=3,Object(s.h)(e,n,a,u);case 3:if(!(o=t.sent).success){t.next=11;break}return t.next=7,f("withdraw_margin(".concat(e,",").concat(n,",").concat(a,")"));case 7:return c=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},c),o));case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),g=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,o,c,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=p.length>3&&void 0!==p[3]?p[3]:"0",t.next=3,Object(s.a)(e,n,a,u);case 3:if(!(o=t.sent).success){t.next=11;break}return t.next=7,f("add_liquidity(".concat(e,",").concat(n,",").concat(a,")"));case 7:return c=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},c),o));case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),T=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,o,c,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=p.length>3&&void 0!==p[3]?p[3]:"0",t.next=3,Object(s.e)(e,n,a,u);case 3:if(!(o=t.sent).success){t.next=11;break}return t.next=7,f("remove_liquidity(".concat(e,",").concat(n,",").concat(a,")"));case 7:return c=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},c),o));case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),x=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,s,c,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=p.length>3&&void 0!==p[3]?p[3]:"0",t.next=3,Object(o.a)(e,n,a,u);case 3:if(!(s=t.sent).success){t.next=11;break}return t.next=7,f("add_slp_liquidity(".concat(e,",").concat(n,",").concat(a,")"));case 7:return c=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},c),s));case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),k=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,s,c,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=p.length>3&&void 0!==p[3]?p[3]:"0",t.next=3,Object(o.e)(e,n,a,u);case 3:if(!(s=t.sent).success){t.next=11;break}return t.next=7,f("remove_slp_liquidity(".concat(e,",").concat(n,",").concat(a,")"));case 7:return c=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},c),s));case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),w=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,s,o,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=p.length>3&&void 0!==p[3]?p[3]:"0",t.next=3,Object(c.a)(e,n,a,u);case 3:if(!(s=t.sent).success){t.next=11;break}return t.next=7,f("add_clp_liquidity(".concat(e,",").concat(n,",").concat(a,")"));case 7:return o=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},o),s));case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),O=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,s,o,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=p.length>3&&void 0!==p[3]?p[3]:"0",t.next=3,Object(c.e)(e,n,a,u);case 3:if(!(s=t.sent).success){t.next=11;break}return t.next=7,f("remove_clp_liquidity(".concat(e,",").concat(n,",").concat(a,")"));case 7:return o=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},o),s));case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),j=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,s,o,c=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=c.length>3&&void 0!==c[3]?c[3]:"0",t.next=3,Object(p.a)(e,n,a,u);case 3:if(!(s=t.sent).success){t.next=11;break}return t.next=7,f("add_clp_liquidity(".concat(e,",").concat(n,",").concat(a,")"));case 7:return o=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},o),s));case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),M=function(){var t=Object(u.a)(i.a.mark((function t(e,n,a){var u,s,o,c=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=c.length>3&&void 0!==c[3]?c[3]:"0",t.next=3,Object(p.e)(e,n,a,u);case 3:if(!(s=t.sent).success){t.next=11;break}return t.next=7,f("remove_clp_liquidity(".concat(e,",").concat(n,",").concat(a,")"));case 7:return o=t.sent,t.abrupt("return",Object(r.a)(Object(r.a)({},o),s));case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},43:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return d}));var r=n(0),a=n.n(r),i=n(1),u=n(7),s=n(2),o=(n(54),n(119)),c=function(){var t={};return{get:function(e,n){var r="".concat(e,".").concat(n);if(Object.keys(t).includes(r))return t[r];console.log("Cache key is not in resouceMap: ".concat(r))},set:function(e,n,r){var a="".concat(e,".").concat(n);t[a]=r}}}(),p=(function(){var t=""}(),function(){var t="",e=null;return{get:function(){return""===t&&console.log("please init 'price' first"),t},_update:function(e,n){return Object(i.a)(a.a.mark((function r(){var i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(s.k)(e,n);case 3:""!==(i=r.sent)&&(t=i),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log("priceCache.update: ".concat(r.t0));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},update:function(t,n){var r=this;e=setInterval((function(){r._update(t,n)}),3e3)},clear:function(){e&&clearInterval(e),t=""}}}()),l=function(){var t={};return{get:function(){return t.multiplier||console.log("please init 'perpetual pool parameters' first"),t},update:function(e,n){return Object(i.a)(a.a.mark((function r(){var i,s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Object(u.l)(e,n),r.next=3,i.getParameters();case 3:return(s=r.sent).multiplier&&(t=s),r.abrupt("return",s);case 6:case"end":return r.stop()}}),r)})))()}}}(),d=function(){var t=null;return{get:function(){if(t)return t;console.log("wsInstance.get() error: ws instance is not init")},set:function(e){try{var n=Object(o.io)(e,{transports:["websocket"],path:"/ws"});n.on("connect",(function(){console.log("hello from ws:",n.id)})),n?t=n:console.log("wsInstance.get() error: ws instance is not init")}catch(r){console.log("wsInstance.set():",r)}},getOrSet:function(e){return t||this.set(e),t}}}()},437:function(t,e){},442:function(t,e){},444:function(t,e){},451:function(t,e){},464:function(t,e){},482:function(t,e){},493:function(t,e){},496:function(t,e){},54:function(t,e,n){"use strict";n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"d",(function(){return y})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return b}));n(12);var r=n(0),a=n.n(r),i=n(1),u=n(7),s=(n(36),n(43)),o=n(2),c=n(29),p=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,s,p,l,d,y,f,m,b,v,h,g,T;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.k)(e,n);case 2:return i=t.sent,s=Object(o.t)(e,n),p=s.pTokenAddress,l=Object(u.l)(e,n),d=Object(u.k)(e,p,n),t.next=8,l.getParameters();case 8:return y=t.sent,f=y.multiplier,m=y.minInitialMarginRatio,b=y.minMaintenanceMarginRatio,t.next=14,d.getPositionInfo(r);case 14:return v=t.sent,h=v.volume,g=v.margin,T=v.cost,t.abrupt("return",{volume:h.toString(),averageEntryPrice:Object(c.a)(h,T,f).toString(),margin:g.toString(),marginHeld:Object(c.e)(i,h,f,m).toString(),unrealizedPnl:Object(c.h)(i,h,f,T).toString(),liquidationPrice:Object(c.c)(h,g,T,f,b).toString()});case 19:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),l=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,s,c,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.t)(e,n),s=i.bTokenAddress,c=Object(u.a)(e,s,n),t.next=4,c.balance(r);case 4:return p=t.sent,t.abrupt("return",p.toString());case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),d=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,s,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.t)(e,n),s=i.bTokenAddress,c=Object(u.a)(e,s,n),t.next=4,c.isUnlocked(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),y=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r,i,s){var c,p,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.k)(e,n);case 2:return c=t.sent,p=Object(u.l)(e,n),t.next=6,p.getParameters();case 6:return l=t.sent,d=l.multiplier,t.abrupt("return",Object(o.c)(i).abs().times(c).times(d).div(Object(o.c)(s)).toString());case 9:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i){return t.apply(this,arguments)}}(),f=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,u,c,p,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=s.c.get(),u=s.a.get(),""!==i){t.next=6;break}return t.next=5,s.c.update(e,n);case 5:i=s.c.get();case 6:if(u.multiplier){t.next=10;break}return t.next=9,s.a.update(e,n);case 9:u=t.sent;case 10:return p=(c=u).multiplier,l=c.feeRatio,t.abrupt("return",Object(o.c)(r).abs().times(i).times(p).times(l).toString());case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),m=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,p,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=s.b.get(e,n)){t.next=6;break}return l=Object(u.l)(e,n),t.next=5,l.getFundingRate();case 5:p=t.sent;case 6:if(!p){t.next=13;break}if(d=[Object(o.c)(p.tradersNetVolume).plus(Object(o.c)(r)).toString(),p.price,p.multiplier,p.liquidity,p.fundingRateCoefficient],!o.v.apply(void 0,d)){t.next=10;break}return t.abrupt("return",{fundingRate1:"0"});case 10:return i=c.b.apply(void 0,d),i=Object(c.k)(e,i),t.abrupt("return",{fundingRate1:Object(o.C)(i)});case 13:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),b=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,p,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=s.b.get(e,n)){t.next=6;break}return p=Object(u.l)(e,n),t.next=5,p.getFundingRate().catch((function(t){return console.log("getLiquidityUsed",t)}));case 5:i=t.sent;case 6:if(!i){t.next=12;break}if(l=[Object(o.c)(i.tradersNetVolume).plus(Object(o.c)(r)).toString(),i.price,i.multiplier,i.liquidity,i.poolMarginRatio],!o.v.apply(void 0,l)){t.next=10;break}return t.abrupt("return",{liquidityUsed1:"0"});case 10:return d=c.d.apply(void 0,l),t.abrupt("return",{liquidityUsed1:Object(o.C)(d)});case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},564:function(t,e){Number.prototype.toFixed=function(t){if(t>20||t<0)throw new RangeError("toFixed() digits argument must be between 0 and 20");var e=Number(this);if(isNaN(e)||e>=Math.pow(10,21))return e.toString();if("undefined"==typeof t||0==t)return Math.round(e).toString();var n=e.toString(),r=n.split(".");if(r.length<2)return c(n);var a=r[0],i=r[1],u=i.substr(t,1);if(i.length==t)return n;if(i.length<t)return c(n);if(n=a+"."+i.substr(0,t),parseInt(u,10)>=5){var s=Math.pow(10,t),o=Number(n.replace(".",""));o++,n=c((o/=s)+"")}return n;function c(e){var n=e.indexOf(".");if(-1===n){e+=".";for(var r=0;r<t;r++)e+="0";return e}for(var a=t-(e.length-n-1),i=0;i<a;i++)e+="0";return e}}},567:function(t,e,n){"use strict";n.r(e);var r=n(6),a=n.n(r),i=n(106),u=n.n(i),s=n(163),o=n(158),c=n(122),p=n(57),l=Object(c.a)((function(){return n.e(8).then(n.bind(null,640))})),d=Object(c.a)((function(){return n.e(9).then(n.bind(null,639))}));var y=function(){return o.isBrowser?Object(p.jsx)(l,{}):o.isMobile?Object(p.jsx)(d,{}):void 0},f=(n(289),n(162)),m=n(22),b=n(0),v=n.n(b),h=n(1),g=n(4),T=n(5),x=n(39),k=n(164),w=n(62),O=n(8),j=function(){function t(){var e=this;Object(g.a)(this,t),this.detail={},this.isConnected=function(){return!!e.detail.account},this.connect=Object(h.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(x.connectWallet)();case 2:return n=t.sent,t.abrupt("return",new Promise(function(){var t=Object(h.a)(v.a.mark((function t(r,a){var i,u,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.success){t.next=8;break}return i=n.chainId,u=n.account,t.next=4,e.loadWalletBalance(i,u);case 4:s=t.sent,r(s),t.next=9;break;case 8:a(null);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)}))),this.loadWalletBalance=function(){var t=Object(h.a)(v.a.mark((function t(n,r){var a,i,u,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(x.getUserWalletBalance)(n,r);case 2:return a=t.sent,i={chainId:n,account:r,balance:a,formatBalance:Object(w.d)(a)},u=x.DeriEnv.get(),(s=k[u].chainInfo)[n]&&Object.assign(i,Object(m.a)(Object(m.a)({},s[n]),{},{supported:!0})),e.setDetail(i),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.get=function(){return e.detail},Object(O.n)(this,{detail:O.p,setDetail:O.f,supportV2:O.g,supportChain:O.g})}return Object(T.a)(t,[{key:"setDetail",value:function(t){this.detail=t}},{key:"supportV2",get:function(){return Object(w.b)(this.detail.chainId,56)||Object(w.b)(this.detail.chainId,97)}},{key:"supportChain",get:function(){return this.detail.supported}}]),t}(),M=(n(564),n(119)),A=n.n(M),C=function(){function t(){Object(g.a)(this,t),this.symbol="BTCUSD",this.timeType="min",this.index=0,this.kData=[],this.ws=null,this.paused=!1,this.listeners={},this.already=!1,Object(O.n)(this,{index:O.p,kData:O.p,setIndex:O.f}),this.initWebSocket()}return Object(T.a)(t,[{key:"initWebSocket",value:function(){var t=this;null===this.ws&&(this.ws=new A.a("wss://oracle4.deri.finance",{transports:["websocket"],withCredentials:!0}),this.ws.on("connect",(function(){t.already&&(t.ws.emit("get_kline_update",{symbol:t.symbol,time_type:t.timeType}),console.log("ws is reconnected already")),console.log("ws is already connected")})))}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"min";this.ws.on("kline_update",(function(t){var n={},r=t.time;if(t.symbol.toUpperCase()===e.symbol.toUpperCase()&&(n.time=r,n.low=Number(t.low),n.high=Number(t.high),n.open=Number(t.open),n.close=Number(t.close),n.volume=Number(t.volume),n.time_type=t.time_type,n.symbol=t.symbol,!e.paused)){e.setIndex(n.close);for(var a=0,i=Object.keys(e.listeners);a<i.length;a++){var u=i[a];"function"===typeof e.listeners[u]&&e.listeners[u](n)}}})),t!==this.symbol&&this.unsubscribeBars(this.symbol),this.setSymbol(t),this.setTimeType(n),this.ws.emit("get_kline_update",{symbol:this.symbol,time_type:this.timeType}),this.already=!0}},{key:"addListener",value:function(t,e){this.listeners[t]||(this.listeners[t]=e)}},{key:"unsubscribeBars",value:function(t){this.ws.emit("un_get_kline_update",{symbol:t,time_type:"min"})}},{key:"loadHistory",value:function(t,e,n){this.ws.on("kline_history",(function(t){var e=t.map((function(t){return{time:t.time,low:Number(t.low),high:Number(t.high),open:Number(t.open),close:Number(t.close),volume:Number(t.volume)}}));n&&(console.log("history ->",e[e.length-1].time),n(e))})),this.ws.emit("get_kline",{symbol:t,time_type:e,bars:1e3})}},{key:"resume",value:function(){this.setPause(!1)}},{key:"pause",value:function(){this.setPause(!0)}},{key:"setIndex",value:function(t){this.paused||(this.index=t)}},{key:"setSymbol",value:function(t){this.symbol=t}},{key:"setTimeType",value:function(t){this.timeType=t}},{key:"setPause",value:function(t){this.paused=t}}]),t}(),I=function(){function t(){Object(g.a)(this,t),this.callback=function(){},this.wallet=null,this.spec=null}return Object(T.a)(t,[{key:"load",value:function(){var t=Object(h.a)(v.a.mark((function t(e,n,r){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.isConnected()&&e.supportChain&&n&&n.pool)){t.next=7;break}return t.next=3,Object(x.getPositionInfo)(e.detail.chainId,n.pool,e.detail.account,n.symbolId);case 3:return(a=t.sent)&&r&&r(a),this.start(e,n,r),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"start",value:function(t,e,n){var r=this;this.interval||(this.interval=window.setInterval((function(){return r.load(t,e,n)}),3e3),t&&(this.wallet=t),e&&(this.spec=e),n&&(this.callback=n))}},{key:"pause",value:function(){clearInterval(this.interval),this.interval=null}},{key:"resume",value:function(t,e,n){this.start(t,e,n||this.callback)}}]),t}(),P=function(){function t(){Object(g.a)(this,t),this.info={bSymbol:"BUSD",symbol:"BTCUSD",multiplier:"0.0001",fundingRateCoefficient:"0.0000025",minInitialMarginRatio:.1,minMaintenanceMarginRatio:.05,feeRatio:5e-4}}return Object(T.a)(t,[{key:"load",value:function(){var t=Object(h.a)(v.a.mark((function t(e,n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.supportChain&&n&&n.pool!==this.info.pool)){t.next=5;break}return t.next=3,Object(x.getSpecification)(e.detail.chainId,n.pool,n.bTokenId,n.symbolId);case 3:r=t.sent,this.setInfo(r);case 5:return t.abrupt("return",this.info);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setInfo",value:function(t){this.info=t}}]),t}(),S=function(){function t(){Object(g.a)(this,t)}return Object(T.a)(t,[{key:"load",value:function(){var t=Object(h.a)(v.a.mark((function t(e,n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.detail.chainId&&n&&n.pool)){t.next=7;break}return t.next=3,Object(x.getTradeHistory)(e.detail.chainId,n.pool,e.detail.account,n.symbolId);case 3:return r=t.sent,t.abrupt("return",r);case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),B=n(270),_=n(20),E=function(){function t(){Object(g.a)(this,t),this.version=null,this.wallet=null,this.configs=[],this.config=null,this.fundingRate="--",this.index=null,this.volume="",this.paused=!1,this.margin="",this.position={},this.contract={},this.fundingRate={},this.history=[],this.userSelectedDirection="long",Object(O.o)(this,{index:O.p,volume:O.p,margin:O.p,fundingRate:O.p,position:O.p,history:O.p,contract:O.p,userSelectedDirection:O.p,setWallet:O.f,setConfigs:O.f,setConfig:O.f,setIndex:O.f,setContract:O.f,setPosition:O.f,setVolume:O.f,setUserSelectedDirection:O.f,setFundingRate:O.f,setHistory:O.f,amount:O.g,fundingRateTip:O.g,direction:O.g,volumeDisplay:O.g,isShareOtherSymbolMargin:O.g}),this.configInfo=new B.a,this.oracle=new C,this.positionInfo=new I,this.contractInfo=new P,this.historyInfo=new S}return Object(T.a)(t,[{key:"init",value:function(){var t=Object(h.a)(v.a.mark((function t(e,n){var r,a,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n&&(this.version=n),t.next=3,this.configInfo.load(n);case 3:r=t.sent,e&&e.isConnected()&&(this.setWallet(e),this.setConfigs(r.filter((function(t){return Object(w.b)(e.detail.chainId,t.chainId)}))),(a=this.getDefaultConfig(this.configs,e))||(a=r.length>0?r[0]:{}),this.setConfig(a)),!e.isConnected()&&0===this.configs.length&&r.length>0&&(i=(i=r.find((function(t){return"BTCUSD"===t.symbol})))||r[0],this.setConfig(i)),this.loadByConfig(this.wallet,this.config,!0),this.setVolume("");case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"switch",value:function(){var t=Object(h.a)(v.a.mark((function t(e){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.configs.find((function(t){return t.pool===e.pool&&t.symbolId===e.symbolId})),r=!1,this.version&&(r=this.version.isV1?e.pool!==this.config.pool:e.symbolId!==this.config.symbolId),n&&(this.pause(),this.setConfig(n),this.loadByConfig(this.wallet,n,r),r&&this.store(n),this.resume(),this.setVolume(""));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"loadByConfig",value:function(){var t=Object(h.a)(v.a.mark((function t(e,n,r){var a,i,u,s=this;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.positionInfo.load(e,n,(function(t){s.setPosition(t)})),r&&n&&(this.oracle.unsubscribeBars(),this.oracle.addListener("trading",(function(t){s.setIndex(t.close)})),this.oracle.load(n.symbol)),t.next=4,this.contractInfo.load(e,n);case 4:return a=t.sent,t.next=7,this.loadFundingRate(e,n);case 7:return i=t.sent,t.next=10,this.historyInfo.load(e,n);case 10:u=t.sent,a&&this.setContract(a),i&&this.setFundingRate(i),u&&this.setHistory(u);case 14:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getDefaultConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=null;if(t.length>0){var r=this.getFromStore();if(r&&Object(w.b)(e.detail.chainId,r.chainId)&&(n=r),n){var a=t.findIndex((function(t){return t.pool===n.pool}));-1===a&&(n=t[0])}else n=t[0]}return n}},{key:"store",value:function(t){Object(w.i)(this.version.current,t)}},{key:"getFromStore",value:function(){return Object(w.e)(this.version.current)}},{key:"refresh",value:function(){var t=Object(h.a)(v.a.mark((function t(){var e,n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.pause(),t.next=3,this.positionInfo.load(this.wallet,this.config);case 3:return e=t.sent,this.wallet.loadWalletBalance(this.wallet.detail.chainId,this.wallet.detail.account),t.next=7,this.loadFundingRate(this.wallet,this.config);case 7:return n=t.sent,t.next=10,this.historyInfo.load(this.wallet,this.config);case 10:r=t.sent,n&&this.setFundingRate(n),e&&this.setPosition(e),r&&this.setHistory(r),this.setVolume(""),this.resume();case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"pause",value:function(){this.setPaused(!0),this.oracle.pause(),this.positionInfo.pause()}},{key:"resume",value:function(){this.setPaused(!1),this.oracle.resume(),this.positionInfo.resume(this.wallet,this.config)}},{key:"setWallet",value:function(t){this.wallet=t}},{key:"setConfigs",value:function(t){this.configs=t}},{key:"setConfig",value:function(t){this.config=t}},{key:"setIndex",value:function(t){this.index=t}},{key:"setPosition",value:function(t){t&&(this.position=t)}},{key:"setContract",value:function(t){this.contract=t}},{key:"setHistory",value:function(t){this.history=t}},{key:"setFundingRate",value:function(t){this.fundingRate=t}},{key:"setVolume",value:function(t){this.volume=t}},{key:"setPaused",value:function(t){this.paused=t}},{key:"setUserSelectedDirection",value:function(t){this.userSelectedDirection=t}},{key:"setMargin",value:function(t){if(console.log("before margin ",t),console.log("margin held",this.position.marginHeld),this.isShareOtherSymbolMargin&&(t=Object(_.b)(t).minus(this.position.marginHeld).toString()),console.log("after margin ",t),this.margin=t,this.contract){var e=+t/(+this.index*+this.contract.multiplier*+this.contract.minInitialMarginRatio);isNaN(e)||this.setVolume(Math.abs(e))}}},{key:"volumeDisplay",get:function(){return""===this.volume||"-"===this.volume||"e"===this.volume||isNaN(this.volume)?"":""!==this.margin?+this.volume>Math.abs(+this.position.volume)?parseInt(Math.abs(this.volume)-Math.abs(this.position.volume)):parseInt(Math.abs(this.position.volume)-Math.abs(this.volume)):this.volume}},{key:"amount",get:function(){if(this.index&&this.position&&this.contract&&this.contract.multiplier&&""!==this.volume){var t=Math.abs(this.volume),e=Math.abs(this.volumeDisplay);""===this.margin&&("long"===this.userSelectedDirection?+this.position.volume>0?t+=+this.position.volume:t=Math.abs(this.position.volume)-t:t=+this.position.volume>0?+this.position.volume-t:Math.abs(this.position.volume)+ +t);var n=Math.abs(t)*this.index*this.contract.multiplier,r=+this.position.margin+ +this.position.unrealizedPnl,a=n*this.contract.minInitialMarginRatio,i=a;this.isShareOtherSymbolMargin&&(i=Object(_.b)(a).plus(this.position.marginHeld).toString());var u=(+n/+r).toFixed(1),s=(+r-+i).toFixed(2);return{dynBalance:r,margin:i,available:s>0?s:0,exchanged:(e*+this.contract.multiplier).toFixed(4),leverage:u,marginHeldBySymbol:a}}if(this.position&&this.position.margin){var o=Object(_.b)(this.position.margin).plus(this.position.unrealizedPnl).toString(),c=this.position.marginHeld,p=Object(_.b)(o).minus(c).toString();return{dynBalance:o,margin:c,marginHeldBySymbol:this.position.marginHeldBySymbol,available:p}}return{}}},{key:"direction",get:function(){if(""!==this.margin){if(+this.position.volume>0)return Math.abs(this.volume)>Math.abs(this.position.volume)?"long":"short";if(+this.position.volume<0)return+this.volume>Math.abs(+this.position.volume)?"short":"long"}return 0}},{key:"isShareOtherSymbolMargin",get:function(){return Object(_.b)(this.position.volume).isZero()&&Object(_.b)(this.position.marginHeld).gt(0)}},{key:"loadFundingRate",value:function(){var t=Object(h.a)(v.a.mark((function t(e,n){var r,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}if(r=e&&e.isConnected()&&e.supportChain?e.detail.chainId:n.chainId,!n){t.next=7;break}return t.next=5,Object(x.getFundingRate)(r,n.pool,n.symbolId);case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"fundingRateTip",get:function(){return this.fundingRate&&this.fundingRate.fundingRatePerBlock&&this.config?"Funding  Rate (per block) = ".concat(this.fundingRate.fundingRatePerBlock)+"\n(1 Long contract pays 1 short contract ".concat(this.fundingRate.fundingRatePerBlock," ").concat(this.config.bTokenSymbol," per block)"):""}}]),t}(),F=n(16),R="deri-current-version",D=function(){function t(){Object(g.a)(this,t),this.current=null,Object(O.n)(this,{current:O.p,setCurrent:O.f,isV1:O.g,isV2:O.g});var e=sessionStorage.getItem(R);this.current=e||null}return Object(T.a)(t,[{key:"setCurrent",value:function(t,e){this.current=t,e||sessionStorage.setItem(R,t)}},{key:"switch",value:function(){"v1"===this.current?this.setCurrent("v2"):this.setCurrent("v1")}},{key:"isV1",get:function(){return"v1"===this.current}},{key:"isV2",get:function(){return"v2"===this.current}}]),t}(),q=new j,L=new E,U=new D;F.DeriEnv.set("prod"),F.DeriEnv.set("dev"),u.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(s.a,{children:Object(p.jsx)(f.a,{wallet:q,trading:L,version:U,children:Object(p.jsx)(y,{})})})}),document.getElementById("root"))},58:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return u}));var r=function(){return["https://data-seed-prebsc-1-s1.binance.org:8545/","https://data-seed-prebsc-2-s1.binance.org:8545/","https://data-seed-prebsc-1-s2.binance.org:8545/","https://data-seed-prebsc-2-s2.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/","https://data-seed-prebsc-2-s3.binance.org:8545/"]},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",e=arguments.length>1?arguments[1]:void 0;return"prod"!==t&&"production"!==t||!e?"0x7C1267188379f57d92e640E519151229E1eA5565":"0x824B6238EdCbaCCAF83C3F60C0cEB38bEb7C9e89"},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",e=arguments.length>1?arguments[1]:void 0;return"prod"!==t&&"production"!==t||!e?"0x3c9118C7f9f4ef0Ab5333cD710922dBCCC2d870d":"0xd8137F05c1F432A80525053c473d0e286c4F46f0"},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev",e=arguments.length>1?arguments[1]:void 0;return"prod"!==t&&"production"!==t||!e?"0x7C1267188379f57d92e640E519151229E1eA5565":"0x35b2650eFb799DF4696b292D11b4770a0fFaa7c7"}},62:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return p})),n.d(e,"f",(function(){return l})),n.d(e,"i",(function(){return y})),n.d(e,"e",(function(){return f}));var r=n(25),a=n.n(r);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0==e?a()(t):e>0?a()(t).times(a()("1"+"0".repeat(e))):a()(t).div(a()("1"+"0".repeat(-e)))}function u(t){return t&&"".concat(t.substr(0,6),"...").concat(t.substr(-4))}function s(t){return t&&(+t).toFixed(4)}function o(t,e){return+t===+e}function c(t){return"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd"===t||"0x73feaa1eE314F8c655E354234017bE2193C9E24E"===t}function p(t){return"0xc2EdaD668740f1aA35E4D8f227fB8E17dcA888Cd"===t}function l(t){return"0x73feaa1eE314F8c655E354234017bE2193C9E24E"===t}function d(t){return"".concat(t,"-current-trading-pool")}function y(t,e){if(e){var n=d(t);sessionStorage.setItem(n,JSON.stringify(e))}}function f(t){return JSON.parse(sessionStorage.getItem(d(t)))}},67:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return p})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"f",(function(){return y})),n.d(e,"c",(function(){return f}));var r=n(0),a=n.n(r),i=n(12),u=n(1),s=n(7),o=n(2),c=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var u,c,p,l,d,y,f,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=Object(o.u)(e,n),!(c=u.bTokenAddress)){t.next=12;break}return p=Object(s.m)(e,n),l=Object(s.a)(e,c,n),t.next=6,Promise.all([l.balance(n),l.balance(r),p.getLiquidity(r)]);case 6:return d=t.sent,y=Object(i.a)(d,3),f=y[0],m=y[1],b=y[2],t.abrupt("return",{poolLiquidity:f.toString(),bTokenBalance:m.toString(),shares:b.toString()});case 12:return console.log("no SlpPool address, please check"),t.abrupt("return",{});case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r,i){var u,c,p,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Object(o.u)(e,n),!(p=c.bTokenAddress)){t.next=16;break}return l=Object(s.m)(e,n),Object(s.a)(e,p,n),t.prev=4,t.next=7,l.addLiquidity(r,i);case 7:d=t.sent,u={success:!0,transaction:d},t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),u={success:!1,error:t.t0};case 14:t.next=17;break;case 16:u={success:!1,error:"unable to get bToken address of slp pool"};case 17:return t.abrupt("return",u);case 18:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r,i){var u,c,p,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Object(o.u)(e,n),!(p=c.bTokenAddress)){t.next=16;break}return l=Object(s.m)(e,n),Object(s.a)(e,p,n),t.prev=4,t.next=7,l.removeLiquidity(r,i);case 7:d=t.sent,u={success:!0,transaction:d},t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),u={success:!1,error:t.t0};case 14:t.next=17;break;case 16:u={success:!1,error:"unable to get bToken address of slp pool"};case 17:return t.abrupt("return",u);case 18:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var i,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.u)(e,n),u=i.bTokenAddress,c=Object(s.a)(e,u,n),t.next=4,c.isUnlocked(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var i,u,c,p,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.u)(e,n),u=i.bTokenAddress,c=Object(s.a)(e,u,n),t.prev=2,t.next=5,c.unlock(r);case 5:l=t.sent,p={success:!0,transaction:l},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),p={success:!1,error:t.t0};case 12:return t.abrupt("return",p);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,r){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var i,u,c,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.u)(e,n),u=i.bTokenAddress,c=Object(s.a)(e,u,n),t.next=4,c.balance(r);case 4:return p=t.sent,t.abrupt("return",p.toString());case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},68:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return p})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"f",(function(){return y})),n.d(e,"c",(function(){return f}));var r=n(0),a=n.n(r),i=n(12),u=n(1),s=n(7),o=n(2),c=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var u,c,p,l,d,y,f,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=Object(o.m)(e,n),!(c=u.bTokenAddress)){t.next=12;break}return p=Object(s.b)(e,n),l=Object(s.a)(e,c,n),t.next=6,Promise.all([l.balance(n),l.balance(r),p.getLiquidity(r)]);case 6:return d=t.sent,y=Object(i.a)(d,3),f=y[0],m=y[1],b=y[2],t.abrupt("return",{poolLiquidity:f.toString(),bTokenBalance:m.toString(),shares:b.toString()});case 12:return console.log("no Clp2Pool address, please check"),t.abrupt("return",{});case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r,i){var u,c,p,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Object(o.m)(e,n),!(p=c.bTokenAddress)){t.next=16;break}return l=Object(s.b)(e,n),Object(s.a)(e,p,n),t.prev=4,t.next=7,l.addLiquidity(r,i);case 7:d=t.sent,u={success:!0,transaction:d},t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),u={success:!1,error:t.t0};case 14:t.next=17;break;case 16:u={success:!1,error:"unable to get bToken address of clp2 pool"};case 17:return t.abrupt("return",u);case 18:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r,i){var u,c,p,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Object(o.m)(e,n),!(p=c.bTokenAddress)){t.next=16;break}return l=Object(s.b)(e,n),Object(s.a)(e,p,n),t.prev=4,t.next=7,l.removeLiquidity(r,i);case 7:d=t.sent,u={success:!0,transaction:d},t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),u={success:!1,error:t.t0};case 14:t.next=17;break;case 16:u={success:!1,error:"unable to get bToken address of clp2 pool"};case 17:return t.abrupt("return",u);case 18:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var i,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.m)(e,n),u=i.bTokenAddress,c=Object(s.a)(e,u,n),t.next=4,c.isUnlocked(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),y=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var i,u,c,p,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.m)(e,n),u=i.bTokenAddress,c=Object(s.a)(e,u,n),t.prev=2,t.next=5,c.unlock(r);case 5:l=t.sent,p={success:!0,transaction:l},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),p={success:!1,error:t.t0};case 12:return t.abrupt("return",p);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,r){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(a.a.mark((function t(e,n,r){var i,u,c,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.m)(e,n),u=i.bTokenAddress,c=Object(s.a)(e,u,n),t.next=4,c.balance(r);case 4:return p=t.sent,t.abrupt("return",p.toString());case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},69:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return y})),n.d(e,"f",(function(){return f})),n.d(e,"c",(function(){return m}));var r=n(53),a=n(0),i=n.n(a),u=n(12),s=n(1),o=n(7),c=n(2),p=function(){var t=Object(s.a)(i.a.mark((function t(e,n,r){var a,s,p,l,d,y,f,m,b,v;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.n)(e,n),s=a.lTokenAddress,p=Object(o.c)(e,n),l=Object(o.h)(e,s,n),t.next=5,Promise.all([l.balance(r),l.totalSupply()]);case 5:return d=t.sent,y=Object(u.a)(d,2),f=y[0],m=y[1],t.next=11,p.getStateValues();case 11:return b=t.sent,v=b.liquidity,t.abrupt("return",{totalSupply:m.toString(),poolLiquidity:v.toString(),shares:f.toString(),shareValue:(m.eq(0)?Object(c.c)(0):v.div(m)).toString(),maxRemovableShares:f.toString()});case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),l=function(){var t=Object(s.a)(i.a.mark((function t(e,n,a,u){var s,p,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=Object(c.n)(e,n),!p.bTokenAddress){t.next=16;break}return l=Object(o.c)(e,n),t.prev=3,t.next=6,l.addLiquidity(a,u);case 6:d=t.sent,console.log(d,Object(r.a)(d)),s={success:!0,transaction:d},t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),s={success:!1,error:t.t0};case 14:t.next=17;break;case 16:s={success:!1,error:"unable to get bToken address of clp pool"};case 17:return t.abrupt("return",s);case 18:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),d=function(){var t=Object(s.a)(i.a.mark((function t(e,n,r,a){var u,s,p,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Object(c.n)(e,n),!s.bTokenAddress){t.next=15;break}return p=Object(o.c)(e,n),t.prev=3,t.next=6,p.removeLiquidity(r,a);case 6:l=t.sent,u={success:!0,transaction:l},t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),u={success:!1,error:t.t0};case 13:t.next=16;break;case 15:u={success:!1,error:"unable to get bToken address of clp pool"};case 16:return t.abrupt("return",u);case 17:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),y=function(){var t=Object(s.a)(i.a.mark((function t(e,n,r){var a,u,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.n)(e,n),u=a.bTokenAddress,s=Object(o.a)(e,u,n),t.next=4,s.isUnlocked(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),f=function(){var t=Object(s.a)(i.a.mark((function t(e,n,r){var a,u,s,p,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.n)(e,n),u=a.bTokenAddress,s=Object(o.a)(e,u,n),t.prev=2,t.next=5,s.unlock(r);case 5:l=t.sent,p={success:!0,transaction:l},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),p={success:!1,error:t.t0};case 12:return t.abrupt("return",p);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,r){return t.apply(this,arguments)}}(),m=function(){var t=Object(s.a)(i.a.mark((function t(e,n,r){var a,u,s,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.n)(e,n),u=a.bTokenAddress,s=Object(o.a)(e,u,n),t.next=4,s.balance(r);case 4:return p=t.sent,t.abrupt("return",p.toString());case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},7:function(t,e,n){"use strict";n.d(e,"e",(function(){return X})),n.d(e,"f",(function(){return Z})),n.d(e,"d",(function(){return $})),n.d(e,"l",(function(){return tt})),n.d(e,"a",(function(){return et})),n.d(e,"k",(function(){return nt})),n.d(e,"h",(function(){return rt})),n.d(e,"i",(function(){return at})),n.d(e,"m",(function(){return it})),n.d(e,"c",(function(){return ut})),n.d(e,"b",(function(){return st})),n.d(e,"g",(function(){return ot})),n.d(e,"n",(function(){return ct})),n.d(e,"j",(function(){return pt}));var r=n(120),a=n(12),i=n(55),u=n(0),s=n.n(u),o=n(1),c=n(4),p=n(5),l=n(10),d=n(9),y=n(17),f=n.n(y),m=n(105),b=532731,v=function(){function t(e,n,r){Object(c.a)(this,t),this.chainId=e,this.contractAddress=n,this.web3=r?Object(m.b)(e):Object(m.a)()}return Object(p.a)(t,[{key:"setAccount",value:function(t){return this.accountAddress=t,this}},{key:"setPool",value:function(t){return this.poolAddress=t,this}},{key:"_call",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r,a=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:[],t.next=3,(n=this.contract.methods)[e].apply(n,Object(i.a)(r)).call();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_estimatedGas",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r,a,u,o,c=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:[],r=c.length>2?c[2]:void 0,a=0,u=0;case 4:if(!(u<20)){t.next=18;break}return t.prev=5,t.next=8,(o=this.contract.methods)[e].apply(o,Object(i.a)(n)).estimateGas({from:r});case 8:return a=t.sent,a=parseInt(1.25*a),t.abrupt("break",18);case 13:t.prev=13,t.t0=t.catch(5);case 15:u++,t.next=4;break;case 18:return 0==a&&(a=b),a>b&&(a=b),t.abrupt("return",a);case 21:case"end":return t.stop()}}),t,this,[[5,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_getTransactionReceipt",value:function(t){var e=this;return function n(r,a){e.web3.eth.getTransactionReceipt(t,(function(t,e){t?a(t):null===e?setTimeout((function(){return n(r,a)}),500):!1===e.status?(e.errorMessage="Transaction failed",a(e)):r(e)}))}}},{key:"_transact",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n,r){var u,o,c,p,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this._estimatedGas(e,n,r),this.web3.eth.getGasPrice()]);case 2:return o=t.sent,c=Object(a.a)(o,2),p=c[0],c[1],l=[{from:r,to:this.contractAddress,gas:f.a.utils.numberToHex(p),value:f.a.utils.numberToHex("0"),data:(u=this.contract.methods)[e].apply(u,Object(i.a)(n)).encodeABI()}],t.next=9,window.ethereum.request({method:"eth_sendTransaction",params:l});case 9:return d=t.sent,t.next=12,new Promise(this._getTransactionReceipt(d));case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),t}(),h=n(2),g=n(29),T=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lShares",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"DepositMargin",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"volume",type:"int256"},{indexed:!1,internalType:"int256",name:"cost",type:"int256"},{indexed:!1,internalType:"uint256",name:"margin",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"},{indexed:!1,internalType:"address",name:"liquidator",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"PrepareMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lShares",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"tradeVolume",type:"int256"},{indexed:!1,internalType:"uint256",name:"price",type:"uint256"}],name:"Trade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"WithdrawMargin",type:"event"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"depositMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"depositMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAddresses",outputs:[{internalType:"address",name:"bToken",type:"address"},{internalType:"address",name:"pToken",type:"address"},{internalType:"address",name:"lToken",type:"address"},{internalType:"address",name:"oracle",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getParameters",outputs:[{internalType:"uint256",name:"multiplier",type:"uint256"},{internalType:"uint256",name:"feeRatio",type:"uint256"},{internalType:"uint256",name:"minPoolMarginRatio",type:"uint256"},{internalType:"uint256",name:"minInitialMarginRatio",type:"uint256"},{internalType:"uint256",name:"minMaintenanceMarginRatio",type:"uint256"},{internalType:"uint256",name:"minAddLiquidity",type:"uint256"},{internalType:"uint256",name:"redemptionFeeRatio",type:"uint256"},{internalType:"uint256",name:"fundingRateCoefficient",type:"uint256"},{internalType:"uint256",name:"minLiquidationReward",type:"uint256"},{internalType:"uint256",name:"maxLiquidationReward",type:"uint256"},{internalType:"uint256",name:"liquidationCutRatio",type:"uint256"},{internalType:"uint256",name:"priceDelayAllowance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStateValues",outputs:[{internalType:"int256",name:"cumuFundingRate",type:"int256"},{internalType:"uint256",name:"cumuFundingRateBlock",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"int256",name:"tradersNetVolume",type:"int256"},{internalType:"int256",name:"tradersNetCost",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"symbol_",type:"string"},{internalType:"address[4]",name:"addresses_",type:"address[4]"},{internalType:"uint256[12]",name:"parameters_",type:"uint256[12]"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lShares",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lShares",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"}],name:"trade",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"tradeWithMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256",name:"tradeVolume",type:"int256"},{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"tradeWithMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"withdrawMargin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"withdrawMargin",outputs:[],stateMutability:"nonpayable",type:"function"}],x=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a){var i;return Object(c.a)(this,n),(i=e.call(this,t,r,a)).contract=new i.web3.eth.Contract(T,i.contractAddress),i}return Object(p.a)(n,[{key:"symbol",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("symbol");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getStateValues",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.c)(0),t.prev=1,t.next=4,this._call("getStateValues");case 4:r=t.sent,e={cumuFundingRate:Object(h.f)(r.cumuFundingRate),cumuFundingRateBlock:Object(h.c)(r.cumuFundingRateBlock),liquidity:Object(h.f)(r.liquidity),tradersNetVolume:Object(h.f)(r.tradersNetVolume),tradersNetCost:Object(h.f)(r.tradersNetCost)},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e={cumuFundingRate:n,cumuFundingRateBlock:n,liquidity:n,tradersNetCost:n,tradersNetVolume:n},console.log("getStateValues: ".concat(t.t0));case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"getParameters",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.c)(0),t.prev=1,t.next=4,this._call("getParameters");case 4:r=t.sent,e={multiplier:Object(h.f)(r.multiplier),feeRatio:Object(h.f)(r.feeRatio),minPoolMarginRatio:Object(h.f)(r.minPoolMarginRatio),minInitialMarginRatio:Object(h.f)(r.minInitialMarginRatio),minMaintenanceMarginRatio:Object(h.f)(r.minMaintenanceMarginRatio),minAddLiquidity:Object(h.f)(r.minAddLiquidity),redemptionFeeRatio:Object(h.f)(r.redemptionFeeRatio),fundingRateCoefficient:Object(h.f)(r.fundingRateCoefficient),minLiquidationReward:Object(h.f)(r.minLiquidationReward),maxLiquidationReward:Object(h.f)(r.maxLiquidationReward),liquidationCutRatio:Object(h.f)(r.liquidationCutRatio),priceDelayAllowance:Object(h.c)(r.priceDelayAllowance)},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e={multiplier:n,feeRatio:n,minPoolMarginRatio:n,minInitialMarginRatio:n,minMaintenanceMarginRatio:n,minAddLiquidity:n,redemptionFeeRatio:n,fundingRateCoefficient:n,minLiquidationReward:n,maxLiquidationReward:n,liquidationCutRatio:n,priceDelayAllowance:n},console.log("getParameters: ".concat(t.t0));case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"_getTransactionReceipt",value:function(t){var e=this;return function n(r,a){e.web3.eth.getTransactionReceipt(t,(function(t,e){t?a(t):null==e?setTimeout((function(){return n(r,a)}),500):!1===e.status?(e.errorMessage="Transaction failed",a(e)):r(e)}))}}},{key:"_estimatedGas",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n,r){var a,u,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,u=0;case 2:if(!(u<20)){t.next=16;break}return t.prev=3,t.next=6,(o=this.contract.methods)[e].apply(o,Object(i.a)(n)).estimateGas({from:r});case 6:return a=t.sent,a=parseInt(1.25*a),t.abrupt("break",16);case 11:t.prev=11,t.t0=t.catch(3);case 13:u++,t.next=2;break;case 16:return 0==a&&(a=532731),a>532731&&(a=532731),t.abrupt("return",a);case 19:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_transactPool",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r,u,o,c,p,l,d,y,m,b,v=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:[],u=v.length>2?v[2]:void 0,t.next=4,Object(h.s)(this.chainId,this.contractAddress);case 4:return o=t.sent,c=[o.timestamp,o.price,o.v,o.r,o.s],t.next=8,Promise.all([this._estimatedGas(e,[].concat(Object(i.a)(r),c),u),this.web3.eth.getGasPrice()]);case 8:return p=t.sent,l=Object(a.a)(p,2),d=l[0],y=l[1],console.log("gasPrice ".concat(y/1e9," GW")),m=[{from:u,to:this.contractAddress,gas:f.a.utils.numberToHex(d),value:f.a.utils.numberToHex("0"),data:(n=this.contract.methods)[e].apply(n,Object(i.a)(r).concat(c)).encodeABI()}],t.next=16,window.ethereum.request({method:"eth_sendTransaction",params:m});case 16:return b=t.sent,t.next=19,new Promise(this._getTransactionReceipt(b));case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getFundingRate",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e,n,r,a,i,u,o,c,p,l,d,y,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.k)(this.chainId,this.contractAddress);case 2:return e=t.sent,t.prev=3,t.next=6,this.getStateValues();case 6:return i=t.sent,u=i.tradersNetVolume,o=i.liquidity,t.next=11,this.getParameters();case 11:return c=t.sent,p=c.multiplier,l=c.fundingRateCoefficient,d=c.minPoolMarginRatio,y=[u,e,p,o,l],h.v.apply(void 0,y)?(n="0",r="0"):(r=g.b.apply(void 0,y),n=Object(g.k)(this.chainId,r)),f=[u,e,p,o,d],a=h.v.apply(void 0,f)?"0":g.d.apply(void 0,f),t.abrupt("return",{price:e,multiplier:p.toString(),fundingRate:n,fundingRatePerBlock:r,tradersNetVolume:u.toString(),liquidity:o.toString(),fundingRateCoefficient:l.toString(),liquidityUsed:a,poolMarginRatio:d.toString()});case 22:throw t.prev=22,t.t0=t.catch(3),console.log("PerpetualPool#gerFundingRate():",t.t0),t.t0;case 26:case"end":return t.stop()}}),t,this,[[3,22]])})));return function(){return t.apply(this,arguments)}}()},{key:"depositMargin",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("depositMargin"),t.prev=1,t.next=4,this._transactPool("depositMargin(uint256,uint256,uint256,uint8,bytes32,bytes32)",[n],e);case 4:a=t.sent,r={success:!0,transaction:a},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("here"),r={success:!1,error:t.t0};case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_getBlockInfo",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.web3.eth.getBlock(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getPastEvents",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,a,i,u,o,c,p,l,d,y=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=y.length>1&&void 0!==y[1]?y[1]:{},a=y.length>2&&void 0!==y[2]?y[2]:0,i=y.length>3&&void 0!==y[3]?y[3]:0,u=[],o="56"===this.chainId?1999:4999,a+o>i&&(o=i-a);case 6:if(!(a<=i)){t.next=16;break}return t.next=9,this.contract.getPastEvents(e,{filter:n,fromBlock:a,toBlock:a+o});case 9:c=t.sent,p=Object(r.a)(c);try{for(p.s();!(l=p.n()).done;)d=l.value,u.push(d)}catch(s){p.e(s)}finally{p.f()}(a+=o+1)+o>i&&(o=i-a),t.next=6;break;case 16:return t.abrupt("return",u);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getTimeStamp",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.web3.eth.getBlock(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_calculateFee",value:function(t,e,n,r){return Object(h.c)(t).abs().times(e).times(n).times(r).toString()}}]),n}(v),k=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_upgradedAddress",type:"address"}],name:"deprecate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"deprecated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_evilUser",type:"address"}],name:"addBlackList",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"upgradedAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"maximumFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"},{name:"amount",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_maker",type:"address"}],name:"getBlackListStatus",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"allowed",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"who",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newBasisPoints",type:"uint256"},{name:"newMaxFee",type:"uint256"}],name:"setParams",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"issue",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"redeem",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"basisPointsRate",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"isBlackListed",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_clearedUser",type:"address"}],name:"removeBlackList",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MAX_UINT",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_blackListedUser",type:"address"}],name:"destroyBlackFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_name",type:"string"},{name:"_symbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"amount",type:"uint256"}],name:"Issue",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"amount",type:"uint256"}],name:"Redeem",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"newAddress",type:"address"}],name:"Deprecate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"feeBasisPoints",type:"uint256"},{indexed:!1,name:"maxFee",type:"uint256"}],name:"Params",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_blackListedUser",type:"address"},{indexed:!1,name:"_balance",type:"uint256"}],name:"DestroyedBlackFunds",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_user",type:"address"}],name:"AddedBlackList",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_user",type:"address"}],name:"RemovedBlackList",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"}],w=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a,i){var u;return Object(c.a)(this,n),(u=e.call(this,t,r,i)).poolAddress=a,u.contract=new u.web3.eth.Contract(k,u.contractAddress),u}return Object(p.a)(n,[{key:"isUnlocked",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("allowance",[e,this.poolAddress]);case 2:return n=t.sent,n=Object(h.f)(n),t.abrupt("return",n.gt(0));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"unlock",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transact("approve",[this.poolAddress,h.b],e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"symbol",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("symbol");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"decimals",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("decimals");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("balanceOf",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this._balance(e),this.decimals()]);case 2:return n=t.sent,r=Object(a.a)(n,2),i=r[0],u=r[1],t.abrupt("return",Object(h.c)(i,-u));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),O=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"int256",name:"volume",type:"int256"},{indexed:!1,internalType:"int256",name:"cost",type:"int256"},{indexed:!1,internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{indexed:!1,internalType:"uint256",name:"margin",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],name:"Update",type:"event"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getPosition",outputs:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPosition",outputs:[{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"margin",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"int256",name:"volume",type:"int256"},{internalType:"int256",name:"cost",type:"int256"},{internalType:"int256",name:"lastCumuFundingRate",type:"int256"},{internalType:"uint256",name:"margin",type:"uint256"},{internalType:"uint256",name:"lastUpdateTimestamp",type:"uint256"}],name:"update",outputs:[],stateMutability:"nonpayable",type:"function"}],j=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a,i){var u;return Object(c.a)(this,n),(u=e.call(this,t,r,i)).poolAddress=a,u.contract=new u.web3.eth.Contract(O,u.contractAddress),u}return Object(p.a)(n,[{key:"getPositionInfo",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.prev=1,t.next=4,this._call("getPosition(address)",[e]);case 4:r=t.sent,n={volume:Object(h.f)(r[0]),cost:Object(h.f)(r[1]),lastCumuFundingRate:Object(h.f)(r[2]),margin:Object(h.f)(r[3]),lastUpdateTimestamp:Object(h.c)(r[4])},t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),n={volume:Object(h.c)(0),cost:Object(h.c)(0),lastCumuFundingRate:Object(h.c)(0),margin:Object(h.c)(0),lastUpdateTimestamp:Object(h.c)(0)},console.log("getPositionInfo: ".concat(t.t0));case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"exists",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("exists",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),M=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],A=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a,i){var u;return Object(c.a)(this,n),(u=e.call(this,t,r,i)).poolAddress=a,u.contract=new u.web3.eth.Contract(M,u.contractAddress),u}return Object(p.a)(n,[{key:"balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=h.f,t.next=3,this._call("balanceOf",[e]);case 3:return t.t1=t.sent,n=(0,t.t0)(t.t1),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"totalSupply",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=h.f,t.next=3,this._call("totalSupply");case 3:return t.t1=t.sent,e=(0,t.t0)(t.t1),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(v),C=n(58),I=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"controllers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"data",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"oldController",type:"address"}],name:"delController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"keys",type:"string[]"}],name:"getValues",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"string",name:"key",type:"string"},{internalType:"bytes32",name:"value",type:"bytes32"}],internalType:"structDatabase.Params1[]",name:"pairs",type:"tuple[]"}],name:"setValues",outputs:[],stateMutability:"nonpayable",type:"function"}],P=function(){function t(e,n){Object(c.a)(this,t),this.providerUrl=n,this.contractAddress=e,this.providerUrl&&this._init()}return Object(p.a)(t,[{key:"_init",value:function(){this.web3=new f.a(new f.a.providers.HttpProvider(this.providerUrl)),this.contract=new this.web3.eth.Contract(I,this.contractAddress)}},{key:"updateProviderUrl",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.providerUrl){t.next=7;break}return t.next=3,Object(h.i)(Object(C.c)());case 3:this.providerUrl=t.sent,this._init(),t.next=17;break;case 7:if(t.t0=this.providerUrl,!t.t0){t.next=12;break}return t.next=11,Object(h.d)(this.providerUrl);case 11:t.t0=!t.sent;case 12:if(!t.t0){t.next=17;break}return t.next=15,Object(h.i)(Object(C.c)());case 15:this.providerUrl=t.sent,this._init();case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getValues",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=3;case 1:if(!(r>0)){t.next=18;break}return t.prev=2,t.next=5,this.updateProviderUrl();case 5:return t.next=7,this.contract.methods.getValues(e).call();case 7:n=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),this.providerUrl=null;case 13:if(!n){t.next=15;break}return t.abrupt("break",18);case 15:r-=1,t.next=1;break;case 18:if(0!==r||n){t.next=20;break}throw new Error("database getValues(): exceed max retry 3.");case 20:return t.abrupt("return",n);case 21:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}]),t}(),S=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"controllers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"oldController",type:"address"}],name:"delController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"structDatabase.Params1[]",name:"values",type:"tuple[]"}],name:"setSignature",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"signature",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"bool",name:"valid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"values",type:"address[]"}],name:"unsetSignature",outputs:[],stateMutability:"nonpayable",type:"function"}],B=function(){function t(e,n){Object(c.a)(this,t),this.providerUrl=n,this.contractAddress=e,this.providerUrl&&this._init()}return Object(p.a)(t,[{key:"updateProviderUrl",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.providerUrl){t.next=7;break}return t.next=3,Object(h.i)(Object(C.c)());case 3:this.providerUrl=t.sent,this._init(),t.next=17;break;case 7:if(t.t0=this.providerUrl,!t.t0){t.next=12;break}return t.next=11,Object(h.d)(this.providerUrl);case 11:t.t0=!t.sent;case 12:if(!t.t0){t.next=17;break}return t.next=15,Object(h.i)(Object(C.c)());case 15:this.providerUrl=t.sent,this._init();case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_init",value:function(){this.web3=new f.a(new f.a.providers.HttpProvider(this.providerUrl)),this.contract=new this.web3.eth.Contract(S,this.contractAddress)}},{key:"signature",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=3;case 1:if(!(r>0)){t.next=18;break}return t.prev=2,t.next=5,this.updateProviderUrl();case 5:return t.next=7,this.contract.methods.signature(e).call();case 7:n=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),this.providerUrl=null;case 13:if(!n){t.next=15;break}return t.abrupt("break",18);case 15:r-=1,t.next=1;break;case 18:if(0!==r||n){t.next=20;break}throw new Error("database getValues(): exceed max retry 3.");case 20:return t.abrupt("return",n);case 21:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}]),t}(),_=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"controllers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"data",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"oldController",type:"address"}],name:"delController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"keys",type:"string[]"}],name:"getValues",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"string",name:"key",type:"string"},{internalType:"bytes32",name:"value",type:"bytes32"}],internalType:"structDatabase.Params1[]",name:"pairs",type:"tuple[]"}],name:"setValues",outputs:[],stateMutability:"nonpayable",type:"function"}],E=function(){function t(e,n){Object(c.a)(this,t),this.providerUrl=n,this.contractAddress=e,this.providerUrl&&this._init()}return Object(p.a)(t,[{key:"_init",value:function(){this.web3=new f.a(new f.a.providers.HttpProvider(this.providerUrl)),this.contract=new this.web3.eth.Contract(_,this.contractAddress)}},{key:"updateProviderUrl",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.providerUrl){t.next=7;break}return t.next=3,Object(h.i)(Object(C.c)());case 3:this.providerUrl=t.sent,this._init(),t.next=17;break;case 7:if(t.t0=this.providerUrl,!t.t0){t.next=12;break}return t.next=11,Object(h.d)(this.providerUrl);case 11:t.t0=!t.sent;case 12:if(!t.t0){t.next=17;break}return t.next=15,Object(h.i)(Object(C.c)());case 15:this.providerUrl=t.sent,this._init();case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getValues",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=3;case 1:if(!(r>0)){t.next=18;break}return t.prev=2,t.next=5,this.updateProviderUrl();case 5:return t.next=7,this.contract.methods.getValues(e).call();case 7:n=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),this.providerUrl=null;case 13:if(!n){t.next=15;break}return t.abrupt("break",18);case 15:r-=1,t.next=1;break;case 18:if(0!==r||n){t.next=20;break}throw new Error("database getValues(): exceed max retry 3.");case 20:return t.abrupt("return",n);case 21:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}]),t}(),F=[{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ApproveMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"PrepareMigration",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isMigrated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"destination",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],R=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a){var i;return Object(c.a)(this,n),(i=e.call(this,t,r,a)).contract=new i.web3.eth.Contract(F,i.contractAddress),i}return Object(p.a)(n,[{key:"mintDToken",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r,a,i,u,o,c,p=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=p.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=p[i];return t.next=3,this._estimatedGas("claim",[e].concat(a),e);case 3:return u=t.sent,console.log(u),o=[{from:e,to:this.contractAddress,gas:f.a.utils.numberToHex(u),value:f.a.utils.numberToHex("0"),data:(n=this.contract.methods).claim.apply(n,[e].concat(a)).encodeABI()}],t.next=8,window.ethereum.request({method:"eth_sendTransaction",params:o});case 8:return c=t.sent,t.next=11,new Promise(this._getTransactionReceipt(c));case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),D=[{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"address",name:"miningVault_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"}],name:"Claim",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint8",name:"v1",type:"uint8"},{internalType:"bytes32",name:"r1",type:"bytes32"},{internalType:"bytes32",name:"s1",type:"bytes32"},{internalType:"uint8",name:"v2",type:"uint8"},{internalType:"bytes32",name:"r2",type:"bytes32"},{internalType:"bytes32",name:"s2",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"miningVault",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setNewController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],q=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a){var i;return Object(c.a)(this,n),(i=e.call(this,t,r,a)).contract=new i.web3.eth.Contract(D,i.contractAddress),i}return Object(p.a)(n,[{key:"mint",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r,a,i,u,o,c,p=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=p.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=p[i];return t.next=3,this._estimatedGas("claim",[e].concat(a),e);case 3:return u=t.sent,o=[{from:e,to:this.contractAddress,gas:f.a.utils.numberToHex(u),value:f.a.utils.numberToHex("0"),data:(n=this.contract.methods).claim.apply(n,[e].concat(a)).encodeABI()}],t.next=7,window.ethereum.request({method:"eth_sendTransaction",params:o});case 7:return c=t.sent,t.next=10,new Promise(this._getTransactionReceipt(c));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),L=n(87),U=n(16),N=[{inputs:[{internalType:"contractSushiToken",name:"_sushi",type:"address"},{internalType:"address",name:"_devaddr",type:"address"},{internalType:"uint256",name:"_sushiPerBlock",type:"uint256"},{internalType:"uint256",name:"_startBlock",type:"uint256"},{internalType:"uint256",name:"_bonusEndBlock",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"BONUS_MULTIPLIER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"contractIERC20",name:"_lpToken",type:"address"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"bonusEndBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_devaddr",type:"address"}],name:"dev",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"devaddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_from",type:"uint256"},{internalType:"uint256",name:"_to",type:"uint256"}],name:"getMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"massUpdatePools",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"migrate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrator",outputs:[{internalType:"contractIMigratorChef",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"address",name:"_user",type:"address"}],name:"pendingSushi",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolInfo",outputs:[{internalType:"contractIERC20",name:"lpToken",type:"address"},{internalType:"uint256",name:"allocPoint",type:"uint256"},{internalType:"uint256",name:"lastRewardBlock",type:"uint256"},{internalType:"uint256",name:"accSushiPerShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"set",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contractIMigratorChef",name:"_migrator",type:"address"}],name:"setMigrator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"sushi",outputs:[{internalType:"contractSushiToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"sushiPerBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAllocPoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"updatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rewardDebt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],V=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a){var i;return Object(c.a)(this,n),(i=e.call(this,t,r,a)).contract=new i.web3.eth.Contract(N,i.contractAddress),i}return Object(p.a)(n,[{key:"addLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[152,Object(h.B)(n)],t.next=3,this._transact("deposit",r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[152,Object(h.B)(n)],t.next=3,this._transact("withdraw",r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("userInfo",[152,e]);case 2:if(!(n=t.sent)||!n.amount){t.next=7;break}return t.abrupt("return",Object(h.f)(n.amount));case 7:return console.log("the amount is not exist "),t.abrupt("return","0");case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),W=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"mintAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bAmount",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"target",type:"address"}],name:"PrepareMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"lAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"removeAmount",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{inputs:[{internalType:"uint256",name:"bAmount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAddresses",outputs:[{internalType:"address",name:"bToken",type:"address"},{internalType:"address",name:"lToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getParameters",outputs:[{internalType:"uint256",name:"minAddLiquidity",type:"uint256"},{internalType:"uint256",name:"redemptionFeeRatio",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStateValues",outputs:[{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"symbol_",type:"string"},{internalType:"address[2]",name:"addresses_",type:"address[2]"},{internalType:"uint256[2]",name:"parameters_",type:"uint256[2]"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newPool",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lAmount",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],H=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a){var i;return Object(c.a)(this,n),(i=e.call(this,t,r,a)).contract=new i.web3.eth.Contract(W,i.contractAddress),i}return Object(p.a)(n,[{key:"addLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[Object(h.B)(n)],t.next=3,this._transact("addLiquidity",r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[Object(h.B)(n)],t.next=3,this._transact("removeLiquidity",r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getParameters",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getParameters");case 2:return e=t.sent,t.abrupt("return",{minAddLiquidity:Object(h.f)(e.minAddLiquidity),redemptionFeeRatio:Object(h.f)(e.redemptionFeeRatio)});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getStateValues",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getStateValues");case 2:return e=t.sent,t.abrupt("return",{liquidity:Object(h.f)(e)});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("getStateValues");case 2:if(!(e=t.sent)||!e.liquidity){t.next=5;break}return t.abrupt("return",Object(h.f)(e.liquidity));case 5:throw new Error("unable to get liquidity of this clp pool ".concat(this.poolAddress));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(v),G=[{inputs:[{internalType:"contract CakeToken",name:"_cake",type:"address"},{internalType:"contract SyrupBar",name:"_syrup",type:"address"},{internalType:"address",name:"_devaddr",type:"address"},{internalType:"uint256",name:"_cakePerBlock",type:"uint256"},{internalType:"uint256",name:"_startBlock",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"BONUS_MULTIPLIER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"contract IBEP20",name:"_lpToken",type:"address"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cake",outputs:[{internalType:"contract CakeToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"cakePerBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_devaddr",type:"address"}],name:"dev",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"devaddr",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"enterStaking",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_from",type:"uint256"},{internalType:"uint256",name:"_to",type:"uint256"}],name:"getMultiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"leaveStaking",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"massUpdatePools",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"migrate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrator",outputs:[{internalType:"contract IMigratorChef",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"address",name:"_user",type:"address"}],name:"pendingCake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolInfo",outputs:[{internalType:"contract IBEP20",name:"lpToken",type:"address"},{internalType:"uint256",name:"allocPoint",type:"uint256"},{internalType:"uint256",name:"lastRewardBlock",type:"uint256"},{internalType:"uint256",name:"accCakePerShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_allocPoint",type:"uint256"},{internalType:"bool",name:"_withUpdate",type:"bool"}],name:"set",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IMigratorChef",name:"_migrator",type:"address"}],name:"setMigrator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"syrup",outputs:[{internalType:"contract SyrupBar",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalAllocPoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"multiplierNumber",type:"uint256"}],name:"updateMultiplier",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"}],name:"updatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rewardDebt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_pid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],z=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a){var i;return Object(c.a)(this,n),(i=e.call(this,t,r,a)).contract=new i.web3.eth.Contract(G,i.contractAddress),i}return Object(p.a)(n,[{key:"addLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[391,Object(h.B)(n)],t.next=3,this._transact("deposit",r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[391,Object(h.B)(n)],t.next=3,this._transact("withdraw",r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getLiquidity",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("userInfo",[391,e]);case 2:if(!(n=t.sent)||!n.amount){t.next=7;break}return t.abrupt("return",Object(h.f)(n.amount));case 7:return console.log("the amount is not exist "),t.abrupt("return","0");case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),J=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldController",type:"address"},{indexed:!1,internalType:"address",name:"newController",type:"address"}],name:"ChangeController",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a,i){var u;return Object(c.a)(this,n),(u=e.call(this,t,r,i)).poolAddress=a,u.contract=new u.web3.eth.Contract(J,u.contractAddress),u}return Object(p.a)(n,[{key:"isUnlocked",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("allowance",[e,this.poolAddress]);case 2:return n=t.sent,t.abrupt("return",Object(h.f)(n).gt(0));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"unlock",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._transact("approve",[this.poolAddress,h.b],e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"decimals",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("decimals");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call("balanceOf",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=Object(o.a)(s.a.mark((function t(e){var n,r,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this._balance(e),this.decimals()]);case 2:return n=t.sent,r=Object(a.a)(n,2),i=r[0],u=r[1],t.abrupt("return",Object(h.c)(i,-u));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(v),K=[{inputs:[{internalType:"address",name:"tokenAddress_",type:"address"},{internalType:"bool",name:"allowMintBurn_",type:"bool"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ApproveMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fromChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"fromWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"toChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"toWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"ExecuteMigration",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fromChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"fromWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"toChainId",type:"uint256"},{indexed:!1,internalType:"address",name:"toWormhole",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Freeze",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"migrationTimestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"source",type:"address"},{indexed:!1,internalType:"address",name:"destination",type:"address"}],name:"PrepareMigration",type:"event"},{inputs:[],name:"CLAIM_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"allowMintBurn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"approveMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"chainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChainId",type:"uint256"},{internalType:"address",name:"fromWormhole",type:"address"},{internalType:"uint256",name:"fromNonce",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"source",type:"address"}],name:"executeMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"toChainId",type:"uint256"},{internalType:"address",name:"toWormhole",type:"address"}],name:"freeze",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isMigrated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationDestination",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"migrationTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"destination",type:"address"},{internalType:"uint256",name:"graceDays",type:"uint256"}],name:"prepareMigration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Q=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t,r,a){var i;return Object(c.a)(this,n),(i=e.call(this,t,r,a)).contract=new i.web3.eth.Contract(K,i.contractAddress),i}return Object(p.a)(n,[{key:"freeze",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n,r){var a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(h.o)(r),i=a.wormholeAddress,t.abrupt("return",this._transact("freeze",[Object(h.B)(n),r,i],e));case 2:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"mintDeri",value:function(){var t=Object(o.a)(s.a.mark((function t(e,n,r,a,i,u,o,c){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._transact("claim",[n,r,a,i,u,o,c],e));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a,i,u,s,o){return t.apply(this,arguments)}}()}]),n}(v),X=function(){var t={};return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(U.getDBAddressConfig)(L.a.get(),e),r=n;if(Object.keys(t).includes(r))return t[r];var a=new P(n);return t[r]=a,a}}(),Z=function(){var t={};return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(U.getDBWormholeAddressConfig)(L.a.get(),e),r=n;if(Object.keys(t).includes(r))return t[r];var a=new B(n);return t[r]=a,a}}(),$=function(){var t={};return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(U.getDBAirdropAddressConfig)(L.a.get(),e),r=n;if(Object.keys(t).includes(r))return t[r];var a=new E(n);return t[r]=a,a}}(),tt=function(){var t={};return function(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r=a?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(r))return t[r];var i=new x(e,n,a);return t[r]=i,i}}(),et=function(){var t={};return function(e,n,r){var a,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(a=i?"".concat(e,".").concat(n,".").concat(r,".isProvider"):"".concat(e,".").concat(n,".").concat(r),Object.keys(t).includes(a))return t[a];var u=new w(e,n,r,i);return t[a]=u,u}}(),nt=function(){var t={};return function(e,n,r){var a,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(a=i?"".concat(e,".").concat(n,".").concat(r,".isProvider"):"".concat(e,".").concat(n,".").concat(r),Object.keys(t).includes(a))return t[a];var u=new j(e,n,r,i);return t[a]=u,u}}(),rt=function(){var t={};return function(e,n,r){var a,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(a=i?"".concat(e,".").concat(n,".").concat(r,".isProvider"):"".concat(e,".").concat(n,".").concat(r),Object.keys(t).includes(a))return t[a];var u=new A(e,n,r,i);return t[a]=u,u}}(),at=function(){var t={};return function(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r=a?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(r))return t[r];var i=new R(e,n,a);return t[r]=i,i}}(),it=function(){var t={};return function(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r=a?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(r))return t[r];var i=new V(e,n,a);return t[r]=i,i}}(),ut=function(){var t={};return function(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r=a?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(r))return t[r];var i=new H(e,n,a);return t[r]=i,i}}(),st=function(){var t={};return function(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r=a?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(r))return t[r];var i=new z(e,n,a);return t[r]=i,i}}(),ot=function(){var t={};return function(e,n,r){var a,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(a=i?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(a))return t[a];var u=new Y(e,n,r,i);return t[a]=u,u}}(),ct=function(){var t={};return function(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r=a?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(r))return t[r];var i=new Q(e,n,a);return t[r]=i,i}}(),pt=function(){var t={};return function(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r=a?"".concat(e,".").concat(n,".isProvider"):"".concat(e,".").concat(n),Object.keys(t).includes(r))return t[r];var i=new q(e,n,a);return t[r]=i,i}}()},87:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){var t="dev";return{get:function(){return t},set:function(e){if("dev"!==e&&"prod"!==e&&"production"!==e)throw new Error("please use 'dev' or 'prod' for DeriEnv");t=e}}}()}},[[567,6,7]]]);
//# sourceMappingURL=main.10556d1f.chunk.js.map