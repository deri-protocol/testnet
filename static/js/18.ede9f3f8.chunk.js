(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[18],{1229:function(e,t,a){"use strict";var n,i,c=a(72),s=a(192),l=a(56),o=a(14),r=a(62),d=a(6),b=(a(68),a(1280)),u=a(51),j=a(20),p=a(16),h=a(5),x=["allowZero","wallet","closeShowLoadingEffectAfterLoaded","defaultValue"],m=Object(u.a)(b.a)(n||(n=Object(r.a)(["\n  width : ","px;\n"])),(function(e){return e.width})),v=u.a.div(i||(i=Object(r.a)(["\n  width : ",";\n  height : ",";\n"])),(function(e){return/px$/.test(e.width)?e.width:"".concat(e.width,"px")}),(function(e){return/px$/.test(e.height)?e.height:"".concat(e.height,"px")}));t.a=function(e){var t=Object(d.useState)(Object(h.jsx)("span",{className:"loading-line"})),a=Object(o.a)(t,2),n=a[0],i=a[1],r=Object(d.useState)(!0),b=Object(o.a)(r,2),u=b[0],f=b[1],O=function(){var t=e.allowZero;return"object"!==Object(l.a)(e.value)&&void 0!==e.value&&""!==e.value&&!isNaN(e.value)&&"NaN"!==e.value||0===Math.abs(e.value)&&!0===t},g=function(e){return e&&e.replace(/\.$/,"")};return Object(d.useEffect)((function(){var t=e.allowZero,a=(e.wallet,e.closeShowLoadingEffectAfterLoaded),n=e.defaultValue,l=void 0===n?"--":n,o=Object(s.a)(e,x);if(O())o.decimalScale>0&&o.value&&/\d+\.0*[1-9]+/.test(o.value)&&0===+Object(p.bg)(o.value).toFixed(+o.decimalScale||2)&&(o.decimalScale=Object(j.d)(Math.abs(o.value))+2),(-1===o.decimalScale||0===+o.value&&t)&&delete o.decimalScale,o.value=Object(j.J)(o.value),o.value&&/\d+.9{6}/.test(o.value)&&(o.value=(+o.value).toFixed(5)),i(Object(h.jsx)(m,Object(c.a)(Object(c.a)({},o),{},{renderText:g,displayType:"text",fixedDecimalScale:!0,thousandSeparator:!0})));else if(u){var r=e.width,d=e.height;i(Object(h.jsx)(v,{className:"loading-line",width:r,height:d})),a&&f(!1)}var b=window.setTimeout((function(){O()||i(l)}),6e4);return function(){clearTimeout(b)}}),[e.value,e.decimalScale,e.suffix]),n}},1237:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n,i=a(62),c=a(51),s=a(1313),l=a.n(s),o=a(145),r=a(20),d=a(1287),b=a(5),u=c.a.div(n||(n=Object(i.a)(["\n  display:",";\n  .text {\n    border-bottom : 1px dashed #93A1B8;\n    width : max-content;\n    cursor : pointer;\n    display:","\n  }\n  \n  .__react_component_tooltip.tooltip.show {\n    font-weight : "," \n  }\n"])),(function(e){return e.block}),(function(e){return e.block}),(function(e){return e.isWin?400:600}));function j(e){var t=e.text,a=e.id,n=void 0===a?String((new Date).getTime())+Math.random():a,i=e.tip,c=e.multiline,s=e.html,j=e.className,p=e.element,h=void 0===p?"":p,x=e.block,m=void 0===x?"block":x,v=e.width,f=void 0===v?"auto":v,O=e.children,g=e.tiggerEvent;return Object(b.jsxs)(u,{className:j,block:m,isWin:d.isWindows,children:[Object(b.jsx)("div",{className:"text","data-for":n,"data-tip":s?l.a.renderToString(h):i,"data-event":Object(r.y)()?"click":g,"data-html":s,children:t||O}),i&&Object(b.jsx)(o.a,{id:n,width:f,padding:"12",place:"bottom",overridePosition:function(e,t,a,n,i,c,s,l){var o=a.getBoundingClientRect(),r=n.getBoundingClientRect(),d=o.x,b=o.y,u=o.height,j=o.width;e.left,e.top;return d+r.width/2>document.documentElement.clientWidth?d-=Math.abs(j-r.width):d-(r.width-j)/2<0?d-=j:d-=(r.width-j)/2,b+u+r.height>=document.documentElement.clientHeight?b=b+u-r.height:b+=u,d<0&&(d=0),b<0&&(b=0),{top:b,left:d}},html:s,borderRadius:8,multiline:c})]})}},1272:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n,i=a(14),c=a(62),s=a(6),l=a(168),o=a(51),r=a(5),d=o.a.div(n||(n=Object(c.a)(["\n    display : flex;\n    width: 100%;\n    justify-content: space-between;\n  "])));function b(e){var t=e.groups,a=void 0===t?["25%","50%","75%","100%"]:t,n=e.selectedBorderColor,c=e.defaultBorderColor,o=e.onChange,b=e.defaultValue,u=e.outline,j=e.outlineColor,p=e.width,h=e.height,x=e.bgColor,m=e.className,v=e.disabled,f=e.canUnselected,O=void 0===f||f,g=Object(s.useState)(b),k=Object(i.a)(g,2),y=k[0],w=k[1];return Object(s.useEffect)((function(){w(b)}),[b]),Object(r.jsx)(d,{className:m,children:a.map((function(e,t){return Object(r.jsx)(l.a,{label:e,selectedBorderColor:n,isSelected:e===y,disabled:v,outline:u,bgColor:x,className:"g-button",defaultBorderColor:c,outlineColor:j,width:p,height:h,onClick:function(){var t;(t=e)!==y?(w(t),o&&o(t)):O&&t===y?(w(""),o&&o("")):w(t)}},t)}))})}},1300:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(6),i=a(51),c=a(16),s=a(1237),l=a(5);const o=i.a.div`
display : flex;
font-size : 14px;
align-items : center;
background: rgba(85, 119, 253, 0.1);
border-radius: 4px;
justify-content: space-between;
input {
  background: transparent;
  border-radius: 4px;
  // min-width: 240px;
  border: 0;
  width : ${e=>e.inputWidth};
  height: ${e=>e.inputHeight};
  color : #E0ECFF;
  font-size : 18px;
  padding-left: 16px;
}
input:focus {
  outline: none;
}
.unit {
  margin-right: ${e=>e.unitPadding};
}
`;function r(e){let{value:t,unit:a,unitTip:i,max:r,step:d,onChange:b,styles:u={},disableNegtive:j=!0,focus:p,placeholder:h="",unitPadding:x="24px",minTradeVolume:m,decimal:v=2,readOnly:f,inputWidth:O="50%",inputHeight:g="56px",className:k,disabled:y=!1,onBlur:w,onFocus:N}=e;const S=Object(n.useRef)(null);return Object(n.useEffect)((()=>{S.current.setCustomValidity(""),S.current&&p&&S.current.focus()}),[p]),Object(l.jsxs)(o,{unitPadding:x,inputWidth:O,inputHeight:g,className:k,style:{...u},children:[Object(l.jsx)("input",{placeholder:h,type:"number",onBlur:w,onFocus:N,disabled:y,value:t,step:d,ref:S,onChange:e=>{const t=new RegExp(`\\d+\\.\\d{0,${v}}$`),{value:a}=e.target;if(r&&Object(c.bg)(a).gt(r))b&&b(r);else if(j&&(a<0||isNaN(a)))b&&b("");else if(a)if(m>=1)if(a/m>=1)b&&b(Object(c.bg)(a).div(m).integerValue()*m);else{const e=a*m;b&&b(e)}else if(/\d+\./.test(a)&&!t.test(a)){const e=a.substring(0,a.indexOf(".")+1+v);b&&b(e)}else b&&b(a);else b&&b(a)},readOnly:f}),Object(l.jsx)("div",{className:"unit",children:i?Object(l.jsx)(s.a,{tip:i,text:a}):a})]})}},1314:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n,i=a(14),c=a(62),s=a(51),l=a(6),o=a(28),r=a(5),d=s.a.div(n||(n=Object(c.a)(["\n    cursor: pointer;\n    width:","px;\n    height:","px;\n    display:flex;\n    .tab-left.inactive{\n      border-radius:0px 0px 4px 0px;\n    }\n    .tab-right.inactive{\n      border-radius:0px 0px 0px 4px;\n    }\n    .tab-left.active{\n      border-radius:0px 4px 0px 0px;\n      ",";\n    }\n    .tab-right.active{\n      border-radius:4px 0px 0px 0px;\n      ",";\n    }\n    .inactive,.active{\n      width:50%;\n      box-sizing: content-box;\n      font-size:","px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      img{\n        margin-right:","px\n      }\n    }\n    .inactive{\n      background:",";\n      ","\n    }\n    .active {\n      color: ",";\n      background : ",";\n      ",";\n    }\n    .icon-tab{\n      margin-right:20px;\n      width:25px;\n      height:25px;\n    }\n  "])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.borderR}),(function(e){return e.borderL}),(function(e){return e.size}),(function(e){return e.iconMarginRight}),(function(e){return e.inactiveBgColor}),(function(e){return e.borderB}),(function(e){return e.activeFontColor}),(function(e){return e.activeBgColor}),(function(e){return e.borderT}));function b(e){var t=e.tabSet,a=e.inactiveBgColor,n=e.iconMarginRight,c=e.activeBgColor,s=(e.icon,e.className),b=e.width,u=void 0===b?238:b,j=e.height,p=void 0===j?47:j,h=e.size,x=void 0===h?16:h,m=e.borderTop,v=void 0!==m&&m,f=e.borderBottom,O=void 0!==f&&f,g=e.divider,k=void 0!==g&&g,y=e.activeIndex,w=void 0===y?0:y,N=Object.keys(t),S=Object(l.useState)(N[w]),T=Object(i.a)(S,2),C=T[0],I=T[1],E=Object(l.useState)(),q=Object(i.a)(E,2),F=q[0],_=q[1],B=Object(l.useState)(),L=Object(i.a)(B,2),$=L[0],A=L[1],H=Object(l.useState)(),D=Object(i.a)(H,2),U=D[0],R=D[1],z=Object(l.useState)(),P=Object(i.a)(z,2),Z=P[0],V=P[1],W=Object(l.useState)(),M=Object(i.a)(W,2),J=M[0],X=M[1],K=Object(l.useState)(),Y=Object(i.a)(K,2),G=Y[0],Q=Y[1];return Object(l.useEffect)((function(){var e=Object.keys(t);I(e[w])}),[t,w]),Object(l.useEffect)((function(){var e=Object.keys(t),a=C||e[w];if(t[a]){_(t[a].style);var n=v?"border-top:1px solid ".concat(t[a].borderColor):"border-top:0",i=O?"border-bottom:1px solid ".concat(t[a].borderColor):"border-bottom:0",c=k?"border-left:1px solid ".concat(t[a].borderColor):"border-left:0",s=k?"border-right:1px solid ".concat(t[a].borderColor):"border-right:0",l=t[a].fontColor?t[a].fontColor:"#FFFFFF";A(n),R(c),V(i),X(s),Q(l)}}),[t,C]),Object(r.jsxs)("div",{style:F,className:s,children:[Object(r.jsx)(d,{className:"tab-header",iconMarginRight:n,width:u,height:p,activeFontColor:G,activeBgColor:c,inactiveBgColor:a,size:x,borderT:$,borderB:Z,borderL:U,borderR:J,children:N.map((function(e,a){return Object(r.jsxs)("div",{className:"".concat(t[e].direction||t[e].className,e===C?" active":" inactive"),onClick:function(t){return function(e,t){I(e)}(e)},children:[t[e].icon?Object(r.jsx)(o.a,{width:t[e].iconWidth,height:t[e].iconHeight,token:e===C?t[e].icon:t[e].inicon}):"","  ",e]},a)}))}),t[C]?t[C].content:""]})}},1353:function(e,t,a){"use strict";var n=a(6),i=a(168),c=a(46),s=a(126),l=a(37),o=a(16),r=a(20),d=(a(1493),a(5));function b(){return Object(d.jsx)("div",{class:"sleepContentView",children:Object(d.jsx)("div",{class:"circle"})})}var u=a(28);a(1494);t.a=Object(c.b)("wallet")(Object(c.c)((function(e){let{lang:t,subject:a,wallet:c,pool:j={},ignoreApprove:p,bTokenId:h,bToken:x,icon:m,label:v,onClick:f,isReady:O,disabled:g=!0,statusCallback:k,alert:y,...w}=e;const[N,S]=Object(n.useState)(!0),[T,C]=Object(n.useState)(v),[I,E]=Object(n.useState)(!1),[q,F]=Object(n.useState)(!1),[_,B]=Object(n.useState)(!1),[L,$]=Object(n.useState)(!1),[A,H]=Object(n.useState)(m),D=Object(n.useCallback)((async(e,t)=>{let a;if(e.detail&&t.address)if(s.a.isOpen&&await o.openConfigListCache.update(),Object(r.x)(t.address))a=await l.a.request("isLpUnlocked",[e.detail.chainId,t.address,e.detail.account]);else if(h||x){const n=[e.detail.chainId,t.address,e.detail.account,h||x];a=await l.a.request("isUnlocked",n)}return a}),[x,h]),U=Object(n.useCallback)((async()=>{if(c&&j){let e;if(s.a.isOpen&&await o.openConfigListCache.update(),Object(r.x)(j.address))e=await l.a.request("unlockLp",[c.detail.chainId,j.address,c.detail.account],{write:!0,subject:t.approve});else{let a=[c.detail.chainId,j.address,c.detail.account,h||x];e=await l.a.request("unlock",a,{write:!0,subject:Object(r.h)(t.approve.toLowerCase())})}if(e){if(e.status)y.success(`Approve ${x}`,{timeout:8e3,isTransaction:!0,transactionHash:e.transactionHash,link:`${c.blockExploreUrl}/tx/${e.transactionHash}`,title:"Approve Executed"});else{if(""===e.transactionHash)return!1;y.error(`Transaction Failed ${e.error}`,{timeout:3e5,isTransaction:!0,transactionHash:e.transactionHash,link:`${c.blockExploreUrl}/tx/${e.transactionHash}`,title:"Approve Failed"})}return e.status}}}),[j,c,h,x]);return Object(n.useEffect)((async()=>{j&&c.detail&&c.detail.account&&j.bTokens&&t&&(c.isConnected()?await D(c,j)?(E(!1),C(v),H(m),k&&k(!1)):(E(!0),H(m),k&&k(!0)):(C(t["connect-wallet"]),H(null)))}),[j,c,t,x,h]),Object(n.useEffect)((()=>{S(!g)}),[g]),Object(n.useEffect)((()=>{c&&j&&j.address&&(c.setAddress(j.address),j.isV3||j.isV3Lite?c.setBToken(x):c.setBTokenId(h))}),[c,j,h,x]),Object(d.jsxs)("div",{children:[Object(d.jsx)(i.a,{...w,disabled:!N,label:T,onClick:async e=>{if(j&&c&&c.detail){if($(!0),c.isConnected()){if(p||await D(c,j))return H(m),f(e);{H(m);let e=await U();if(e){F(!0),await f()&&B(!0),k&&k(!1)}else $(!1),k&&k(!0);return e}}return H(null),c.connect()}},icon:A}),!p&&I&&N&&Object(d.jsxs)("div",{className:"init-approve",children:[Object(d.jsxs)("div",{className:"step-approve",children:[!L&&Object(d.jsx)("div",{className:"step-one",children:"1"}),L&&Object(d.jsx)("div",{className:"pending",children:q?Object(d.jsx)(u.a,{token:"finish"}):Object(d.jsx)(b,{})}),Object(d.jsx)("div",{className:q?"approve-text finish-text":"approve-text",children:t.approve})]}),Object(d.jsx)("div",{className:q?"step-hr finish":"step-hr"}),Object(d.jsxs)("div",{className:"step-transaction",children:[!q&&Object(d.jsx)("div",{className:"step-two",children:"2"}),L&&q&&Object(d.jsx)("div",{className:"pending",children:_?Object(d.jsx)(u.a,{token:"finish"}):Object(d.jsx)(b,{})}),Object(d.jsx)("div",{className:_?"transaction-text finish-text":"transaction-text",children:T})]})]})]})})))},1365:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n,i=a(62),c=a(51),s=(a(6),a(5)),l=c.a.div(n||(n=Object(i.a)(["\nwidth:","%;\nmax-width:100%;\nheight:10px;\nbackground-color: #5577FD;\n"])),(function(e){return e.width}));function o(e){var t=e.startTimestamp,a=e.nowTimestamp,n=e.endTimestamp,i=parseInt((a-t)/(n-t)*100);return Object(s.jsx)("div",{className:"time-slider",children:Object(s.jsx)(l,{width:i})})}},1367:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n,i=a(14),c=a(62),s=a(6),l=a(51),o=a(475),r=a(5),d=l.a.div(n||(n=Object(c.a)(["\n  .search-token{\n  width: ","px;\n  height: ","px;\n  background: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding:0 24px;\n  border-radius:4px;\n  img{\n    width:18px;\n    height:18px;\n  }\n  .search-input{\n    border: 0;\n    width:100%;\n    height: 100%;\n    background:transparent;\n    outline-style: none;\n    color: #FFFFFF;\n    font-size: 18px;\n    border-radius: 4px;\n  }\n}\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.bgColor}));function b(e){var t=e.list,a=e.onChange,n=e.width,c=void 0===n?"320":n,l=e.height,b=void 0===l?"48":l,u=e.bgColor,j=void 0===u?"rgba(85, 119, 253, 0.1)":u,p=e.searchName,h=void 0===p?"bTokenSymbol":p,x=e.className,m=e.placeholder,v=void 0===m?"Search":m,f=(e.onFocus,e.onBlur,Object(s.useState)("")),O=Object(i.a)(f,2),g=O[0],k=O[1],y=Object(s.useState)(0),w=Object(i.a)(y,2),N=(w[0],w[1]),S=Object(s.useRef)([]);return Object(s.useEffect)((function(){if(g){var e=g.toLocaleUpperCase();0===S.current.length&&(S.current=t,N(t.length));var n=S.current.filter((function(t){return t[h]&&t[h].toUpperCase().indexOf(e)>=0}));a(n,e)}else a(S.current)}),[g]),Object(s.useEffect)((function(){0===S.current.length&&N(t.length)}),[t]),Object(r.jsx)(d,{width:c,height:b,bgColor:j,className:x,children:Object(r.jsxs)("div",{className:"search-token",children:[Object(r.jsx)("input",{type:"text",className:"search-input",placeholder:v,value:g,onChange:function(e){!function(e){var t=e.target.value;k(t)}(e)}}),Object(r.jsx)("img",{src:o.default,alt:""})]})})}},1406:function(e,t,a){"use strict";t.a=a.p+"static/media/staked.45c27f0b.svg"},1485:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a(2),i=a(14),c=a(1),s=a.n(c),l=a(6),o=a(168),r=a(1365),d=a(171),b=a(169),u=a(1229),j=a(37),p=a(20),h=(a(1486),a(5));function x(e){var t=e.lang,a=e.getLang,c=e.poolShow,x=void 0===c||c,m=e.wallet,v=void 0===m?{}:m,f=Object(l.useState)(""),O=Object(i.a)(f,2),g=O[0],k=O[1],y=Object(l.useState)(0),w=Object(i.a)(y,2),N=w[0],S=w[1],T=Object(b.c)(),C=Object(l.useState)(0),I=Object(i.a)(C,2),E=I[0],q=I[1],F=Object(l.useState)(0),_=Object(i.a)(F,2),B=_[0],L=_[1],$=Object(l.useState)({}),A=Object(i.a)($,2),H=A[0],D=A[1],U=Object(l.useState)(!1),R=Object(i.a)(U,2),z=R[0],P=R[1],Z=Object(l.useState)(""),V=Object(i.a)(Z,2),W=V[0],M=V[1],J=Object(d.a)(H.chainId);Object(l.useEffect)((function(){var e;return e=window.setInterval((function(){var e=28800,a=parseInt(Date.now()/1e3),n=parseInt(a/e)*e,i=n+e-a,c=parseInt(i/3600),s=parseInt(i%3600/60),l=parseInt(i%60);S(n),q(n+e),L(a),k("".concat(c," ").concat(t.h," ").concat(s," ").concat(t.m," ").concat(l," ").concat(t.s))}),1e3),function(){e&&clearInterval(e)}}),[]);var X=function(){var e=Object(n.a)(s.a.mark((function e(){var t,a,n,i,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.isConnected()){e.next=10;break}return e.next=3,j.a.request("getUserInfoAll",[v.detail.account]);case 3:t=e.sent,a=(+t.total).toFixed(2),n=t.valid?(+t.amount).toFixed(2):0,i=t.lp,c=(+t.trade).toFixed(2),l=t.chainId,D({claimed:a,unclaimed:n,harvestDeriLp:i,harvestDeriTrade:c,chainId:l});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(n.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==J.name){e.next=3;break}return T.error("".concat(t["wrong-network"])),e.abrupt("return");case 3:if(Object(p.f)(v.detail.chainId,H.chainId)){e.next=6;break}return T.error("".concat(t["your-deri-is-on"]," ").concat(J.name," ").concat(t["connect-to"]," ").concat(J.name," ").concat(t["to-claim"])),e.abrupt("return");case 6:if(0!==+H.unclaimed){e.next=9;break}return T.error(t["no-deri-to-claim-yet"]),e.abrupt("return");case 9:if(!(parseInt(Date.now()/1e3)%28800<1800)){e.next=13;break}return T.error(t["claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch"]),e.abrupt("return");case 13:return e.next=15,j.a.request("mintDToken",[v.detail.chainId,v.detail.account],{includeResponse:!0,write:!0,subject:t["claim-deri-title"]});case 15:if(!(a=e.sent).success){e.next=21;break}return T.success(t["claim-deri-reward"],{timeout:8e3,isTransaction:!0,transactionHash:a.response.data.transactionHash,link:"".concat(v.blockExploreUrl,"/tx/").concat(a.response.data.transactionHash),title:t["claim-reward-executed"]}),e.abrupt("return",!0);case 21:if(""!==a.response.transactionHash){e.next=23;break}return e.abrupt("return",!1);case 23:return T.error("".concat(t["transaction-failed"]," : ").concat(a.response.error),{timeout:3e5,isTransaction:!0,transactionHash:a.response.transactionHash,link:"".concat(v.blockExploreUrl,"/tx/").concat(a.response.transactionHash),title:t["claim-reward-failed"]}),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(n.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.isConnected()){e.next=7;break}return e.next=3,K();case 3:e.sent&&P(!0),e.next=17;break;case 7:return e.prev=7,e.next=10,v.connect();case 10:return t=e.sent,e.abrupt("return",!!t);case 14:return e.prev=14,e.t0=e.catch(7),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}(),G=function(e){var a;switch(e){case 1:a=t.jan;break;case 2:a=t.feb;break;case 3:a=t.mar;break;case 4:a=t.apr;break;case 5:a=t.may;break;case 6:a=t.jun;break;case 7:a=t.jul;break;case 8:a=t.aug;break;case 9:a=t.sep;break;case 10:a=t.oct;break;case 11:a=t.nov;break;case 12:a=t.dec}return a},Q=function(){var e=Object(n.a)(s.a.mark((function e(){var t,a,n,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.isConnected()){e.next=5;break}return e.next=3,j.a.request("getUserFirstClaimInfo",[v.detail.account]);case 3:(t=e.sent).first_timestamp?(a=new Date(1e3*t.first_timestamp),n=a.getFullYear(),i=a.getMonth()+1,i=G(i),c=a.getDate(),M("".concat(i," ").concat(c,", ").concat(n))):M("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){var e=window.setInterval(X,18e4);return X(),Q(),function(){return clearInterval(e)}}),[v.detail.account]),Object(h.jsx)("div",{className:"mining-claim",children:Object(h.jsxs)("div",{className:"mining-claim-info",children:[Object(h.jsxs)("div",{className:"deri-num-slider",children:[Object(h.jsxs)("div",{className:"deri-claim-time",children:[t["current-epoch-remaining-time"]," : ",g]}),H.harvestDeriLp>0&&Object(h.jsxs)("div",{className:"deri-claim-text",children:[t["your-harvest-in-current"]," ",Object(h.jsx)("span",{className:"deri-num",children:Object(h.jsx)(u.a,{value:H.harvestDeriLp,decimalScale:2,displayType:"text",di:!0,thousandSeparator:!0})}),"   $DERI."]}),x&&Object(h.jsxs)("div",{className:"deri-claim-text",children:[a("claim-deri",{num:z?0:H.unclaimed?H.unclaimed:0}),W&&Object(h.jsxs)("span",{children:[" ",a("claim-deri-history",{date:W,num:z?+H.unclaimed+ +H.claimed:H.claimed})," . ",t.woohoo]})]}),Object(h.jsx)("div",{className:"deri-claim-slider",children:Object(h.jsx)(r.a,{startTimestamp:N,nowTimestamp:B,endTimestamp:E})})]}),x&&Object(h.jsx)("div",{className:"cliam-button",children:Object(h.jsx)(o.a,{icon:"ClaimDeri",fontWeight:"bold",label:t["claim-all"],onClick:Y})})]})})}},1486:function(e,t,a){},1493:function(e,t,a){},1494:function(e,t,a){},1495:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n,i=a(14),c=a(62),s=a(6),l=(a(37),a(51)),o=a(28),r=a(1237),d=a(1229),b=a(5),u=l.a.div(n||(n=Object(c.a)(["\n  .remove-hint{\n    cursor: pointer;\n    .text{\n      display: flex;\n      border:0;\n    }\n    span{\n      margin-left:8px;\n    }\n  }\n"])));function j(e){var t=e.lang,a=e.baseToken,n=e.penalty,c=e.isB0Staked,l=e.availableBalance,j=e.getLang,p=Object(s.useState)(""),h=Object(i.a)(p,2),x=h[0],m=h[1];return Object(s.useEffect)((function(){var e,i={num:a};e=c?"BUSD"===a?"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(n," BUSD ").concat(t["this-action-will-update-your"]):"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(n," BUSD ").concat(j("this-action-will-trigger-swapping-to-update-your",i)):"".concat(t["your-account-has-an-unsettled-balance-of"]," ").concat(n," BUSD ").concat(j("this-action-will-trigger-swapping-to-update-your-busd-balance-to-reflect-the-unsettled-amount",i)),m(e)}),[c,n,a]),Object(b.jsx)(u,{children:+n<0&&+l>0&&Object(b.jsx)("div",{className:"remove-hint",children:Object(b.jsxs)(r.a,{tip:x,width:"332",children:[Object(b.jsx)(o.a,{token:"warn"})," ",Object(b.jsxs)("span",{children:[t["negative-unsettled-balance"]," : ",Object(b.jsx)(d.a,{value:n,decimalScale:2})," BUSD"]})]})})})}},1985:function(e,t,a){},1986:function(e,t,a){},2369:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(55),c=a(87),s=a(46),l=a(1485),o=a(1300),r=a(1353),d=a(1272),b=a(20),u=a(1229),j=a(15),p=a(37),h=a(169),x=(a(1985),a(16)),m=a(1495),v=a(5);function f(e){let{getLang:t,wallet:a,lang:i,type:c,isLp:s,bTokenId:l,poolConfig:f,version:O,baseToken:g,address:k,walletBalance:y,poolInfo:w,afterTransaction:N}=e;const[S,T]=Object(n.useState)(""),[C,I]=Object(n.useState)(!1),[E,q]=Object(n.useState)(""),[F,_]=Object(n.useState)(!1),[B,L]=Object(n.useState)(""),[$,A]=Object(n.useState)(!1),H=Object(h.c)(),[D,U]=Object(n.useState)({}),R="add"===c||"v2"===O||"v3"===O||"v3_lite"===O?g:i.shares;return Object(n.useEffect)((()=>{let e="add"===c?Object(x.bg)(y):Object(x.bg)(w.totalShares);/\d+\.(999999|099999|009999|000999|000099|000009)/.test(y)&&(e=Object(x.bg)((+y).toFixed(5)));const t=Object(x.bg)(S);S&&0!==+S&&!t.gt(e)?((async()=>{let e,t="add"===c?S:Object(x.bg)(S).times(Object(x.bg)(-1)).toString();e="v3"===O||"v3_lite"===O?[a.detail.chainId,k,a.detail.account,t,g]:[a.detail.chainId,k,a.detail.account,t,l];let n=await p.a.request("getEstimatedLiquidityInfo",e);+n.percentage1<0&&(n.percentage1=0,n.shares1=0),U(n)})(),_(!1)):_(!0)}),[S,c,w,y]),Object(n.useEffect)((()=>{T(""),q("")}),[c,l,g]),Object(n.useEffect)((()=>{a.isConnected()&&(async()=>{if(g){let e=await p.a.request("getEstimatedLpInfo",[a.detail.chainId,k,a.detail.account,g]);L(e.b0Penalty),A(e.isB0Staked)}})()}),[a.detail,g,k]),Object(v.jsxs)("div",{className:"operate",children:[Object(v.jsx)("div",{className:"add-input",children:Object(v.jsx)(o.a,{value:S,unit:R,onChange:e=>{T(e)},inputWidth:"237px",styles:{"min-width":"332px"}})}),"add"===c&&Object(v.jsxs)("div",{className:"wallet-balance",children:[i["wallet-balance"],": ",Object(v.jsx)(u.a,{value:y,displayType:"text",decimalScale:2})," ",g]}),"remove"===c&&Object(v.jsxs)("div",{className:"wallet-balance",children:[i["staked-balance"],": ",Object(v.jsx)(u.a,{value:w.totalShares,displayType:"text",decimalScale:2})," ",R]}),"remove"===c&&Object(v.jsx)("div",{children:Object(v.jsx)(m.a,{getLang:t,lang:i,baseToken:g,penalty:B,isB0Staked:$})}),Object(v.jsx)("div",{className:"check-proportion",children:Object(v.jsx)(d.a,{outline:!0,defaultValue:E,onChange:e=>{let t="add"===c?y:w.totalShares,a=Object(b.E)(e,t);q(e),T(a),q(e),I("100%"===e)},bgColor:" rgba(85, 119, 253, 0.1)",width:77,height:40})}),Object(v.jsx)("div",{className:"information",children:0!==+S&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"percentage",children:[Object(v.jsx)("div",{className:"info-box-title",children:i["my-liquidity-percentage"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,width:"80px",value:w.percent,decimalScale:2,suffix:"%"})," ->  ",Object(v.jsx)(u.a,{width:"80px",allowZero:!0,value:100*D.percentage1,decimalScale:2,suffix:"%"})]})]}),Object(v.jsxs)("div",{className:"staked-balance",children:[Object(v.jsx)("div",{className:"info-box-title",children:i["staked-balance"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{width:"80px",allowZero:!0,value:w.formatShares,decimalScale:2})," -> ",Object(v.jsx)(u.a,{width:"80px",allowZero:!0,value:D.shares1,decimalScale:2}),"v2"===O||"v3"===O||"v3_lite"===O?" "+g:" "+i.shares]})]})]})}),Object(v.jsxs)("div",{className:"add-remove-btn",children:["add"===c&&Object(v.jsx)(r.a,{alert:H,disabled:F,fontWeight:"bold",onClick:async()=>{const e=Object(x.bg)(y);if(Object(x.bg)(S).gt(e))return H.error(i["not-sufficient-funds"]),!1;if(S<=0||isNaN(S))return H.error(i["it-has-to-be-greater-than-zero"]),!1;let n;if("lp"===s){let e=[a.detail.chainId,k,a.detail.account,S];n=await p.a.request("addLpLiquidity",e,{includeResponse:!0,write:!0,subject:i["add-liquidity"]})}else{let e;e="v3"===O||"v3_lite"===O?[a.detail.chainId,k,a.detail.account,S,g]:[a.detail.chainId,k,a.detail.account,S,l],n=await p.a.request("addLiquidity",e,{includeResponse:!0,write:!0,subject:i["add-liquidity"]})}return N(!0),T(""),n&&n.success?(H.success(`${t("add-baseToken-liquidity",{baseToken:g})}`,{timeout:8e3,isTransaction:!0,transactionHash:n.response.data.transactionHash,link:`${a.blockExploreUrl}/tx/${n.response.data.transactionHash}`,title:i["add-liquidity-executed"]}),!0):(""===n.response.transactionHash||H.error(`${i["transaction-failed"]} : ${n.response.error}`,{timeout:3e5,isTransaction:!0,transactionHash:n.response.transactionHash,link:`${a.blockExploreUrl}/tx/${n.response.transactionHash}`,title:i["add-liquidity-failed"]}),!1)},bToken:g,pool:f,wallet:a,bTokenId:l,fontSize:"18",type:j.o,width:"331",label:i["add-liquidity"],lang:i}),"remove"===c&&Object(v.jsx)(r.a,{alert:H,disabled:F,fontWeight:"bold",onClick:async()=>{const e=Object(x.bg)(w.totalShares);let n;n=C?w.totalShares:S;const c=Object(x.bg)(n);if(c.gt(e))return H.error(`${i["your-current-max-removable-shares-are"]}  ${w.totalShares}`),!1;if(+n<=0||isNaN(S))return H.error(i["invalid-liquidity"]),!1;let o;if("lp"===s){let e=[a.detail.chainId,k,a.detail.account,n];o=await p.a.request("removeLpLiquidity",e,{includeResponse:!0,write:!0,subject:i["remove-liquidity"]})}else{let t;t="v3"===O||"v3_lite"===O?[a.detail.chainId,k,a.detail.account,n,g,e.eq(c)]:[a.detail.chainId,k,a.detail.account,n,l,e.eq(c)],o=await p.a.request("removeLiquidity",t,{includeResponse:!0,write:!0,subject:i["remove-liquidity"]})}if(o&&o.success)H.success(`${t("remove-baseToken-liquidity",{baseToken:g})}`,{timeout:5e3,isTransaction:!0,transactionHash:o.response.data.transactionHash,link:`${a.blockExploreUrl}/tx/${o.response.data.transactionHash}`,title:i["remove-liquidity-executed"]});else{if(""===o.response.transactionHash)return!1;H.error(`${i["transaction-failed"]} : ${o.response.error}`,{timeout:3e5,isTransaction:!0,transactionHash:o.response.transactionHash,link:`${a.blockExploreUrl}/tx/${o.response.transactionHash}`,title:i["remove-liquidity-failed"]})}return T(""),N(),!0},bToken:g,pool:f,type:j.o,wallet:a,bTokenId:l,fontSize:"18",width:"331",label:i["remove-liquidity"],lang:i})]})]})}var O=a(1314),g=a(110),k=a(171),y=(a(1986),a(469)),w=a(465),N=a(467),S=a(464),T=a(466),C=a(1406),I=a(468),E=a(1237),q=a(295),F=a(168);const _=g[x.DeriEnv.get()].chainInfo;function B(e){let{wallet:t,chainId:a,nowApy:i,poolInfo:c,address:s,nowToken:l,lang:o,version:r,type:d,poolConfig:j,symbols:x}=e;const[m,f]=Object(n.useState)("show"),[O,g]=Object(n.useState)(),k=Object(h.c)(),y=async()=>{if(console.log("poolConfig",j),j){let e=await j.getVenusEarned(t,s);e=+e,g(e)}};return Object(n.useEffect)((()=>{if(t.isConnected()&&("v3"===r||"v3_lite"===r)){let e=null;return y(),e=window.setInterval((()=>{y()}),18e4),()=>{e&&clearInterval(e)}}}),[t,t.detail,j]),Object(v.jsxs)("div",{className:"pool-info",children:[Object(v.jsxs)("div",{className:"pool-info-title",children:[Object(v.jsx)("div",{className:"pool-info-title-text",children:o["pool-info"]}),Object(v.jsxs)("div",{className:"down-up",children:["show"===m&&Object(v.jsx)("span",{onClick:()=>f("hide"),children:Object(v.jsx)("img",{className:"up-icon",alt:"",src:q.default})}),"hide"===m&&Object(v.jsx)("span",{onClick:()=>f("show"),children:Object(v.jsx)("img",{alt:"",src:q.default})})]})]}),Object(v.jsxs)("div",{className:`'pool-info-text' ${m}`,children:[Object(v.jsxs)("div",{className:"pool-info-text-one",children:["v2_lite_open"!==r&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o.apy}),Object(v.jsxs)("div",{className:"info-box-num",children:["v3"!==r&&"v3_lite"!==r&&Object(v.jsx)(u.a,{value:c.apy,displayType:"text",decimalScale:2,suffix:"%"}),("v3"===r||"v3_lite"===r)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(E.a,{text:Object(v.jsx)(u.a,{width:"50px",value:i.apy,displayType:"text",decimalScale:2,suffix:"%"}),tip:o["deri-apy"]}),"\xa0 +  \xa0  ",Object(v.jsx)(E.a,{text:Object(v.jsx)(u.a,{width:"50px",value:i.supplyApy,displayType:"text",decimalScale:2,suffix:"%"}),tip:o["venus-suppy-apy"]}),"  \xa0 +  \xa0",Object(v.jsx)(E.a,{text:Object(v.jsx)(u.a,{width:"50px",value:i.xvsApy,displayType:"text",decimalScale:2,suffix:"%"}),tip:o["xvs-distribution-apy"]})]})]})]}),Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["pool-liquidity"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{value:c.total,displayType:"text",decimalScale:2,thousandSeparator:!0})," ","v3"===r||"v3_lite"===r?56===+a?"BUSD":"USDC":l]})]}),("v2"===r||"v3"===r||"v3_lite"===r)&&!("option"===d&&"v2"===r)&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o.multiplier}),Object(v.jsx)("div",{className:"info-box-num",children:c.multiplier})]}),Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["my-liquidity-percentage"]}),Object(v.jsx)("div",{className:"info-box-num",children:Object(v.jsx)(u.a,{allowZero:!0,value:c.percent,decimalScale:2,suffix:"%"})})]}),("v2"!==r&&"v3"!==r&&"v3_lite"!==r||"v2"===r&&"option"===d)&&Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["liquidity-share-value"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,decimalScale:6,value:c.shareValue,thousandSeparator:!0})," ",l]})]})}),Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["staked-balance"]}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,value:c.formatShares,decimalScale:2}),"v2"!==r&&"v3"!==r&&"v3_lite"!==r||"option"===d&&"v2"===r?" "+o.shares:" "+l]})]}),("v2"!==r&&"v3"!==r&&"v3_lite"!==r||"v2"===r&&"option"===d)&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title"}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,decimalScale:2,value:c.values,thousandSeparator:!0})," ",l]})]}),("v2"===r||"v3"===r||"v3_lite"===r)&&!("option"===d&&"v2"===r)&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:Object(v.jsx)(E.a,{multiline:!0,text:o["mining-pnl"],tip:o["mining-pnl-hover"],html:!0,element:Object(v.jsxs)("span",{children:[" ",Object(v.jsxs)("div",{children:[o["mining-pnl-hover-one"]," "]}),o["mining-pnl-hover"]," ",Object(v.jsxs)("div",{children:[Object(v.jsx)("a",{target:"_blank",href:"https://docs.deri.io/how-it-works/mining-amm-liquidity-mining#ii.-base-token-profit-with-market-risk",children:o["learn-more-pnl"]})," "]})," "]})})}),Object(v.jsxs)("div",{className:"info-box-num",children:[Object(v.jsx)(u.a,{allowZero:!0,prefix:" ",value:c.pnl,decimalScale:2}),"  ",j&&j.bTokens[0].bTokenSymbol," (",Object(v.jsx)(u.a,{value:c.pnlPercentage,decimalScale:2,suffix:"%"}),")"]})]}),("v3"===r||"v3_lite"===r)&&(56===+a||97===+a)&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["xvs-earned"]}),Object(v.jsxs)("div",{className:"info-box-num collect-box",children:[Object(v.jsx)(u.a,{value:O,decimalScale:2}),Object(v.jsx)(F.a,{onClick:async()=>{let e=await p.a.request("claimXVSLp",[t.detail.chainId,s,t.detail.account],{includeResponse:!0,write:!0,subject:o["claim-XVS"]});if(e&&e.success)k.success(o["claim-XVS-reward"],{timeout:8e3,isTransaction:!0,transactionHash:e.response.data.transactionHash,link:`${t.blockExploreUrl}/tx/${e.response.data.transactionHash}`,title:o["claim-reward-failed"]});else{if(""===e.response.transactionHash)return!1;k.error(`${o["transaction-failed"]} : ${e.response.error}`,{timeout:3e5,isTransaction:!0,transactionHash:e.response.transactionHash,link:`${t.blockExploreUrl}/tx/${e.response.transactionHash}`,title:o["claim-reward-executed"]})}y()},className:"collect",label:o.collect})]})]})]}),Object(v.jsxs)("div",{className:"pool-info-text-two",children:["lp"!==d&&Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o.symbols}),Object(v.jsx)("div",{className:"info-box-num symbols",children:"main"===j.zone&&56==+a?x:Object(v.jsx)(E.a,{tip:x,children:x})})]}),Object(v.jsxs)("div",{className:"info-box",children:[Object(v.jsx)("div",{className:"info-box-title",children:o["contract-address"]}),Object(v.jsx)("div",{className:"info-box-num",children:Object(v.jsx)("a",{target:"_blank",rel:"noreferrer",href:`${_[a]&&_[a].viewUrl}/address/${s}`,children:Object(b.i)(s)})})]})]})]})]})}var L=a(14),$=a(28),A=a(1367);function H(e){var t=e.lang,a=e.address,i=e.checkoutBaseToken,c=e.nowToken,s=e.bTokenList,l=e.version,o=e.type,r=Object(n.useState)([]),d=Object(L.a)(r,2),j=d[0],p=d[1],h=function(e){e.target.src=I.default};return Object(n.useEffect)((function(){p(s)}),[s]),Object(v.jsxs)("div",{className:"select-basetoken-info",children:[Object(v.jsxs)("div",{className:"select-coin-title-search",children:[Object(v.jsxs)("div",{className:"select-coin-title",children:[" ",t["select-the-coin"]]}),Object(v.jsx)("div",{className:"search-box",children:Object(v.jsx)(A.a,{list:s,searchName:"bTokenSymbol",onChange:function(e){return p(e)}})})]}),Object(v.jsxs)("div",{className:"coin-search",children:[Object(v.jsx)("div",{className:"slide-icon left",children:Object(v.jsx)($.a,{token:"arrow-left",width:"24",height:"24"})}),Object(v.jsxs)("div",{className:"v3"===l||"v3_lite"===l?"coin-list some-coin":"coin-list",children:["lp"!==o&&"v2_lite_open"!==l&&Object(v.jsx)(v.Fragment,{children:j.map((function(e,a){return Object(v.jsxs)("div",{className:c===e.bTokenSymbol?"coin-box checked-base":"coin-box",onClick:function(){i(e.bTokenId,e.bTokenSymbol)},children:[Object(v.jsxs)("div",{className:"base-apy-info",children:[Object(v.jsx)("div",{className:"btoken-logo ".concat(e.bTokenSymbol)}),Object(v.jsxs)("div",{className:"apy-base-staked",children:[Object(v.jsx)("div",{className:"base-name",children:e.bTokenSymbol}),Object(v.jsxs)("div",{className:"base-apy",children:[t.apy," \xa0 ",Object(v.jsx)(u.a,{width:"50px",value:e.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}),("v3"===l||"v3_lite"===l)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("span",{children:[" +  ",Object(v.jsx)(u.a,{width:"50px",value:e.supplyApy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}),"  + "]}),Object(v.jsx)(u.a,{width:"50px",value:e.xvsApy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})]})]})]})]}),e.staked&&Object(v.jsx)("img",{src:C.a,alt:""})]})}))}),"v2_lite_open"===l&&Object(v.jsx)(v.Fragment,{children:j.map((function(e,a){return Object(v.jsxs)("div",{className:"coin-box checked-base",onClick:function(){i(e.bTokenId)},children:[Object(v.jsxs)("div",{className:"base-apy-info",children:[Object(v.jsx)("div",{className:"btoken-logo ".concat(e.bTokenSymbol),children:Object(v.jsx)("img",{alt:"",onError:h,src:"https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/".concat(e.bTokenSymbol,".png")})}),Object(v.jsx)("div",{className:"apy-base-staked",children:Object(v.jsx)("div",{className:"base-name",children:e.bTokenSymbol})})]}),e.staked&&Object(v.jsxs)("div",{className:"stake",children:[Object(v.jsx)("img",{src:C.a,alt:""}),t.staked]})]})}))}),"lp"===o&&s.length&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"coin-box checked-base",children:Object(v.jsxs)("div",{className:"base-apy-info",children:[Object(v.jsxs)("div",{className:"lp-btoken-logo",children:[Object(v.jsx)("div",{className:"btoken-logo ".concat(s[0].bTokenSymbol)}),Object(v.jsx)("span",{className:"conect-logo",children:"+"}),Object(v.jsx)("div",{className:"btoken-logo ".concat(s[1].bTokenSymbol)})]}),Object(v.jsxs)("div",{className:"apy-base-staked",children:[Object(v.jsx)("div",{className:"base-name",children:c}),Object(v.jsxs)("div",{className:"base-apy",children:[Object(b.v)(a)&&Object(v.jsxs)(v.Fragment,{children:[t.apy," \xa0 ",Object(v.jsx)(u.a,{value:s[1].apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})]}),Object(b.B)(a)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(E.a,{text:"".concat(t.apy," ").concat((+s[1].apy).toFixed(2)," %"),tip:t["deri-apy"]}),"\xa0 + \xa0 ",Object(v.jsx)(E.a,{text:"".concat(t.apy,"  ").concat((+s[1].lpApy).toFixed(2)," %"),tip:t["sushi-apy"]})]})]})]})]})})})]}),Object(v.jsx)("div",{className:"slide-icon right",children:Object(v.jsx)($.a,{token:"arrow-right",width:"24",height:"24"})})]})]})}const D=x.DeriEnv.get(),{chainInfo:U}=g[D];t.default=Object(s.b)("wallet","poolManager")(Object(s.c)((function(e){let{lang:t,wallet:a={},poolManager:s,getLang:o}=e;const{version:r,chainId:d,address:u,type:j}=Object(i.i)(),[h,m]=Object(n.useState)(),[g,E]=Object(n.useState)(""),[q,F]=Object(n.useState)(!1),[_,L]=Object(n.useState)(""),[$,A]=Object(n.useState)([]),[D,R]=Object(n.useState)({}),z=Object(k.a)(),[P,Z]=Object(n.useState)(""),[V,W]=Object(n.useState)(),[M,J]=Object(n.useState)({}),X=U[d]&&U[d].name,K=async()=>{if(a.isConnected()){let e=[a.detail.chainId,u,a.detail.account],t=null;_.isLp?t=await p.a.request("getLpWalletBalance",e):("v3"===r||"v3_lite"===r?e.push(h):e.push(g),"v2_lite_open"===r&&await x.openConfigListCache.update(),t=await p.a.request("getBTokenBalance",e)),W(t)}},Y=()=>{K(),Q(),ee()},G=Object(n.useMemo)((()=>({[t.add]:{content:Object(v.jsx)(f,{getLang:o,poolConfig:_,isLp:j,wallet:a,afterTransaction:Y,version:r,bTokenId:g,address:u,lang:t,type:"add",poolInfo:D,baseToken:h,walletBalance:V}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"add-icon",iconWidth:"25",iconHeight:"25",inicon:"inactive-add",direction:"tab-left"},[t.remove]:{content:Object(v.jsx)(f,{getLang:o,isLp:j,poolConfig:_,wallet:a,afterTransaction:Y,lang:t,address:u,type:"remove",bTokenId:g,poolInfo:D,balance:D,baseToken:h,version:r}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"remove-icon",iconWidth:"25",iconHeight:"25",iconMarginRight:"20",inicon:"inactive-remove",direction:"tab-right"}})),[t,o,_,j,a,r,g,u,h,V,D]),Q=async()=>{let e=null;if(_){let t,n,i,c,s,l,o=await _.getPoolInfo(a,_);if(o.bTokensApy&&o.bTokensLiq&&("v2"===r&&g?(s=o.bTokensApy.filter((e=>e.bTokenId===g)),t=s[0].apy,l=s[0].multiplier,c=o.bTokensLiq.filter((e=>e.bTokenId===g)),c=c[0].liquidity):"v2_lite_open"!==r&&"v3"!==r&&"v3_lite"!==r?(t=o.bTokensApy[0].apy,c=o.bTokensLiq[0].liquidity):"v3"!==r&&"v3_lite"!==r||(s=o.bTokensApy.filter((e=>e.bTokenSymbol===h)),s.length&&(t=s[0].apy,n=s[0].supplyApy,i=s[0].xvsApy,l=s[0].multiplier),c=o.bTokensLiq.filter((e=>e.bTokenSymbol===h)),c.length&&(c=c[0].liquidity)),e={total:c,apy:100*+t,supplyApy:100*+n,xvsApy:100*+i,multiplier:l}),a.isConnected()){e=await _.getLiquidityInfo(a,u,_.version,_.isLp,j,h,g),"v3"!==r&&"v3_lite"!==r||(e.supplyApy=100*+n,e.xvsApy=100*+i),e.apy=100*+t,e.multiplier=l}R(e)}},ee=async()=>{if(a.isConnected()&&_){let e=await _.getIsStaked(a,_);if(e.bTokens){$.map((t=>{if("v2"===r&&"option"!==j)t.staked=e.bTokens.filter((e=>e.bTokenId===t.bTokenId))[0].isStaked;else if("v3"===r||"v3_lite"===r){let a=e.bTokens.filter((e=>e.bTokenSymbol===t.bTokenSymbol));t.staked=!!a.length&&a[0].isStaked}else t.staked=e.isStaked;return t}))}let t=[];if($.forEach(((e,a)=>{if(e.staked)return t.push(e),void $.splice(a,1)})),$.unshift(...t),$.length){let e=$[0].bTokenSymbol;Object(b.v)(u)?e="PANCAKE-LP":Object(b.B)(u)&&(e="DERI-USDT SLP");let t=$[0].bTokenId;m(e),E(t)}}};return Object(n.useEffect)((()=>{a.detail.chainId&&a.detail.chainId!==d&&a.switchNetwork(z[d])}),[a.detail]),Object(n.useEffect)((()=>{(async()=>{await s.load();let e=s.pools;"lp"===j&&(await s.loadDoubleMingingPool(),e=s.lpPools),"v2_lite_open"===r&&(await s.loadOpen(),e=s.openPools),e=e.filter((e=>e.address===u)),e=e[0];let t=e.bTokens[0].bTokenSymbol;Object(b.v)(u)?t="PANCAKE-LP":Object(b.B)(u)&&(t="DERI-USDT SLP");let a=e.symbols.map((e=>{let t=[];return t.push(e.symbol),t}));a=a.join(","),Z(a),L(e),A(e.bTokens)})()}),[]),Object(n.useEffect)((()=>{if(W(""),$.length&&(h||g)){let e,t={};if("v2"!==r){t=$.filter((e=>e.bTokenSymbol===h))[0]}else if("v2"===r){t=$.filter((e=>e.nowTokenId===g))[0]}J(t),"v2"===r&&"option"!==j?g&&(e=$.filter((e=>e.bTokenId===g))[0].staked):"lp"!==j&&(e=$.filter((e=>e.bTokenSymbol===h))[0].staked),F(e)}}),[$,h,g]),Object(n.useEffect)((()=>{(async()=>{if(_){let e=await _.getPoolInfo(a,_);e.bTokensApy&&$.map((t=>{if("v2"===r)t.apy=100*+e.bTokensApy.filter((e=>e.bTokenId===t.bTokenId))[0].apy;else if("v2_lite_open"!==r&&"v3"!==r&&"v3_lite"!==r)t.apy=100*+e.bTokensApy[0].apy,Object(b.B)(u)&&(t.lpApy=e.lpApy);else if("v3"===r||"v3_lite"===r){let a=e.bTokensApy.find((e=>e.bTokenSymbol===t.bTokenSymbol));a&&(t.apy=100*+a.apy,t.supplyApy=100*+a.supplyApy,t.xvsApy=100*+a.xvsApy)}return t}))}})()}),[_,$]),Object(n.useEffect)((()=>{Q(),K()}),[g,_,a.detail.account,h]),Object(n.useEffect)((()=>{ee()}),[_,a.detail.account,$]),Object(v.jsxs)("div",{className:"pool-detail",children:[Object(v.jsx)("div",{className:"back-pool",children:Object(v.jsx)(c.b,{to:"0x08aD0E0b4458183758fC5b9b6D27c372965fB780"===u||"0x66f501dda450C8978c4A1115D7b2A7FAa7702F05"===u||"0x574022307e60bE1f07da6Ec1cB8fE23d426e5831"===u?"/retired":"/pool",children:Object(v.jsxs)("div",{className:"icon-back",children:[Object(v.jsx)("img",{alt:"",src:y.default}),Object(v.jsx)("span",{children:t.back})]})})}),Object(v.jsxs)("div",{className:"pool-deatail-info",children:[Object(v.jsxs)("div",{className:"pool-detail-basetoken-info",children:[Object(v.jsxs)("div",{className:"pool-info-text",children:[Object(v.jsxs)("div",{className:"pool-network-type",children:[Object(v.jsx)("div",{className:"network-logo",children:Object(v.jsx)("img",{alt:"",src:(e=>{let t,a=+e;return 56===a||97===a?t=w.default:137===a?t=N.default:1===a?t=S.default:42161!==a&&421611!==a||(t=T.default),t})(d)})}),Object(v.jsxs)("div",{className:"pool-type-network-text",children:[Object(v.jsxs)("div",{className:"pool-type-text",children:["0xD2D950e338478eF7FeB092F840920B3482FcaC40"!==u&&Object(v.jsxs)(v.Fragment,{children:[t[_.type]," ",t[_.zone]]}),"0xD2D950e338478eF7FeB092F840920B3482FcaC40"===u&&Object(v.jsx)(v.Fragment,{children:t[_.zone]})]}),Object(v.jsx)("div",{className:"pool-network-text",children:X})]})]}),Object(v.jsxs)("div",{className:"pool-des",children:["lp"!==j&&t["amm-pool-des"],"clp"===r&&Object(v.jsx)(v.Fragment,{children:t["deri-pancake-pool"]}),"slp"===r&&Object(v.jsx)(v.Fragment,{children:t["deri-sushi-pool"]}),Object(v.jsx)("br",{}),"lp"!==j?Object(v.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-the-amm-liquidity-mining-on-deri-pools-risk-free",children:Object(v.jsxs)("span",{className:"learn-more",children:[" ",t["learn-more"]]})}):Object(v.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-dex-liquidity-mining-on-sushiswap-sushiswap-onsen-and-pancakeswap-deri-risk-free",children:Object(v.jsxs)("span",{className:"learn-more",children:[" ",t["learn-more"]]})})]})]}),Object(v.jsx)(H,{lang:t,address:u,checkoutBaseToken:async(e,t)=>{let a;a="v3"!==r&&"v3_lite"!==r?_.bTokens.filter((t=>t.bTokenId===e)):_.bTokens.filter((e=>e.bTokenSymbol===t)),R({}),E(e),W(""),m(a[0].bTokenSymbol),F()},nowToken:h,bTokenList:$,version:r,type:j})]}),Object(v.jsxs)("div",{className:"pool-detail-add-remove-info",children:[Object(v.jsxs)("div",{className:"mining-deri-liquidity",children:[Object(v.jsxs)("div",{className:"btoken-liquidity",children:["lp"!==j&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:`btoken-logo ${h}`,children:"v2_lite_open"===r&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("img",{alt:"",onError:e=>{e.target.src=I.default},src:`https://raw.githubusercontent.com/deri-io/deri-open-zone/main/img/${h}.png`})})}),Object(v.jsxs)("div",{className:"manage-stake",children:[Object(v.jsxs)("div",{className:"manage",children:[t.manage," ",h," ",t.liquidity]}),q&&Object(v.jsxs)("div",{className:"stake",children:[Object(v.jsx)("img",{src:C.a,alt:""}),t.staked]})]})]}),"lp"===j&&$.length&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"lp-btoken-logo",children:[Object(v.jsx)("div",{className:`btoken-logo ${$[0].bTokenSymbol}`}),Object(v.jsx)("span",{className:"conect-logo",children:"+"}),Object(v.jsx)("div",{className:`btoken-logo ${$[1].bTokenSymbol}`})]}),Object(v.jsxs)("div",{className:"manage-stake",children:[Object(v.jsxs)("div",{className:"manage",children:[t.manage," ",h," ",t.liquidity]}),q&&Object(v.jsxs)("div",{className:"stake",children:[Object(v.jsx)("img",{src:C.a,alt:""}),t.staked]})]})]})]}),Object(v.jsx)("div",{className:"deri-current-epoch",children:"v2_lite_open"!==r&&Object(v.jsx)(l.a,{poolShow:!1,lang:t,wallet:a})})]}),Object(v.jsxs)("div",{className:"mining-add-remove-liquidity",children:[Object(v.jsx)(B,{wallet:a,nowApy:M,poolInfo:D,chainId:d,address:u,nowToken:h,lang:t,poolInfo:D,version:r,type:j,poolConfig:_,symbols:P}),Object(v.jsx)("div",{className:"add-remove-liquidity",children:Object(v.jsx)(O.a,{tabSet:G,iconMarginRight:"20",width:379,size:18,inactiveBgColor:"#0c192d",icon:"",borderBottom:!0,divider:!0})})]})]})]})]})})))}}]);
//# sourceMappingURL=18.ede9f3f8.chunk.js.map