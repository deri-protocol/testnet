{"version":3,"sources":["desktop/pages/Nuls/Nuls.js","components/Button/Button.js","components/Nuls/img/nuls.svg","components/Nuls/img/deri.svg","components/Nuls/img/success.svg","components/Nuls/img/undone.svg","components/Nuls/img/right.svg","components/Nuls/Nuls.js"],"names":["lang","Button","btnText","className","disabled","click","afterClick","checkApprove","wallet","spec","status","setStatus","useState","isApproved","setIsApproved","pending","setPending","buttonText","setbuttonText","loadRef","useRef","beforeAction","current","style","display","afterAction","useEffect","async","detail","account","res","pool","bTokenId","loadApproveStatus","onClick","approve","success","alert","ref","marginRight","inject","observer","actionElement","setActionElement","hasConnectWallet","isApprove","setIsApprove","isClaim","setIsClaim","isTrade","setIsTrade","isBalance","setIsBalacne","isThanFiveHundred","setIsThanFiveHundred","isHasPToken","setIsHasPToken","config","DeriEnv","get","poolAddress","connect","unlockBToken","chainId","claimPtoken","airdropPTokenLite","isBTokenUnlocked","getIsApprove","isPTokenAirdropped","getIsClaim","hasRequiredBalance","getBalance","isUserPTokenLiteExist","getHasPToken","openConfigListCache","update","getTradeHistory","length","getIsTrade","totalAirdropCount","getTotalAirdropCount","element","href","src","nulsimg","deriimg","undone","right"],"mappings":"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","file":"static/js/45.ce334281.chunk.js","sourcesContent":["/* eslint-disable import/no-anonymous-default-export */\nimport Nuls from '../../../components/Nuls/Nuls'\nimport './nuls.less'\n\nexport default function({lang}){\n  return(\n    <div>\n      <Nuls lang={lang} />\n    </div>\n  )\n}","import {useState,useRef,useEffect} from 'react';\nexport default function Button({btnText,className,disabled,click,afterClick,checkApprove,wallet,spec,lang}){\n  const [status, setStatus] = useState(disabled ? 'disabled' : 'enabled');\n  const [isApproved, setIsApproved] = useState(true);\n  const [pending, setPending] = useState(false);\n  const [buttonText, setbuttonText] = useState(btnText)\n  const loadRef = useRef(null)\n\n  const onClick = async () => {\n    if(status !== 'enabled') {\n      return ;\n    }\n    beforeAction()\n    const result = await click();    \n    if(result){\n      afterClick && afterClick()\n    } \n    afterAction()\n  }\n\n  const beforeAction = ()  => {\n    setStatus('disabled')\n    setPending(true);\n    loadRef.current && (loadRef.current.style.display = 'inline-block')\n  }\n\n  const afterAction = () => {\n    loadRef.current && (loadRef.current.style.display = 'none')\n    setStatus('enabled')\n    setPending(false);\n  }\n\n  const loadApproveStatus = async () => {\n    if(checkApprove && wallet && wallet.detail.account){\n      const res = await wallet.isApproved(spec.pool,spec.bTokenId)\n      setIsApproved(res);\n    }\n  }\n  const approve = async () => {\n    beforeAction();\n    const res = await wallet.approve(spec.pool,spec.bTokenId);\n    if(res.success){\n      setIsApproved(true);\n    } else {\n      setIsApproved(false)\n      alert(lang['approve-failed'])\n    }\n    afterAction();\n  }\n\n  const action = () => {\n    if(isApproved){\n      onClick();\n    } else {\n      approve();\n    }\n  }\n\n  useEffect(() => {\n    loadApproveStatus();\n    return () => {};\n  }, [wallet,spec,checkApprove]);\n\n  useEffect(() => {\n    if(btnText){\n      setbuttonText(btnText)\n    }\n    return () => {\n    }\n  }, [btnText])\n\n  return(\n    <button className={className} onClick={action} >\n        <span className='btn-loading-wrap'>\n          <span ref={loadRef}\n            className='spinner spinner-border spinner-border-sm'\n            style={{display : 'none' ,marginRight : '2'}}>\n          </span>\n        </span>\n          {pending ? lang['pending'] : (isApproved ? buttonText : lang['approve'])  }\n        </button>\n  )\n}","export default __webpack_public_path__ + \"static/media/nuls.6f3226a2.svg\";","export default __webpack_public_path__ + \"static/media/deri.f30f48a4.svg\";","export default __webpack_public_path__ + \"static/media/success.d1b6419b.svg\";","export default __webpack_public_path__ + \"static/media/undone.a632686c.svg\";","export default __webpack_public_path__ + \"static/media/right.222281a5.svg\";","/* eslint-disable jsx-a11y/anchor-has-content */\n/* eslint-disable jsx-a11y/alt-text */\nimport React, { useEffect, useState } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport nulsimg from './img/nuls.svg'\nimport deriimg from './img/deri.svg'\nimport success from './img/success.svg'\nimport undone from './img/undone.svg'\nimport right from './img/right.svg'\nimport Button from '../Button/Button'\nimport {\n  isPTokenAirdropped,\n  isUserPTokenLiteExist,\n  totalAirdropCount,\n  isBTokenUnlocked,\n  hasRequiredBalance,\n  getTradeHistory,\n  openConfigListCache,\n  unlockBToken,\n  DeriEnv,\n  airdropPTokenLite\n} from \"../../lib/web3js/indexV2\";\nfunction Nuls({ wallet = {}, lang }) {\n  const [actionElement, setActionElement] = useState(<Button className='btn' btnText={lang['connect-wallet']}></Button>)\n  const hasConnectWallet = () => wallet && wallet.detail && wallet.detail.account\n  const [isApprove, setIsApprove] = useState(false);\n  const [isClaim, setIsClaim] = useState(false);\n  const [isTrade, setIsTrade] = useState(false);\n  const [isBalance,setIsBalacne] = useState(false);\n  const [isThanFiveHundred,setIsThanFiveHundred] = useState(false)\n\n  const [isHasPToken,setIsHasPToken] = useState(false)\n  const config = DeriEnv.get() === 'dev' ? {\n    poolAddress:'0xb18e2815c005a99BE77c8719c79ec2451A59aDAD'\n  } : {\n    poolAddress :'0xB8b79fd4BCB7dc0Ef352F258b4f9eC53306439fd'\n  }\n  const connect = () => {\n    wallet.connect()\n  }\n\n  const getTotalAirdropCount = async ()=>{\n    let res = await totalAirdropCount(wallet.detail.chainId)\n    if(+res >= 500){\n      setIsThanFiveHundred(true)\n    }\n  }\n\n  const approve = async () => {\n    let res = await unlockBToken(wallet.detail.chainId,config.poolAddress,wallet.detail.account)\n    if(res.success){\n      setIsApprove(true)\n    }\n  }\n\n  const getHasPToken = async ()=>{\n    let res = await isUserPTokenLiteExist(wallet.detail.chainId,config.poolAddress,wallet.detail.account)\n    setIsHasPToken(res)\n  }\n\n  const claimPtoken = async () => {\n    if(!isBalance){\n      alert(lang['less-nuls'])\n      return\n    }\n    if(isHasPToken){\n      alert(lang['use-a-new-address'])\n      return\n    }\n\n    let res = await airdropPTokenLite(wallet.detail.chainId,wallet.detail.account)\n    if(res.success){\n      setIsClaim(true)\n    }else{\n      alert(lang['faild'])\n    }\n\n  }\n\n  const getBalance = async ()=>{\n    let res = await hasRequiredBalance(wallet.detail.chainId,config.poolAddress,wallet.detail.account)\n    setIsBalacne(res)\n  }\n\n  const getIsApprove = async ()=>{\n    let res = await isBTokenUnlocked(wallet.detail.chainId,config.poolAddress,wallet.detail.account)\n    setIsApprove(res)\n  }\n\n  const getIsClaim = async ()=>{\n    let res = await isPTokenAirdropped(wallet.detail.chainId,wallet.detail.account)\n    setIsClaim(res)\n  }\n\n  const getIsTrade = async () =>{\n    await openConfigListCache.update()\n    let res = await getTradeHistory(wallet.detail.chainId,config.poolAddress,wallet.detail.account,'0')\n    if(res.length > 0){\n      setIsTrade(true)\n    }\n  }\n\n  useEffect(()=>{\n    if(hasConnectWallet()){\n      getIsApprove()\n      getIsClaim()\n      getBalance()\n      getHasPToken()\n      getIsTrade()\n      getTotalAirdropCount()\n    }\n  },[wallet.detail])\n\n  useEffect(() => {\n    let element;\n    if (hasConnectWallet()) {\n      if (!isApprove) {\n        element = <Button className='btn' btnText={lang['register']} click={approve} lang={lang} />\n      } else {\n        if (isClaim || isThanFiveHundred) {\n          element = <a href='https://app.deri.finance/#/futures/pro' className='btn'>\n            {lang['trade']}\n          </a>\n        } else {\n          element = <Button className='btn' btnText={lang['claim']} click={claimPtoken} lang={lang} />\n        }\n\n      }\n    } else {\n      element = <Button className='btn btn-danger connect' btnText={lang['connect-wallet']} click={connect} lang={lang} />\n    }\n    setActionElement(element)\n  }, [wallet.detail, isApprove, isClaim,isBalance,isHasPToken,isThanFiveHundred])\n\n  return (\n    <div className='nuls-box'>\n      <div className='title'>\n        <div>\n          {lang['title']}\n        </div>\n        <div className='time'>\n          {lang['in-celebration-of-the']}\n        </div>\n      </div>\n      <div className='logo'>\n        <img className='nuls-img' src={nulsimg} />\n        <img src={deriimg} />\n      </div>\n      <div className='user-rasks'>\n        <div className='header'>\n          {lang['user-tasks']}\n        </div>\n        <div className='content'>\n          <div className='content-text'>\n            <div className='step'>\n              <div className='step-img'>\n                <div>\n                  {isApprove ? <img src={success} /> : <img src={undone} />}\n                </div>\n                <div>\n                  {lang['register']}\n                </div>\n              </div>\n              <div className='step-img'>\n                <div>\n                  <img src={right} />\n                </div>\n\n              </div>\n              <div className='step-img'>\n                <div>\n                  {isClaim ? <img src={success} /> : <img src={undone} />}\n                </div>\n                <div>\n                  {lang['claim']}\n                </div>\n              </div>\n              <div className='step-img'>\n                <div>\n                  <img src={right} />\n                </div>\n\n              </div>\n              <div className='step-img'>\n                <div>\n                  {isTrade ? <img src={success} /> : <img src={undone} />}\n                </div>\n                <div>\n                  {lang['trade']}\n                </div>\n              </div>\n            </div>\n            <div className='button'>\n              {actionElement}\n            </div>\n            {isThanFiveHundred ? <div className='exceed'>{lang['exceed-participants']}</div>:''}\n          </div>\n\n        </div>\n      </div>\n      <div className='h2'>\n        {lang['title-one']}\n        <span className='title-num'>\n          {lang['title-num']}\n        </span>\n        <span className='in-deri'>\n          {lang['title-two']}\n        </span>\n        <div className='text'>\n          {lang['title-three']}\n        </div>\n      </div>\n      <div className='rules'>\n        <div className='rules-title'>\n          {lang['rules']}\n        </div>\n        <div className='text'>\n          {lang['rules-one']}\n        </div>\n        \n        <div className='text'>\n          {lang['rules-two']}\n        </div>\n        <div className='text-n'>\n          {lang['rules-two-one']}\n        </div>\n        <div className='text-n'>\n          {lang['rules-two-two']}\n        </div>\n        <div className='text-n'>\n          {lang['rules-two-three']}\n        </div>\n        <div className='text-n'>\n          {lang['rules-two-four']}\n        </div>\n        <div className='text'>\n          {lang['rules-three']}\n        </div>\n        <div className='text-n'>\n          {lang['rules-two-one']}\n        </div>\n        <div className='text-n'>\n          {lang['rules-two-two']}\n        </div>\n        <div className='text-n'>\n          {lang['rules-two-three']}\n        </div>\n        <div className='text-n'>\n          {lang['rules-two-four']}\n        </div>\n        <div className='rules-title'>\n          {lang['how-to-participate']}\n        </div>\n        <div className='text'>\n          {lang['step-one']}\n        </div>\n        <div className='text'>\n          {lang['step-two']}\n        </div>\n        <div className='text'>\n          {lang['step-three']}\n          <a href='https://docs.deri.finance/guides/trading'>\n            {lang['step-three-a']}\n          </a>\n        </div>\n        <div className='rules-title'>\n          {lang['notes']}\n        </div>\n        <div className='text'>\n          {lang['notes-one']}\n        </div>\n        <div className='text'>\n          {lang['notes-two']}\n        </div>\n        <div className='text'>\n          {lang['notes-three']}\n        </div>\n        <div className='text'>\n          {lang['notes-four']}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default inject(\"wallet\")(observer(Nuls))"],"sourceRoot":""}