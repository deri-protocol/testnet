(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[2],{572:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));var a=c(22),n=c(165),s=c(12),i=c(6),r=c(574),l=c(57);function o(e){var t=Object(i.useState)("--"),c=Object(s.a)(t,2),o=c[0],d=c[1];return Object(i.useEffect)((function(){var t=e.allowZero,c=Object(n.a)(e,["allowZero"]);return(e.value||0===Math.abs(e.value)&&!0===t)&&d(Object(l.jsx)(r.a,Object(a.a)(Object(a.a)({},c),{},{displayType:"text"}))),function(){}}),[e.value]),o}},573:function(e,t,c){"use strict";c.d(t,"a",(function(){return d}));var a=c(0),n=c.n(a),s=c(1),i=c(12),r=c(6),l=c(21),o=c(57);function d(e){var t=e.btnText,c=e.className,a=e.disabled,d=e.click,j=e.afterClick,A=e.checkApprove,b=e.wallet,u=e.spec,O=Object(r.useState)(a?"disabled":"enabled"),m=Object(i.a)(O,2),x=m[0],f=m[1],g=Object(r.useState)(!0),v=Object(i.a)(g,2),h=v[0],p=v[1],N=Object(r.useState)(!1),w=Object(i.a)(N,2),I=w[0],D=w[1],k=Object(r.useRef)(null),y=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===x){e.next=2;break}return e.abrupt("return");case 2:return C(),e.next=5,d();case 5:e.sent&&j&&j(),B();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){f("disabled"),D(!0),k.current&&(k.current.style.display="inline-block")},B=function(){k.current&&(k.current.style.display="none"),f("enabled"),D(!1)},S=function(){var e=Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(A&&b&&b.detail.account&&u.bTokenId)){e.next=5;break}return e.next=3,Object(l.s)(b.detail.chainId,u.pool,b.detail.account,u.bTokenId);case 3:t=e.sent,p(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(),e.next=3,Object(l.v)(b.detail.chainId,u.pool,b.detail.account,u.bTokenId);case 3:e.sent.success?p(!0):(p(!1),alert("Approve faild")),B();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return S(),function(){}}),[b,u,A]),Object(o.jsxs)("button",{className:c,onClick:function(){h?y():M()},children:[Object(o.jsx)("span",{className:"btn-loading-wrap",children:Object(o.jsx)("span",{ref:k,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),I?"PENDING":h?t:"APPROVE"]})}},575:function(e,t,c){"use strict";var a=c(22),n=c(4),s=c(5),i=c(10),r=c(9),l=c(6),o=c.n(l),d=c(580),j=c.n(d),A=c(57);t.a=function(e){var t=document.getElementById("root"),c={overlay:{position:"fixed",zIndex:1,background:"rgb(0 0 0 / 0.5)"},content:{position:"absolute",border:0,background:"none",inset:0,overflow:"initial"}};return function(l){Object(i.a)(d,l);var o=Object(r.a)(d);function d(e){var t;return Object(n.a)(this,d),(t=o.call(this,e)).state={modalIsOpen:!1},t}return Object(s.a)(d,[{key:"render",value:function(){var n=this.props,s=n.modalIsOpen,i=n.className,r=n.overlay,l=void 0===r?{}:r,o=Object.assign(c.overlay,Object(a.a)({},l)),d=Object.assign(c,{overlay:o});return Object(A.jsx)(j.a,{isOpen:s,style:d,appElement:t,children:Object(A.jsx)("div",{className:i,children:Object(A.jsx)(e,Object(a.a)(Object(a.a)({},this.props),{},{className:i,onClose:this.props.onClose}))})})}}]),d}(o.a.Component)}},576:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var a=c(6);function n(e){return Object(a.useEffect)((function(){return window.scrollTo(0,0),document.querySelector("body").style.overflow="hidden",function(){e||(document.querySelector("body").style.overflow="auto")}}),[]),null}},577:function(e,t,c){"use strict";c.d(t,"a",(function(){return b}));var a=c(0),n=c.n(a),s=c(1),i=c(12),r=c(6),l=c(39),o=c(574),d=c(573),j=c(576),A=c(57);function b(e){var t=e.wallet,c=e.spec,a=void 0===c?{}:c,b=e.onClose,u=e.balance,O=e.afterDeposit,m=e.nested,x=Object(r.useState)(""),f=Object(i.a)(x,2),g=f[0],v=f[1],h=Object(r.useState)(""),p=Object(i.a)(h,2),N=p[0],w=p[1],I=Object(r.useState)(""),D=Object(i.a)(I,2),k=D[0],y=D[1],C=Object(r.useState)(!1),B=Object(i.a)(C,2),S=B[0],M=B[1];Object(j.a)(m);var Q=function(){var e=Object(s.a)(n.a.mark((function e(c){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(l.bg)(u),!Object(l.bg)(c).gt(s)){e.next=5;break}return alert("Insufficient balance in wallet"),e.abrupt("return");case 5:if(!(+c<=0||isNaN(c))){e.next=8;break}return alert("It has to be greater than zero"),e.abrupt("return");case 8:return M(!0),e.next=11,Object(l.depositMargin)(t.detail.chainId,a.pool,t.detail.account,c,a.bTokenId);case 11:e.sent.success?(O(),b()):alert("Deposit failed"),M(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return function(){if(u){var e=(+u).toFixed(2),t=e.indexOf(".")>0?e.substring(e.indexOf(".")+1,e.length):"0";v(u),w(t)}}(),function(){}}),[u]),Object(A.jsx)("div",{className:"modal fade",children:Object(A.jsx)("div",{className:"modal-dialog",children:Object(A.jsxs)("div",{className:"modal-content",children:[Object(A.jsxs)("div",{className:"modal-header",children:[Object(A.jsx)("div",{className:"title",children:"DEPOSIT MARGIN"}),Object(A.jsx)("div",{className:"close","data-dismiss":"modal",onClick:function(){S||b()},children:Object(A.jsx)("span",{children:"\xd7"})})]}),Object(A.jsx)("div",{className:"modal-body",children:Object(A.jsxs)("div",{className:"margin-box-info",children:[Object(A.jsx)("div",{children:"Wallet Balance"}),Object(A.jsxs)("div",{className:"money",children:[Object(A.jsxs)("span",{children:[Object(A.jsxs)("span",{className:"bt-balance",children:[Object(A.jsx)(o.a,{value:g,displayType:"text",decimalScale:0}),".",Object(A.jsx)("span",{style:{fontSize:"12px"},children:N})]}),Object(A.jsx)("br",{}),Object(A.jsx)("span",{style:{fontSize:"14px",marginLeft:"10px",marginTop:"10px"},children:a.bTokenSymbol})]}),Object(A.jsx)("span",{className:"add"})]}),Object(A.jsxs)("div",{className:"enter-margin",children:[Object(A.jsx)("div",{className:"input-margin",children:Object(A.jsxs)("div",{className:"box",children:[Object(A.jsx)("div",{className:"amount",style:{display:""!==k?"block":"none"},children:"AMOUNT"}),Object(A.jsx)("input",{type:"number",className:"margin-value",placeholder:"Amount",value:k,onChange:function(e){var t=e.target.value;y(t)}})]})}),Object(A.jsx)("div",{children:a.bTokenSymbol})]}),Object(A.jsxs)("div",{className:"max",children:["MAX: ",Object(A.jsx)("span",{className:"max-num",children:u}),Object(A.jsx)("span",{className:"max-btn-left",onClick:function(){y(u)},children:"ADD ALL"})]}),Object(A.jsx)("div",{className:"add-margin-btn",children:Object(A.jsx)(d.a,{className:"margin-btn",btnText:"DEPOSIT",checkApprove:!0,wallet:t,spec:a,click:function(){return Q(k)}})})]})})]})})})}},582:function(e,t,c){"use strict";c.d(t,"a",(function(){return u}));var a=c(0),n=c.n(a),s=c(1),i=c(12),r=c(6),l=c(39),o=c(573),d=c(572),j=c(62),A=c(576),b=c(57);function u(e){var t=e.wallet,c=e.spec,a=void 0===c?{}:c,u=e.position,O=e.onClose,m=e.afterWithdraw,x=e.availableBalance,f=e.nested,g=Object(r.useState)(""),v=Object(i.a)(g,2),h=v[0],p=v[1],N=Object(r.useState)(""),w=Object(i.a)(N,2),I=w[0],D=w[1],k=Object(r.useState)(""),y=Object(i.a)(k,2),C=y[0],B=y[1],S=Object(r.useState)(!1),M=Object(i.a)(S,2),Q=M[0],E=M[1];Object(A.a)(f);var T=function(){var e=Object(s.a)(n.a.mark((function e(){var c,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConnected()&&x&&(p(c=x),a=c.indexOf("."),D(a>0?c.substring(a+1,a+3):"00"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(n.a.mark((function e(){var c,s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=0===+u.volume?Object(j.a)(u.margin):Object(j.a)(h),!Object(j.a)(C).gt(c)){e.next=5;break}return alert("under margin"),e.abrupt("return");case 5:if(!(+C<=0||isNaN(C))){e.next=8;break}return alert("It has to be greater than zero"),e.abrupt("return");case 8:return E(!0),e.next=11,Object(l.withdrawMargin)(t.detail.chainId,a.pool,t.detail.account,C,a.bTokenId);case 11:(s=e.sent).success?(m(),O()):(i="string"===typeof s.error?s.error:s.error.errorMessage||s.error.message,alert(i)),E(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return T(),function(){}}),[t.detail.account,u.margin,u.unrealizedPnl]),Object(b.jsx)("div",{className:"modal fade",id:"removeMargin",children:Object(b.jsx)("div",{className:"modal-dialog",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsxs)("div",{className:"modal-header",children:[Object(b.jsx)("div",{className:"title",children:"WITHDRAW MARGIN"}),Object(b.jsx)("div",{className:"close",onClick:function(){Q||O()},children:Object(b.jsx)("span",{children:"\xd7"})})]}),Object(b.jsx)("div",{className:"modal-body",children:Object(b.jsxs)("div",{className:"margin-box-info",children:[Object(b.jsx)("div",{children:"Available Balance"}),Object(b.jsxs)("div",{className:"money",children:[Object(b.jsx)("span",{children:Object(b.jsxs)("span",{className:"bt-balance",children:[Object(b.jsx)(d.a,{value:h,thousandSeparator:!0,decimalScale:0}),".",Object(b.jsx)("span",{style:{fontSize:"12px"},children:I})]})}),Object(b.jsx)("span",{className:"remove"})]}),Object(b.jsxs)("div",{className:"enter-margin remv",children:[Object(b.jsx)("div",{className:"input-margin",children:Object(b.jsxs)("div",{className:"box",children:[Object(b.jsx)("div",{className:"amount",style:{display:""!==C?"block":"none"},children:"AMOUNT"}),Object(b.jsx)("input",{type:"number",className:"margin-value",value:C,onChange:function(e){var t=e.target.value;B(t)},placeholder:"Amount"})]})}),Object(b.jsx)("div",{children:a.baseToken})]}),0===+u.volume&&Object(b.jsxs)("div",{className:"max",children:["MAX: ",Object(b.jsx)("span",{className:"max-num",children:h||u.margin}),Object(b.jsx)("span",{className:"max-btn-left",onClick:function(){B(x)},children:"REMOVE ALL"})]}),+u.volume>0&&Object(b.jsxs)("div",{className:"max",children:[Object(b.jsx)("span",{className:"max-num"}),Object(b.jsx)("span",{className:"max-btn-left",children:" "})]}),Object(b.jsx)("div",{className:"add-margin-btn",children:Object(b.jsx)(o.a,{className:"margin-btn",btnText:"WITHDRAW",click:R,checkApprove:!0,wallet:t,spec:a})})]})})]})})})}},583:function(e,t,c){"use strict";c.d(t,"a",(function(){return v}));var a=c(22),n=c(0),s=c.n(n),i=c(1),r=c(12),l=c(6),o=c(575),d=c(577),j=c(582),A=c(584),b=c(585),u=c(572),O=c(21),m=c(576),x=c(57),f=Object(o.a)(d.a),g=Object(o.a)(j.a);function v(e){var t=e.wallet,c=e.spec,n=e.afterDepositAndWithdraw,o=e.position,d=e.onClose,j=Object(l.useState)([]),v=Object(r.a)(j,2),h=v[0],p=v[1],N=parseInt((document.body.offsetHeight-140)/54),w=Object(l.useState)(Array.from({length:N})),I=Object(r.a)(w,2),D=I[0],k=I[1],y=Object(l.useState)(!1),C=Object(r.a)(y,2),B=C[0],S=C[1],M=Object(l.useState)(!1),Q=Object(r.a)(M,2),E=Q[0],T=Q[1],R=Object(l.useState)(""),J=Object(r.a)(R,2),Y=J[0],G=J[1],H=Object(l.useState)(""),P=Object(r.a)(H,2),F=P[0],L=P[1],z=Object(l.useState)(""),Z=Object(r.a)(z,2),U=Z[0],W=Z[1],K=Object(l.useState)(""),V=Object(r.a)(K,2),X=V[0],q=V[1];Object(m.a)();var _=function(){var e=Object(i.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.detail.account||!c){e.next=6;break}return e.next=3,Object(O.m)(t.detail.chainId,c.pool,t.detail.account,c.symbolId);case 3:a=e.sent,p(a),a.length<N&&k(Array.from({length:N-a.length}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){return _(),window.scrollTo(0,0),function(){}}),[t.detail.account,c]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"modal fade",children:Object(x.jsx)("div",{className:"modal-dialog",children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsxs)("div",{className:"modal-header",children:[Object(x.jsx)("div",{className:"title",children:"Balance in contract"}),Object(x.jsx)("div",{className:"close","data-dismiss":"modal",onClick:function(){n(),d()},children:Object(x.jsx)("span",{children:"\xd7"})})]}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("div",{className:"balance-list",children:[Object(x.jsxs)("div",{className:"row header",children:[Object(x.jsx)("span",{className:"btoken pc",children:"Base Token"}),Object(x.jsx)("span",{className:"btoken mobile",children:"B Token"}),Object(x.jsx)("span",{className:"w-balance pc",children:"Wallet Balance"}),Object(x.jsx)("span",{className:"w-balance mobile",children:"Wal Bal"}),Object(x.jsx)("span",{className:"avail-balance pc",children:"Available Balance"}),Object(x.jsx)("span",{className:"avail-balance mobile",children:"Avail Bal"})]}),h.map((function(e,t){return Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("span",{className:"btoken",children:e.bTokenSymbol}),Object(x.jsx)("span",{className:"w-balance",children:Object(x.jsx)(u.a,{value:e.walletBalance,fixedDecimalScale:!0,decimalScale:2})}),Object(x.jsx)("span",{className:"avail-balance",children:Object(x.jsx)(u.a,{value:e.availableBalance,fixedDecimalScale:!0,decimalScale:2})}),Object(x.jsxs)("span",{className:"action",children:[Object(x.jsxs)("span",{className:"add-margin",id:"openAddMargin",onClick:function(){return function(e,t,c){G(e),W(t),q(c),S(!0)}(e.walletBalance,e.bTokenId,e.bTokenSymbol)},children:[Object(x.jsx)("img",{src:A.a,alt:"add margin"})," Add"]}),Object(x.jsxs)("span",{className:"remove-margin",onClick:function(){return function(e,t,c){L(e),W(t),q(c),T(!0)}(e.availableBalance,e.bTokenId,e.bTokenSymbol)},children:[Object(x.jsx)("img",{src:b.a,alt:"add margin"})," Remove"]})]})]},t)})),D.map((function(e){return Object(x.jsx)("div",{className:"row"})}))]})})]})})}),Object(x.jsx)(f,{wallet:t,onClose:function(){return S(!1)},balance:Y,spec:Object(a.a)(Object(a.a)({},c),{},{bTokenId:U,bTokenSymbol:X}),position:o,modalIsOpen:B,afterDeposit:function(){S(!1),_()},className:"trading-dialog",nested:!0}),Object(x.jsx)(g,{wallet:t,onClose:function(){return T(!1)},spec:Object(a.a)(Object(a.a)({},c),{},{bTokenId:U,bTokenSymbol:X}),position:o,modalIsOpen:E,afterWithdraw:function(){T(!1),_()},availableBalance:F,className:"trading-dialog",nested:!0})]})}},584:function(e,t,c){"use strict";t.a=c.p+"static/media/remove-margin.1ccb58c4.svg"},585:function(e,t,c){"use strict";t.a=c.p+"static/media/add-margin.8b496dd1.svg"},589:function(e,t,c){"use strict";var a=c(12),n=c(6),s=c(53),i=c(0),r=c.n(i),l=c(1),o=c(39),d=c(571),j=c.n(d),A=c(575),b=c(577),u=c(582),O=c(572),m=c(62),x=c(162),f=c(583),g=c(585),v=c(584),h=c(595),p=c(57),N=Object(A.a)(b.a),w=Object(A.a)(u.a),I=Object(A.a)(f.a);var D=Object(x.b)("wallet","trading","version")(Object(x.c)((function(e){var t=e.wallet,c=e.trading,i=e.version,d=Object(n.useState)(!1),A=Object(a.a)(d,2),b=A[0],u=A[1],x=Object(n.useState)(""),f=Object(a.a)(x,2),D=f[0],k=f[1],y=Object(n.useState)(""),C=Object(a.a)(y,2),B=C[0],S=C[1],M=Object(n.useState)(""),Q=Object(a.a)(M,2),E=Q[0],T=Q[1],R=Object(n.useState)(!1),J=Object(a.a)(R,2),Y=J[0],G=J[1],H=Object(n.useState)(!1),P=Object(a.a)(H,2),F=P[0],L=P[1],z=Object(n.useState)(!1),Z=Object(a.a)(z,2),U=Z[0],W=Z[1],K=Object(n.useState)(""),V=Object(a.a)(K,2),X=V[0],q=V[1],_=function(){var e=Object(l.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConnected()||!c.config){e.next=5;break}return e.next=3,Object(o.getWalletBalance)(t.detail.chainId,c.config.pool,t.detail.account,c.config.bTokenId).catch((function(e){return console.log(e)}));case 3:(a=e.sent)&&q(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,Object(o.closePosition)(t.detail.chainId,c.config.pool,t.detail.account,c.config.symbolId).finally((function(){return u(!1)}));case 3:(a=e.sent).success?ee():"string"===typeof a.error?alert(a.error||"Liquidation failed"):"object"===Object(s.a)(a.error)?alert(a.error.errorMessage||"Liquidation failed"):alert("Close position failed");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){c.refresh(),_()},te=j()("Direction","info-num",{LONG:"LONG"===D,SHORT:"SHORT"===D});return Object(n.useEffect)((function(){return _(),function(){}}),[t.detail.account,c.config]),Object(n.useEffect)((function(){if(c.position){var e=c.position,t=+e.volume>0?"LONG":Object(m.b)(e.volume,0)||!e.volume?"--":"SHORT";k(t),S(Object(o.bg)(e.margin).plus(e.unrealizedPnl).toString()),T(Object(o.bg)(e.margin).plus(e.unrealizedPnl).minus(e.marginHeld).toString())}return function(){}}),[c.position.volume,c.position.margin,c.position.unrealizedPnl]),Object(p.jsxs)("div",{className:"position-info",children:[Object(p.jsxs)("div",{className:"info",children:[Object(p.jsxs)("div",{className:"info-left",children:[Object(p.jsx)("div",{className:"title-text",children:"Position"}),Object(p.jsx)("div",{className:"info-num",children:c.position.volume})]}),Object(p.jsx)("div",{className:"info-right",children:Object(p.jsxs)("div",{className:"close-position",id:"close-p",onClick:$,children:[Object(p.jsx)("span",{className:"spinner spinner-border spinner-border-10px",role:"status","aria-hidden":"true",style:{display:b?"block":"none"}}),Object(p.jsx)("svg",{t:"1618369709897",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2009",width:"14",height:"14",children:Object(p.jsx)("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z","p-id":"2010",fill:"#ffffff"})})," Close"]})})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsxs)("div",{className:"info-left",children:[Object(p.jsx)("div",{className:"title-text",children:"Average Entry Price"}),Object(p.jsx)("div",{className:"info-num",children:Object(p.jsx)(O.a,{value:c.position.averageEntryPrice,decimalScale:2})})]}),Object(p.jsx)("div",{className:"info-right"})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsxs)("div",{className:"info-left",children:[Object(p.jsx)("div",{className:"title-text balance-con",children:"Balance in Contract (Dynamic Balance)"}),Object(p.jsx)("div",{className:"info-num",children:Object(p.jsx)(O.a,{decimalScale:2,allowZero:!0,value:B})})]}),Object(p.jsx)("div",{className:"info-right",children:i.isV1?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"add-margin",id:"openAddMargin",onClick:function(){return L(!0)},children:[Object(p.jsx)("img",{src:v.a,alt:"add margin"})," Add"]}),Object(p.jsxs)("div",{className:"remove-margin",onClick:function(){return W(!0)},children:[Object(p.jsx)("img",{src:g.a,alt:"add margin"})," Remove"]})]}):Object(p.jsxs)("div",{onClick:function(){return G(!0)},children:[Object(p.jsx)("img",{src:h.a,alt:"Remove margin"})," Detail"]})})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsxs)("div",{className:"info-left",children:[Object(p.jsx)("div",{className:"title-text",children:"Direction"}),Object(p.jsx)("div",{className:te,children:D})]}),Object(p.jsx)("div",{className:"info-right"})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsxs)("div",{className:"info-left",children:[Object(p.jsx)("div",{className:"title-text",children:"Margin"}),Object(p.jsx)("div",{className:"info-num",children:Object(p.jsx)(O.a,{value:c.position.marginHeld,decimalScale:2})})]}),Object(p.jsx)("div",{className:"info-right"})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsxs)("div",{className:"info-left",children:[Object(p.jsx)("div",{className:"title-text",children:"Unrealized PnL"}),Object(p.jsx)("div",{className:"info-num",children:Object(p.jsx)(O.a,{value:c.position.unrealizedPnl,decimalScale:8})})]}),Object(p.jsx)("div",{className:"info-right"})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsxs)("div",{className:"info-left",children:[Object(p.jsx)("div",{className:"title-text",children:"Liquidation Price"}),Object(p.jsx)("div",{className:"info-num",children:Object(p.jsx)(O.a,{decimalScale:2,value:c.position.liquidationPrice})})]}),Object(p.jsx)("div",{className:"info-right"})]}),Object(p.jsx)(N,{wallet:t,modalIsOpen:F,onClose:function(){L(!1)},spec:c.config,afterDeposit:function(){L(!1),ee()},balance:X,className:"trading-dialog"}),Object(p.jsx)(w,{wallet:t,modalIsOpen:U,onClose:function(){W(!1)},spec:c.config,afterWithdraw:function(){W(!1),ee()},position:c.position,availableBalance:E,className:"trading-dialog"}),Object(p.jsx)(I,{wallet:t,modalIsOpen:Y,onClose:function(){G(!1)},spec:c.config,afterDepositAndWithdraw:function(){ee()},position:c.position,overlay:{background:"#1b1c22",top:80},className:"balance-list-dialog"})]})}))),k=c(596),y=c.n(k),C=c(574);var B=c(164),S=c(597),M=B[o.DeriEnv.get()].chainInfo;function Q(e){var t=e.wallet,c=e.his,s=Object(n.useState)(!1),i=Object(a.a)(s,2),r=i[0],l=i[1],o=function(){l(!0)},d=function(){l(!1)},A=j()("view",{hover:r});return Object(p.jsxs)("span",{className:A,onMouseOut:d,children:[Object(p.jsx)("span",{className:"view-space",onMouseOver:o,children:Object(p.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"".concat(M[t.detail.chainId].viewUrl,"tx/").concat(c.transactionHash),children:["View at ",M[t.detail.chainId].viewUrl]})}),Object(p.jsx)("span",{className:"right-arrow",onMouseOver:o,children:Object(p.jsx)("img",{alt:"",src:S.a})}),Object(p.jsx)("span",{className:"view-arrow",onMouseOver:o,onMouseOut:d,children:Object(p.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(M[t.detail.chainId].viewUrl,"tx/").concat(c.transactionHash),children:Object(p.jsx)("img",{rel:"noreferrer",alt:"",src:"data:image/svg+xml;base64,DQo8c3ZnIGZpbGw9Im5vbmUiIGhlaWdodD0iMTAiIHdpZHRoPSIxMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNOC42NzYuNjQyYS42NS42NSAwIDAwLS4wNzIuMDA2SDQuNzkzYS42NS42NSAwIDAwLS41Ny45NzUuNjUuNjUgMCAwMC41Ny4zMjJINy4xMkwuNDM4IDguNjE0YS42NDcuNjQ3IDAgMDAuMjg2IDEuMDk2LjY1LjY1IDAgMDAuNjMyLS4xNzlMOC4wNCAyLjg2MXYyLjMyNGEuNjQ4LjY0OCAwIDAwLjk3Ny41Ny42NDguNjQ4IDAgMDAuMzIyLS41N1YxLjM4YS42NDcuNjQ3IDAgMDAtLjY2Mi0uNzM3eiIgZmlsbD0iI0FBQUFBQSIvPg0KPC9zdmc+DQoNCg=="})})})]})}var E=Object(x.b)("wallet","trading")(Object(x.c)((function(e){var t=e.wallet,c=e.trading,s=Object(n.useState)([]),i=Object(a.a)(s,2),o=i[0],d=i[1];function j(){return(j=Object(l.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConnected()&&c.configs&&c.config&&(a=c.history,n=a.map((function(e){e.directionText="LONG / BUY","SHORT"===e.direction?e.directionText="SHORT / SELL":"Liquidation"===e.direction&&(e.directionText="LIQUIDATION");var t=c.config;return t&&(e.baseTokenText=e.baseToken?" ".concat(t.symbol," / ").concat(t.bTokenSymbol):t.symbol),e})),d(n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){return function(){j.apply(this,arguments)}(),function(){}}),[t.detail,c.configs,c.config,c.history]),Object(p.jsx)("div",{className:"history-info","v-show":"historyShow",children:o.map((function(e,c){return Object(p.jsxs)("div",{className:"history-box",children:[Object(p.jsxs)("div",{className:"direction-bToken-price",children:[Object(p.jsxs)("span",{className:"direction",children:[Object(p.jsxs)("span",{className:"".concat(e.direction),children:[" ",e.directionText]}),Object(p.jsx)("span",{className:"basetoken",children:e.baseTokenText}),Object(p.jsx)(Q,{wallet:t,his:e})]}),Object(p.jsx)("span",{className:"history-text time",children:y.a.asString("yyyy-MM-dd hh:mm:ss",new Date(parseInt(e.time)))})]}),Object(p.jsxs)("div",{className:"time-price-volume",children:[Object(p.jsxs)("div",{className:"history-price",children:[Object(p.jsx)("div",{className:"history-title",children:"Volume @ Price"}),Object(p.jsxs)("div",{className:"history-text",children:[e.volume," @ ",Object(p.jsx)(O.a,{value:e.price,decimalScale:2,displayType:"text"})]})]}),Object(p.jsxs)("div",{className:"notional",children:[Object(p.jsx)("div",{className:"history-title",children:"Notional"}),Object(p.jsx)("div",{className:"history-text",children:Object(p.jsx)(O.a,{value:e.notional,decimalScale:4})})]}),Object(p.jsxs)("div",{className:"history-fee",children:[Object(p.jsx)("div",{className:"history-title pc",children:"Transaction Fee"}),Object(p.jsx)("div",{className:"history-title mobile",children:"Fee"}),Object(p.jsx)("div",{className:"history-text",children:Object(p.jsx)(O.a,{value:e.transactionFee,decimalScale:4})})]})]})]},c)}))})})));var T=Object(x.b)("wallet","trading")(Object(x.c)((function(e){e.wallet;var t=e.trading;return Object(p.jsxs)("div",{className:"contract-box",children:[Object(p.jsx)("div",{className:"contract-header"}),Object(p.jsxs)("div",{className:"contract-info",children:[Object(p.jsx)("div",{className:"conntract-header",children:"CONTRACT INFO"}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"title",children:"Base Token"}),Object(p.jsx)("div",{className:"text",children:t.contract.bSymbol})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"title",children:"Symbol"}),Object(p.jsx)("div",{className:"text",children:t.contract.symbol})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"title",children:"Multiplier"}),Object(p.jsx)("div",{className:"text",children:t.contract.multiplier})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"title",children:"Funding Rate Coefficient"}),Object(p.jsx)("div",{className:"text",children:t.contract.fundingRateCoefficient})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"title",children:"Min Initial Margin Ratio"}),Object(p.jsx)("div",{className:"text",children:Object(p.jsx)(C.a,{displayType:"text",value:100*t.contract.minInitialMarginRatio,decimalScale:2,suffix:"%"})})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"title",children:"Min Maintenance Margin Ratio"}),Object(p.jsx)("div",{className:"text",children:Object(p.jsx)(C.a,{displayType:"text",value:100*t.contract.minMaintenanceMarginRatio,decimalScale:2,suffix:"%"})})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"title",children:"Transaction Fee"}),Object(p.jsx)("div",{className:"text",children:Object(p.jsx)(C.a,{displayType:"text",value:100*t.contract.feeRatio,decimalScale:2,suffix:"%"})})]})]})]})}))),R=c(22),J=c(165),Y=c(631),G=(c(622),c(623),Y.b.Handle);function H(e){var t=e.value,c=(e.dragging,e.index),a=Object(J.a)(e,["value","dragging","index"]);return Object(p.jsx)(Y.a,{prefixCls:"rc-slider-tooltip",overlay:t||"",placement:"top",visible:!!t,overlayStyle:{display:"block"},overlayInnerStyle:{color:"#569BDA",background:"none",display:"block",fontSize:"10px",boxShadow:"none"},children:Object(p.jsx)(G,Object(R.a)({value:t},a))},c)}function P(e){var t=e.max,c=void 0===t?"--":t,s=e.start,i=e.onValueChange,r=e.freeze,l=Object(n.useState)(0),o=Object(a.a)(l,2),d=o[0],A=o[1],b=Object(n.useState)(0),u=Object(a.a)(b,2),O=u[0],m=u[1],x=Object(n.useState)(!1),f=Object(a.a)(x,2),g=f[0],v=f[1],h=Object(n.useState)({}),N=Object(a.a)(h,2),w=N[0],I=N[1],D=Object(n.useState)(!1),k=Object(a.a)(D,2),y=k[0],C=k[1];Object(n.useEffect)((function(){return v(r),0===Math.abs(c)&&v(!0),function(){}}),[r,c]),Object(n.useEffect)((function(){var e=c;return 0!==Math.abs(c)&&"--"!==c||(c=100),isNaN(e)&&A(""),c&&I(function(e){for(var t={},c=+e/10,a=0;a<=10;a++)if(0===a||10===a){var n={top:"-16px",position:"relative"};10===a&&(n.width=100,n.left="-10px",n.paddingRight="10px"),t[a*c]=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{style:n,children:10===a?(a*c).toFixed(2):a*c}),Object(p.jsx)("div",{style:{top:"-16px",position:"relative"},children:"l"})]})}else t[a*c]="l";return t}(c)),A(+c),"--"!==e&&C(!0),0!==Math.abs(c)&&0!==Math.abs(e)||C(!1),function(){}}),[c]),Object(n.useEffect)((function(){return isNaN(s)?m(0):m(s),function(){}}),[s]);var B=j()("deri-slider",{controlled:y});return Object(p.jsx)(Y.b,{handle:H,className:B,start:s,min:0,max:d,value:O,onChange:function(e){m(e),i(e)},disabled:g,overlay:O,step:.01,marks:w})}var F=c(573);var L=c.p+"static/media/symbol-arrow.66dccd14.svg";function z(e){var t=e.version,c=e.spec;return t.isV1?"".concat(c.symbol||"BTCUSD"," / ").concat(c.bTokenSymbol||"BUSD"," (10X)"):"".concat(c.symbol||"BTCUSD"," (10X)")}var Z=Object(x.b)("trading","version")(Object(x.c)((function(e){var t=e.trading,c=e.version,s=e.setSpec,i=e.spec,r=Object(n.useState)(!1),l=Object(a.a)(r,2),o=l[0],d=l[1],A=j()("dropdown-menu",{show:o});return Object(p.jsxs)("div",{className:"btn-group check-baseToken-btn",children:[Object(p.jsxs)("button",{type:"button",onClick:function(e){t.configs.length>0&&(e.preventDefault(),d(!o))},className:"btn chec",children:[Object(p.jsx)(z,{spec:i,version:c}),Object(p.jsx)("span",{className:"check-base-down",children:Object(p.jsx)("img",{src:L,alt:""})})]}),Object(p.jsx)("div",{className:A,children:Object(p.jsx)("div",{className:"dropdown-box",children:t.configs.map((function(e,a){return Object(p.jsx)("div",{className:"dropdown-item",onClick:function(c){return function(e){var c=t.configs.find((function(t){return t.pool===e.pool&&e.symbolId===t.symbolId}));c&&(t.pause(),s(c),t.switch(c),d(!1))}(e)},children:Object(p.jsx)(z,{spec:e,version:c})},a)}))})})]})})));var U=Object(A.a)((function(e){var t=e.wallet,c=e.spec,s=e.onClose,i=e.direction,d=e.volume,j=e.position,A=void 0===j?0:j,b=e.indexPrice,u=e.leverage,O=e.transFee,m=e.afterTrade,x=Object(n.useState)(!1),f=Object(a.a)(x,2),g=f[0],v=f[1],h=function(){var e=Object(l.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),d="long"===i?d:-+d,e.next=4,Object(o.tradeWithMargin)(t.detail.chainId,c.pool,t.detail.account,d,c.symbolId);case 4:(a=e.sent).success?(m(),s()):(n="string"===typeof a.error?a.error:a.error.errorMessage||a.error.message,alert(n)),v(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){g||s()},w="long"===i?+d+ +A:+A-+d;return Object(p.jsx)("div",{className:"modal-dialog",children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsxs)("div",{className:"modal-header",children:[Object(p.jsx)("div",{className:"title",children:"CONFIRM"}),Object(p.jsx)("div",{className:"close","data-dismiss":"modal",onClick:N,children:Object(p.jsx)("span",{children:"\xd7"})})]}),Object(p.jsx)("div",{className:"modal-body",children:Object(p.jsxs)("div",{className:"contract-box-info",children:[Object(p.jsxs)("div",{className:"top",children:[Object(p.jsxs)("div",{className:"text",children:[Object(p.jsx)("div",{className:"text-title",children:"# of Contracts"}),Object(p.jsx)("div",{className:"text-num",children:"long"===i?d:"-".concat(d)})]}),Object(p.jsxs)("div",{className:"text",children:[Object(p.jsx)("div",{className:"text-title",children:"Position after execution"}),Object(p.jsx)("div",{className:"text-num",children:w})]}),Object(p.jsxs)("div",{className:"text",children:[Object(p.jsx)("div",{className:"text-title",children:"Direction"}),Object(p.jsx)("div",{className:"text-num",children:Object(p.jsx)("span",{className:i,children:i})})]}),Object(p.jsxs)("div",{className:"text",children:[Object(p.jsx)("div",{className:"text-title",children:"Trade Price (estimated)"}),Object(p.jsx)("div",{className:"text-num",children:Object(p.jsx)(C.a,{value:b,decimalScale:2,displayType:"text"})})]}),Object(p.jsxs)("div",{className:"text",children:[Object(p.jsx)("div",{className:"text-title",children:"Leverage after execution"}),Object(p.jsxs)("div",{className:"text-num",children:[u,"X"]})]}),Object(p.jsxs)("div",{className:"text",children:[Object(p.jsx)("div",{className:"text-title",children:"Transaction Fee"}),Object(p.jsx)("div",{className:"text-num",children:Object(p.jsx)(C.a,{value:O,decimalScale:2,suffix:" ".concat(c.bTokenSymbol),displayType:"text"})})]})]}),Object(p.jsx)("div",{className:"modal-footer",children:Object(p.jsxs)("div",{className:"long-btn","v-if":"confirm",children:[Object(p.jsx)("button",{className:"cancel",onClick:N,children:"CANCEL"}),Object(p.jsx)(F.a,{className:"confirm",btnText:"OK",click:h})]})})]})})]})})})),W=Object(A.a)(b.a),K=Object(A.a)(f.a);function V(e){var t=e.hasConnectWallet,c=e.wallet,s=e.spec,i=e.volume,d=e.available,j=e.baseToken,A=e.leverage,b=e.indexPrice,u=e.position,O=e.transFee,m=e.afterTrade,x=e.direction,f=e.trading,g=(e.symbolId,e.bTokenId),v=e.version,h=Object(n.useState)(!0),N=Object(a.a)(h,2),w=N[0],I=N[1],D=Object(n.useState)(!1),k=Object(a.a)(D,2),y=k[0],C=k[1],B=Object(n.useState)(!0),S=Object(a.a)(B,2),M=S[0],Q=S[1],E=Object(n.useState)(!1),T=Object(a.a)(E,2),R=T[0],J=T[1],Y=Object(n.useState)(!1),G=Object(a.a)(Y,2),H=G[0],P=G[1],L=Object(n.useState)(""),z=Object(a.a)(L,2),Z=z[0],V=z[1],X=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.detail,e.next=3,Object(o.unlock)(t.chainId,s.pool,t.account,g);case 3:e.sent.success?(I(!0),f.refresh()):(I(!1),alert("Approve faild"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(!1),m();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t()||!s){e.next=6;break}return a=c.detail,e.next=4,Object(o.isUnlocked)(a.chainId,s.pool,a.account,g).catch((function(e){return console.log(e)}));case 4:n=e.sent,I(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isConnected()||!s){e.next=5;break}return e.next=3,Object(o.getWalletBalance)(c.detail.chainId,s.pool,c.detail.account,g).catch((function(e){return console.log(e)}));case 3:(t=e.sent)&&V(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return t()&&s&&$(),function(){}}),[c.detail.account,s,d]),Object(n.useEffect)((function(){return H||R||C(!(+d>0)),function(){}}),[d]),Object(n.useEffect)((function(){return Q(!i),function(){}}),[i]),Object(n.useEffect)((function(){return s&&_(),function(){}}),[s]);var ee=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(U,{wallet:c,className:"trading-dialog",spec:s,modalIsOpen:R,onClose:function(){return J(!1)},leverage:A,baseToken:j,volume:i,position:u.volume,indexPrice:b,transFee:O,afterTrade:m,direction:x}),Object(p.jsx)("button",{className:"short-submit",onClick:function(){return J(!0)},children:"TRADE"})]});return t()?w?y&&void 0!==d?ee=Object(p.jsxs)(p.Fragment,{children:[v.isV2?Object(p.jsx)(K,{wallet:c,modalIsOpen:H,onClose:function(){return P(!1)},spec:f.config,afterDepositAndWithdraw:function(){P(!1),m()},position:f.position,overlay:{background:"#1b1c22",top:80},className:"balance-list-dialog"}):Object(p.jsx)(W,{wallet:c,modalIsOpen:H,onClose:function(){return P(!1)},spec:s,balance:Z,afterDeposit:q,className:"trading-dialog"}),Object(p.jsx)("div",{className:"noMargin-text",children:"You\xa0have\xa0no\xa0fund\xa0in\xa0contract.\xa0Please\xa0deposit\xa0first."}),Object(p.jsx)("button",{className:"short-submit",onClick:function(){return P(!0)},children:"DEPOSIT"})]}):M&&(ee=Object(p.jsx)(F.a,{className:"btn btn-danger short-submit",disabled:!0,btnText:"ENTER VOLUME"})):ee=Object(p.jsx)(F.a,{className:"approve",btnText:"APPROVE",click:X}):ee=Object(p.jsx)(F.a,{className:"btn btn-danger connect",btnText:"Connect Wallet",click:function(){c.connect()}}),Object(p.jsx)("div",{className:"submit-btn",children:ee})}var X=Object(x.b)("wallet","trading","version")(Object(x.c)((function(e){var t=e.wallet,c=void 0===t?{}:t,s=e.trading,i=e.version,d=Object(n.useState)("long"),A=Object(a.a)(d,2),b=A[0],u=A[1],m=Object(n.useState)({}),x=Object(a.a)(m,2),f=x[0],g=x[1],v=Object(n.useState)(""),h=Object(a.a)(v,2),N=h[0],w=h[1],I=Object(n.useState)(""),D=Object(a.a)(I,2),k=D[0],y=D[1],C=Object(n.useState)({}),B=Object(a.a)(C,2),S=B[0],M=B[1],Q=Object(n.useState)("rise"),E=Object(a.a)(Q,2),T=E[0],R=E[1],J=Object(n.useState)(!0),Y=Object(a.a)(J,2),G=Y[0],H=Y[1],F=Object(n.useRef)(),L=j()("checked-long","check-long-short"," long-short",{"checked-short":"short"===b}),z=j()("contrant-input",{inputFamliy:""!==s.volume}),U=function(){return f&&f.pool},W=function(){return c&&c.detail&&c.detail.account},K=function(e){s.setVolume(""),s.setUserSelectedDirection(e),u(e)},X=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(W()&&U()&&s.volumeDisplay)){e.next=5;break}return e.next=3,Object(o.getEstimatedFee)(c.detail.chainId,f.pool,Math.abs(s.volumeDisplay),f.symbolId);case 3:t=e.sent,isNaN(t)||y((+t).toFixed(2));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(W()&&U()&&s.volumeDisplay)){e.next=10;break}return t=c.detail,a="long"===b?s.volumeDisplay:-s.volumeDisplay,e.next=5,Object(o.getLiquidityUsed)(t.chainId,f.pool,f.symbolId);case 5:return n=e.sent,e.next=8,Object(o.getEstimatedLiquidityUsed)(t.chainId,f.pool,a,f.symbolId);case 8:i=e.sent,n&&i&&M({curLiqUsed:n.liquidityUsed0,afterLiqUsed:i.liquidityUsed1});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(W()&&U()&&s.volumeDisplay)){e.next=6;break}return t="long"===b?s.volumeDisplay:-s.volumeDisplay,e.next=4,Object(o.getEstimatedFundingRate)(c.detail.chainId,f.pool,t,f.symbolId);case 4:(a=e.sent)&&w(a.fundingRate1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){if(W()&&U()){var e=c.detail,t=e.chainId,a=e.account,n=f.pool;o.priceCache.clear(),o.priceCache.update(t,n),o.PerpetualPoolParametersCache.update(t,n,a)}}(),function(){}}),[c.detail]),Object(n.useEffect)((function(){var e;return s.position&&s.position.volume&&(e=+s.position.volume,u(e>=0?"long":"short"),s.setUserSelectedDirection(+s.position.volume>0?"long":"short")),function(){}}),[s.position.volume]),Object(n.useEffect)((function(){return""!==s.volume?(s.pause(),_(),q(),X()):c.detail.account&&s.resume(),function(){}}),[s.volume]),Object(n.useEffect)((function(){return F.current>s.index?R("fall"):R("rise"),F.current=s.index,function(){}}),[s.index]),Object(n.useEffect)((function(){return s.config&&g(s.config),function(){}}),[s.config]),Object(n.useEffect)((function(){s.init(c,i)}),[c.detail.account,i.current]),Object(n.useEffect)((function(){return s.margin&&s.direction&&u(s.direction),function(){}}),[s.margin]),Object(n.useEffect)((function(){return s.index&&c.isConnected()&&c.supportChain&&H(!1),function(){}}),[c.detail.account,s.index]),Object(p.jsx)("div",{className:"trade-info",children:Object(p.jsxs)("div",{className:"trade-peration",children:[Object(p.jsxs)("div",{className:"check-baseToken",children:[Object(p.jsx)(Z,{setSpec:g,spec:f}),Object(p.jsxs)("div",{className:"price-fundingRate pc",children:[Object(p.jsxs)("div",{className:"index-prcie",children:["Index Price: ",Object(p.jsxs)("span",{className:T,children:["\xa0 ",Object(p.jsx)(O.a,{value:s.index,decimalScale:2})]})]}),Object(p.jsxs)("div",{className:"funding-rate",children:[Object(p.jsx)("span",{children:"Funding Rate Annual: \xa0"}),Object(p.jsx)("span",{className:"funding-per",title:s.fundingRateTip,children:Object(p.jsx)(O.a,{value:s.fundingRate.fundingRate0,decimalScale:4,suffix:"%"})})]})]}),Object(p.jsxs)("div",{className:"price-fundingRate mobile",children:[Object(p.jsxs)("div",{className:"index-prcie",children:["Index: ",Object(p.jsxs)("span",{className:T,children:["\xa0 ",Object(p.jsx)(O.a,{value:s.index,decimalScale:2})]})]}),Object(p.jsxs)("div",{className:"funding-rate",children:[Object(p.jsx)("span",{children:"Funding: \xa0"}),Object(p.jsx)("span",{className:"funding-per",title:s.fundingRateTip,children:Object(p.jsx)(O.a,{value:s.fundingRate.fundingRate0,decimalScale:4,suffix:"%"})})]})]})]}),Object(p.jsxs)("div",{className:L,children:[Object(p.jsx)("div",{className:"check-long",onClick:function(){return K("long")},children:"LONG / BUY"}),Object(p.jsx)("div",{className:"check-short",onClick:function(){return K("short")},children:"SHORT / SELL"})]}),Object(p.jsxs)("div",{className:"the-input",children:[Object(p.jsxs)("div",{className:"left",children:[Object(p.jsxs)("div",{className:"current-position",children:[Object(p.jsx)("span",{children:"Current Position"}),Object(p.jsx)("span",{className:"position-text",children:Object(p.jsx)(O.a,{value:s.position.volume,allowZero:!0})})]}),Object(p.jsxs)("div",{className:"contrant",children:[Object(p.jsx)("input",{type:"number",onFocus:function(e){e.target.setAttribute("class","contrant-input inputFamliy")},onBlur:function(e){var t=e.target;""===t.value&&t.setAttribute("class","contrant-input")},onKeyPress:function(e){(e.which<48||e.which>57)&&e.preventDefault()},disabled:!s.index||0===Math.abs(s.position.margin),onChange:function(e){return function(e){s.setMargin("");var t=e.target.value;"0"===t&&(t=""),s.setVolume(t)}(e)},value:s.volumeDisplay,className:z,placeholder:"Contract Volume"}),Object(p.jsx)("div",{className:"title-volume",children:"Contract Volume"})]}),!!s.volumeDisplay&&Object(p.jsx)("div",{className:"btc",children:Object(p.jsx)(O.a,{value:s.amount.exchanged,allowNegative:!1,decimalScale:4,prefix:"= ",suffix:" ".concat(f.unit)})})]}),Object(p.jsx)("div",{className:"right-info",children:Object(p.jsxs)("div",{className:"contrant-info",children:[Object(p.jsxs)("div",{className:"balance-contract",children:[Object(p.jsxs)("span",{className:"balance-contract-text pc",children:["Balance in Contract",Object(p.jsx)("br",{}),"(Dynamic Balance)"]}),Object(p.jsxs)("span",{className:"balance-contract-text mobile",children:["Balance in Contract",Object(p.jsx)("br",{}),"(Dyn Bal.)"]}),Object(p.jsx)("span",{className:"balance-contract-num",children:Object(p.jsx)(O.a,{value:s.amount.dynBalance,allowZero:!0,decimalScale:2})})]}),Object(p.jsxs)("div",{className:"box-margin",children:[Object(p.jsx)("span",{children:" Margin "}),Object(p.jsx)("span",{className:"margin",children:Object(p.jsx)(O.a,{value:s.amount.margin,allowZero:!0,decimalScale:2})})]}),Object(p.jsxs)("div",{className:"available-balance",children:[Object(p.jsx)("span",{className:"available-balance pc",children:" Available Balance "}),Object(p.jsx)("span",{className:"available-balance mobile",children:"Avail Bal"}),Object(p.jsx)("span",{className:"available-balance-num",children:Object(p.jsx)(O.a,{value:s.amount.available,allowZero:!0,decimalScale:2})})]})]})})]}),Object(p.jsx)("div",{className:"slider mt-13",children:Object(p.jsx)(P,{max:s.amount.dynBalance,onValueChange:function(e){s.setMargin(e)},start:s.amount.margin,freeze:G})}),Object(p.jsx)("div",{className:"title-margin",children:"Margin"}),Object(p.jsx)("div",{className:"enterInfo",children:!!s.volumeDisplay&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"text-info",children:[Object(p.jsx)("div",{className:"title-enter pool",children:"Pool Liquidity"}),Object(p.jsx)("div",{className:"text-enter poolL",children:Object(p.jsx)(O.a,{value:s.fundingRate.liquidity,decimalScale:2,suffix:" ".concat(f.bTokenSymbol)})})]}),Object(p.jsxs)("div",{className:"text-info",children:[Object(p.jsx)("div",{className:"title-enter",children:"Liquidity Used"}),Object(p.jsxs)("div",{className:"text-enter",children:[Object(p.jsx)(O.a,{value:S.curLiqUsed,suffix:"%",decimalScale:2})," -> ",Object(p.jsx)(O.a,{value:S.afterLiqUsed,decimalScale:2,suffix:"%"})]})]}),Object(p.jsxs)("div",{className:"text-info",children:[Object(p.jsx)("div",{className:"title-enter",children:"Funding Rate Impact"}),Object(p.jsxs)("div",{className:"text-enter",children:[Object(p.jsx)(O.a,{value:s.fundingRate.fundingRate0,suffix:"%",allowNegative:!1,decimalScale:4})," -> ",Object(p.jsx)(O.a,{value:N,allowNegative:!1,decimalScale:4,suffix:"%"})]})]}),Object(p.jsxs)("div",{className:"text-info",children:[Object(p.jsx)("div",{className:"title-enter",children:"Transaction Fee"}),Object(p.jsx)("div",{className:"text-enter",children:Object(p.jsx)(O.a,{value:k,allowZero:!0,decimalScale:2,suffix:" ".concat(f.bTokenSymbol)})})]})]})}),Object(p.jsx)(V,{hasConnectWallet:W,transFee:k,wallet:c,spec:s.config,indexPrice:s.index,available:s.amount.available,volume:s.volumeDisplay,direction:b,leverage:s.amount.leverage,afterTrade:function(){s.refresh(),s.setVolume("")},position:s.position,trading:s,symbolId:s.config&&s.config.symbolId,bTokenId:s.config&&s.config.bTokenId,version:i})]})})})));t.a=Object(x.b)("wallet","trading")(Object(x.c)((function(e){var t=e.wallet,c=e.trading,s=e.isPro,i=Object(n.useState)("trade"),r=Object(a.a)(i,2),l=r[0],o=r[1],d=function(e){return o(e)},A=j()("trade-position",l);return Object(p.jsxs)("div",{className:A,children:[Object(p.jsx)("div",{className:"header-top",children:Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("span",{className:"trade",onClick:function(){return d("trade")},children:"TRADE"}),!s&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"pc position",onClick:function(){return d("position")},children:"MY POSITION"}),Object(p.jsx)("span",{className:"mobile position",onClick:function(){return d("position")},children:"POSITION"}),Object(p.jsx)("span",{className:"history",onClick:function(){return d("history")},children:"HISTORY"})]})]})}),Object(p.jsx)(X,{}),Object(p.jsx)(D,{}),Object(p.jsx)(E,{wallet:t,spec:c.config,specs:c.configs}),Object(p.jsx)(T,{})]})})))},595:function(e,t,c){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAACXBIWXMAAAsSAAALEgHS3X78AAAA30lEQVQ4ja2Tuw3CMBRFr1FSkxGyASxgkUgp3JHSJWzACLABGwBdSkoXkeLICzAKNSmMjFyEYKJ8fDr/jp7vs4nWGi6IYgmACkD9OkVHAHFYFlfnZsuib7HDpcn42pfMIJuMx75kSwD3JuORD5lhBcCZ3RSZYdtk/NydDEZK6rAskn+LXzKimAn3YbMZTUAUkwA2AFJNhSSK5fZ9DaJ9/iczIwSwn1KZswGaCtOtmxeZFe5M4F5kltw2ZBC9T0NT8QRwQPkZkrmVjcKrrH3Niig2rzJNhfkeo7rmINVUyDebuzjUKehMyAAAAABJRU5ErkJggg=="},597:function(e,t,c){"use strict";t.a="data:image/png;base64,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"},623:function(e,t,c){}}]);
//# sourceMappingURL=2.f6e18c3c.chunk.js.map